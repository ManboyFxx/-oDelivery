import{d as i,u as z,j as e,G as v,m as F,X as R,t as x}from"./vendor-react-BYm2vN5O.js";import{M as W}from"./Modal-BU8I6Kmo.js";import{I as w}from"./InputLabel-BmqANJC9.js";import{T as y}from"./TextInput-D00-Dvyn.js";import{P as X}from"./PrimaryButton-C8-r8q-u.js";import{S as $}from"./SecondaryButton-CCdDDmH-.js";import{I as N}from"./InputError-CfUcprF9.js";import{b$ as H,c0 as C,c1 as J,c8 as Q,c5 as U,c6 as V,ca as Y,cb as Z,c4 as ee,cc as ae}from"./vendor-others-BqROYnIz.js";import se from"./DraggableCategoryItem-Cm3gXCXH.js";import"./vendor-utils-DuuP9eDp.js";function fe({categories:S}){const[l,n]=i.useState(S),[g,k]=i.useState(""),[I,t]=i.useState(!1),[r,f]=i.useState(null),[D,h]=i.useState(null),E=H(C(ee),C(Z,{coordinateGetter:Y})),{data:d,setData:c,post:M,put:te,processing:B,reset:P,errors:p,delete:re}=z({name:"",description:"",image_url:""}),m=l.filter(a=>a.name.toLowerCase().includes(g.toLowerCase()));function L(a){const{active:s,over:b}=a;h(null),s.id!==b?.id&&n(u=>{const q=u.findIndex(o=>o.id===s.id),A=u.findIndex(o=>o.id===b?.id),j=ae(u,q,A);return x.post(route("categories.reorder"),{categories:j.map((o,K)=>({id:o.id,sort_order:K}))},{preserveScroll:!0}),j})}const T=()=>{f(null),P(),t(!0)},_=a=>{f(a),c({name:a.name,description:a.description||"",image_url:a.image_url||""}),t(!0)},G=a=>{a.preventDefault(),r?x.put(route("categories.update",r.id),d,{onSuccess:()=>{t(!1),n(l.map(s=>s.id===r.id?{...s,...d}:s))}}):M(route("categories.store"),{onSuccess:()=>{t(!1),window.location.reload()}})},O=a=>{confirm("Tem certeza que deseja excluir esta categoria? Produtos vinculados podem ficar sem categoria.")&&x.delete(route("categories.destroy",a),{preserveScroll:!0,onSuccess:()=>{n(l.filter(s=>s.id!==a))}})};return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white hidden md:block",children:"Gerenciar Categorias"}),e.jsxs("div",{className:"flex gap-4 w-full md:w-auto",children:[e.jsxs("div",{className:"relative flex-1 md:w-72",children:[e.jsx(v,{className:"absolute left-4 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:g,onChange:a=>k(a.target.value),placeholder:"Buscar categorias...",className:"w-full h-11 rounded-2xl border border-gray-200 bg-white pl-11 shadow-sm focus:border-[#ff3d03] focus:ring-[#ff3d03]/20 dark:border-white/5 dark:bg-[#0f1012] transition-all"})]}),e.jsxs("button",{onClick:T,className:"flex items-center gap-2 rounded-2xl bg-[#ff3d03] px-6 py-3 text-sm font-bold text-white shadow-lg shadow-[#ff3d03]/20 hover:bg-[#e63700] hover:scale-105 active:scale-95 transition-all whitespace-nowrap",children:[e.jsx(F,{className:"h-5 w-5"}),"Nova Categoria"]})]})]}),e.jsx("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[24px] shadow-sm border border-gray-100 dark:border-white/5 overflow-hidden",children:e.jsx(J,{sensors:E,collisionDetection:Q,onDragStart:({active:a})=>h(a.id),onDragEnd:L,children:e.jsx(U,{items:m.map(a=>a.id),strategy:V,children:e.jsxs("ul",{className:"divide-y divide-gray-100 dark:divide-white/5",children:[m.map(a=>e.jsx(se,{category:a,onEdit:_,onDelete:O,isDragging:D===a.id},a.id)),m.length===0&&e.jsxs("li",{className:"p-12 text-center flex flex-col items-center justify-center text-gray-500",children:[e.jsx("div",{className:"h-16 w-16 bg-gray-50 dark:bg-white/5 rounded-full flex items-center justify-center mb-4",children:e.jsx(v,{className:"h-8 w-8 text-gray-300"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Nenhuma categoria encontrada"})]})]})})})}),e.jsx(W,{show:I,onClose:()=>t(!1),maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-black text-gray-900 dark:text-white",children:r?"Editar Categoria":"Nova Categoria"}),e.jsx("button",{type:"button",onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-500",children:e.jsx(R,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(w,{value:"Nome *"}),e.jsx(y,{className:"w-full mt-1",value:d.name,onChange:a=>c("name",a.target.value),required:!0,placeholder:"Ex: Bebidas"}),e.jsx(N,{message:p.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(w,{value:"Descrição"}),e.jsx(y,{className:"w-full mt-1",value:d.description,onChange:a=>c("description",a.target.value),placeholder:"Breve descrição da categoria"}),e.jsx(N,{message:p.description,className:"mt-2"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 mt-6 border-t border-gray-100 dark:border-white/5",children:[e.jsx($,{onClick:()=>t(!1),className:"py-3 rounded-xl",children:"Cancelar"}),e.jsx(X,{disabled:B,className:"bg-[#ff3d03] hover:bg-[#e63700] py-3 rounded-xl shadow-lg shadow-[#ff3d03]/20 border-transparent",children:r?"Salvar Alterações":"Criar Categoria"})]})]})]})})]})}export{fe as default};
