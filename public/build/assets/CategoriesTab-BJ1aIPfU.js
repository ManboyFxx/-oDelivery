import{r as i,u as z,j as e,X as F,a as x}from"./app-CCgVoYEQ.js";import{M as R}from"./Modal-rsFWo1Ry.js";import{I as v}from"./InputLabel-Cd-NfE0-.js";import{T as w}from"./TextInput-BczBMDWj.js";import{P as W}from"./PrimaryButton-B8tWqAj6.js";import{S as X}from"./SecondaryButton-DcxQ5Lgq.js";import{I as y}from"./InputError-CWU755YW.js";import{k as H,l as N,D as J,n as Q,o as U,P as V}from"./core.esm-CME_1ZTs.js";import{S as Y,v as Z,s as $,a as ee}from"./sortable.esm-D5RK0FoF.js";import te from"./DraggableCategoryItem-Cd8Xnfss.js";import{S as C}from"./search-DLr_Xhyt.js";import{P as ae}from"./plus-BdAvLtDu.js";import"./keyboard-BRIR3wlq.js";import"./use-sync-refs-D0Pc_C8j.js";import"./portal-DEyrsJCl.js";import"./with-selector-CQ3QENBX.js";import"./hidden-dfAfSfNn.js";import"./transition-vUlZZAvv.js";import"./grip-vertical-CXtezsjt.js";import"./pencil-urOlaFb-.js";import"./trash-2-tK0yr903.js";function ke({categories:S}){const[l,n]=i.useState(S),[g,k]=i.useState(""),[D,r]=i.useState(!1),[s,f]=i.useState(null),[I,p]=i.useState(null),E=H(N(V),N(U,{coordinateGetter:$})),{data:d,setData:c,post:M,put:re,processing:P,reset:B,errors:h,delete:se}=z({name:"",description:"",image_url:""}),m=l.filter(t=>t.name.toLowerCase().includes(g.toLowerCase()));function L(t){const{active:a,over:b}=t;p(null),a.id!==b?.id&&n(u=>{const A=u.findIndex(o=>o.id===a.id),G=u.findIndex(o=>o.id===b?.id),j=ee(u,A,G);return x.post(route("categories.reorder"),{categories:j.map((o,K)=>({id:o.id,sort_order:K}))},{preserveScroll:!0}),j})}const T=()=>{f(null),B(),r(!0)},_=t=>{f(t),c({name:t.name,description:t.description||"",image_url:t.image_url||""}),r(!0)},O=t=>{t.preventDefault(),s?x.put(route("categories.update",s.id),d,{onSuccess:()=>{r(!1),n(l.map(a=>a.id===s.id?{...a,...d}:a))}}):M(route("categories.store"),{onSuccess:()=>{r(!1),window.location.reload()}})},q=t=>{confirm("Tem certeza que deseja excluir esta categoria? Produtos vinculados podem ficar sem categoria.")&&x.delete(route("categories.destroy",t),{preserveScroll:!0,onSuccess:()=>{n(l.filter(a=>a.id!==t))}})};return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white hidden md:block",children:"Gerenciar Categorias"}),e.jsxs("div",{className:"flex gap-4 w-full md:w-auto",children:[e.jsxs("div",{className:"relative flex-1 md:w-72",children:[e.jsx(C,{className:"absolute left-4 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:g,onChange:t=>k(t.target.value),placeholder:"Buscar categorias...",className:"w-full h-11 rounded-2xl border border-gray-200 bg-white pl-11 shadow-sm focus:border-[#ff3d03] focus:ring-[#ff3d03]/20 dark:border-white/5 dark:bg-[#0f1012] transition-all"})]}),e.jsxs("button",{onClick:T,className:"flex items-center gap-2 rounded-2xl bg-[#ff3d03] px-6 py-3 text-sm font-bold text-white shadow-lg shadow-[#ff3d03]/20 hover:bg-[#e63700] hover:scale-105 active:scale-95 transition-all whitespace-nowrap",children:[e.jsx(ae,{className:"h-5 w-5"}),"Nova Categoria"]})]})]}),e.jsx("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[24px] shadow-sm border border-gray-100 dark:border-white/5 overflow-hidden",children:e.jsx(J,{sensors:E,collisionDetection:Q,onDragStart:({active:t})=>p(t.id),onDragEnd:L,children:e.jsx(Y,{items:m.map(t=>t.id),strategy:Z,children:e.jsxs("ul",{className:"divide-y divide-gray-100 dark:divide-white/5",children:[m.map(t=>e.jsx(te,{category:t,onEdit:_,onDelete:q,isDragging:I===t.id},t.id)),m.length===0&&e.jsxs("li",{className:"p-12 text-center flex flex-col items-center justify-center text-gray-500",children:[e.jsx("div",{className:"h-16 w-16 bg-gray-50 dark:bg-white/5 rounded-full flex items-center justify-center mb-4",children:e.jsx(C,{className:"h-8 w-8 text-gray-300"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Nenhuma categoria encontrada"})]})]})})})}),e.jsx(R,{show:D,onClose:()=>r(!1),maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-black text-gray-900 dark:text-white",children:s?"Editar Categoria":"Nova Categoria"}),e.jsx("button",{type:"button",onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-500",children:e.jsx(F,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(v,{value:"Nome *"}),e.jsx(w,{className:"w-full mt-1",value:d.name,onChange:t=>c("name",t.target.value),required:!0,placeholder:"Ex: Bebidas"}),e.jsx(y,{message:h.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(v,{value:"Descrição"}),e.jsx(w,{className:"w-full mt-1",value:d.description,onChange:t=>c("description",t.target.value),placeholder:"Breve descrição da categoria"}),e.jsx(y,{message:h.description,className:"mt-2"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 mt-6 border-t border-gray-100 dark:border-white/5",children:[e.jsx(X,{onClick:()=>r(!1),className:"py-3 rounded-xl",children:"Cancelar"}),e.jsx(W,{disabled:P,className:"bg-[#ff3d03] hover:bg-[#e63700] py-3 rounded-xl shadow-lg shadow-[#ff3d03]/20 border-transparent",children:s?"Salvar Alterações":"Criar Categoria"})]})]})]})})]})}export{ke as default};
