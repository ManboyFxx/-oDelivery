import{d as o,j as b}from"./vendor-react-BYm2vN5O.js";function W({currentLocation:r,destinationLocation:n,trajectoryCoordinates:t=[],zoom:E=15,apiKey:g,height:M="400px",showTrajectory:m=!1}){const l=o.useRef(null),s=o.useRef(null),p=o.useRef([]),a=o.useRef(null);o.useEffect(()=>{if(!(!l.current||!g))if(window.google?.maps)d();else{const e=document.createElement("script");return e.src=`https://maps.googleapis.com/maps/api/js?key=${g}&libraries=maps`,e.async=!0,e.defer=!0,e.onload=()=>{d()},e.onerror=()=>{console.error("Erro ao carregar Google Maps")},document.head.appendChild(e),()=>{}}},[g]);const d=()=>{if(!l.current||!window.google?.maps)return;const i=r||n||{lat:-23.5505,lng:-46.6333};s.current=new window.google.maps.Map(l.current,{zoom:E,center:i,mapTypeControl:!1,fullscreenControl:!0,streetViewControl:!1}),m&&t.length>0&&w(),r&&f(r,"Você está aqui","/images/icons/motoboy-marker.png"),n&&f(n,"Destino","/images/icons/destination-marker.png"),r&&n&&c()},f=(e,i,x)=>{if(!s.current)return;const k={position:e,map:s.current,title:i,animation:window.google.maps.Animation.DROP};x&&(k.icon={url:x,scaledSize:new window.google.maps.Size(32,32),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(16,32)});const u=new window.google.maps.Marker(k),h=new window.google.maps.InfoWindow({content:`<div style="padding: 8px;">
                <strong>${i}</strong>
                <p style="font-size: 0.85em; margin: 4px 0 0;">
                    ${e.lat.toFixed(4)}, ${e.lng.toFixed(4)}
                </p>
            </div>`});return u.addListener("click",()=>{p.current.forEach(R=>{R.infoWindow&&R.infoWindow.close()}),h.open(s.current,u)}),p.current.push({marker:u,infoWindow:h}),u},w=()=>{!s.current||t.length<2||(a.current&&a.current.setMap(null),a.current=new window.google.maps.Polyline({path:t,geodesic:!0,strokeColor:"#FF3D03",strokeOpacity:.8,strokeWeight:3,map:s.current}))},c=()=>{if(!s.current||!r||!n)return;const e=new window.google.maps.LatLngBounds;e.extend(r),e.extend(n),s.current.fitBounds(e)};return o.useEffect(()=>{s.current&&(p.current.forEach(e=>{e.marker.setMap(null)}),p.current=[],r&&f(r,"Você está aqui","/images/icons/motoboy-marker.png"),n&&f(n,"Destino","/images/icons/destination-marker.png"),r&&n?c():r?s.current.setCenter(r):n&&s.current.setCenter(n))},[r,n]),o.useEffect(()=>{m&&t.length>0&&w()},[t,m]),b.jsx("div",{ref:l,style:{width:"100%",height:M,borderRadius:"12px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"}})}export{W as M};
