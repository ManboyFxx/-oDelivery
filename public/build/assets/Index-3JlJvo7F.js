import{r,j as e,H as N,L as _,T as S,a as l}from"./app-Bel1sYVi.js";import{A as q,a as C}from"./AuthenticatedLayout-BG14m6fa.js";import{P}from"./PageHeader-C6TQTB8P.js";import{M as A}from"./Modal-BONCTKOh.js";import{T as M}from"./TextInput-BeZp68Ba.js";import{P as I}from"./PrimaryButton-CkfYhrXn.js";import{S as B}from"./SecondaryButton-BlWnthPz.js";import{H as E}from"./history-C4FYtSuu.js";import{P as x}from"./package-CL-ioFV3.js";import{D as T}from"./dollar-sign-BDKfZIof.js";import{T as H}from"./trending-up-U7smAT7X.js";import{S as L}from"./search-B98NIQjy.js";import{M as O}from"./minus-BbJ7xjPr.js";import{P as D}from"./plus-D6k3bBpF.js";import{t as Q}from"./switch-DM-aI7wB.js";import"./monitor-CzGfHeUw.js";import"./shopping-bag-9Fw7ApGE.js";import"./image-0Y7fot_I.js";import"./layout-dashboard-B6Mj6lcP.js";import"./credit-card-Cw3viFrd.js";import"./trophy-DAnoweMG.js";import"./ticket-CzgHzPfM.js";import"./store-ThRb288B.js";import"./key-BRDzjaHP.js";import"./shield-check-Bfp10-HO.js";import"./log-out-v7FOywi7.js";import"./transition-B7DrhJVu.js";import"./use-sync-refs-DXrNzHjz.js";import"./truck-BVsUXzbD.js";import"./menu-BCE9BQ7l.js";import"./use-resolve-button-type-RcV6F0XU.js";import"./keyboard-DzC_kn31.js";import"./portal-C2eK-3kB.js";import"./with-selector-RL2pCtBY.js";import"./chevron-down-CgjflUTd.js";import"./clock--p9pRg2A.js";import"./menu-dUUyluep.js";import"./useAudio-8IniAMwv.js";import"./bell-DxaDzzw0.js";import"./eye-DAVEdTz5.js";import"./arrow-left-Cx-fLTQL.js";import"./hidden-DPOne3F0.js";function Pe({products:m,metrics:s}){const[i,h]=r.useState(""),[o,g]=r.useState(null),[n,d]=r.useState(""),[f,a]=r.useState(!1),u=m.data.filter(t=>t.name.toLowerCase().includes(i.toLowerCase())),p=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s.total_value),b=t=>{g(t),d(t.stock_quantity?.toString()||"0"),a(!0)},k=()=>{o&&l.put(route("stock.update",o.id),{stock_quantity:parseInt(n)||0,track_stock:!0},{onSuccess:()=>a(!1)})},c=(t,j)=>{const w=t.stock_quantity||0,v=Math.max(0,w+j);l.put(route("stock.update",t.id),{stock_quantity:v,track_stock:!0},{preserveScroll:!0})},y=t=>{l.put(route("stock.update",t.id),{stock_quantity:t.stock_quantity||0,track_stock:!t.track_stock},{preserveScroll:!0})};return e.jsxs(q,{children:[e.jsx(N,{title:"Controle de Estoque"}),e.jsxs("div",{className:"flex h-full flex-col space-y-8",children:[e.jsx(P,{title:"Controle de Estoque",subtitle:"Gerencie entradas, saídas e inventário.",action:e.jsxs(_,{href:route("stock.movements"),className:"flex items-center gap-2 rounded-2xl bg-white dark:bg-[#1a1b1e] border border-gray-200 dark:border-white/10 px-4 py-3 text-sm font-bold text-gray-700 dark:text-white shadow-sm hover:bg-gray-50 dark:hover:bg-white/5 transition-all",children:[e.jsx(E,{className:"h-5 w-5"}),"Histórico"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] p-6 rounded-[24px] border border-gray-100 dark:border-white/5 shadow-xl shadow-gray-200/50 dark:shadow-none relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 p-6 opacity-5 group-hover:scale-110 transition-transform duration-500",children:e.jsx(x,{className:"w-24 h-24 text-gray-900 dark:text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium mb-1",children:"Total de Itens"}),e.jsx("h3",{className:"text-4xl font-black text-gray-900 dark:text-white tracking-tight",children:s.total_items})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] p-6 rounded-[24px] border border-gray-100 dark:border-white/5 shadow-xl shadow-gray-200/50 dark:shadow-none relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 p-6 opacity-5 group-hover:scale-110 transition-transform duration-500",children:e.jsx(S,{className:"w-24 h-24 text-[#ff3d03]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium mb-1",children:"Estoque Baixo"}),e.jsx("h3",{className:"text-4xl font-black text-[#ff3d03] tracking-tight",children:s.low_stock}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Menos de 5 unidades"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] p-6 rounded-[24px] border border-gray-100 dark:border-white/5 shadow-xl shadow-gray-200/50 dark:shadow-none relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 p-6 opacity-5 group-hover:scale-110 transition-transform duration-500",children:e.jsx(T,{className:"w-24 h-24 text-green-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium mb-1",children:"Valor em Estoque"}),e.jsx("h3",{className:"text-4xl font-black text-gray-900 dark:text-white tracking-tight",children:p}),e.jsxs("p",{className:"text-xs text-green-500 font-bold mt-2 flex items-center gap-1",children:[e.jsx(H,{className:"w-3 h-3"}),"Patrimônio Ativo"]})]})]})]}),e.jsx("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:e.jsxs("div",{className:"relative w-full md:w-96",children:[e.jsx(L,{className:"absolute left-4 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:i,onChange:t=>h(t.target.value),placeholder:"Buscar produto no estoque...",className:"w-full h-11 rounded-2xl border border-gray-200 bg-white pl-11 shadow-sm focus:border-[#ff3d03] focus:ring-[#ff3d03]/20 dark:border-white/5 dark:bg-[#0f1012] transition-all"})]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:u.map(t=>e.jsxs("div",{className:"group flex flex-col bg-white dark:bg-[#1a1b1e] rounded-[32px] border border-gray-100 dark:border-white/5 shadow-xl shadow-gray-200/50 dark:shadow-none overflow-hidden hover:-translate-y-1 transition-all duration-300",children:[e.jsxs("div",{className:"relative aspect-[4/3] bg-gray-100 dark:bg-white/5 overflow-hidden",children:[t.image_url?e.jsx("img",{src:t.image_url,alt:t.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(x,{className:"w-12 h-12 text-gray-300 dark:text-gray-600"})}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-bold shadow-sm backdrop-blur-md
                                        ${t.track_stock?(t.stock_quantity||0)<=5?"bg-red-500 text-white":"bg-green-500 text-white":"bg-gray-100/90 text-gray-500 dark:bg-black/50 dark:text-gray-400"}`,children:t.track_stock?(t.stock_quantity||0)<=5?"Baixo":"OK":"Off"})})]}),e.jsxs("div",{className:"p-6 flex flex-col flex-1",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-bold text-[#ff3d03] uppercase tracking-wider mb-1",children:t.category?.name||"Geral"}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-lg line-clamp-1",title:t.name,children:t.name})]}),e.jsxs("div",{className:"mt-auto space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-white/5 p-3 rounded-xl",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Controlar?"}),e.jsx(Q,{checked:t.track_stock,onChange:()=>y(t),className:`${t.track_stock?"bg-[#ff3d03]":"bg-gray-300 dark:bg-gray-600"} relative inline-flex h-6 w-10 items-center rounded-full transition-colors focus:outline-none`,children:e.jsx("span",{className:`${t.track_stock?"translate-x-5":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]}),t.track_stock?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>c(t,-1),className:"w-12 h-12 flex items-center justify-center rounded-2xl bg-gray-100 dark:bg-white/10 text-gray-400 hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-500/20 dark:hover:text-red-400 transition-colors",children:e.jsx(O,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex flex-col items-center cursor-pointer",onClick:()=>b(t),children:[e.jsx("span",{className:"text-3xl font-black text-gray-900 dark:text-white tracking-tighter",children:t.stock_quantity||0}),e.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-400",children:"Unidades"})]}),e.jsx("button",{onClick:()=>c(t,1),className:"w-12 h-12 flex items-center justify-center rounded-2xl bg-gray-100 dark:bg-white/10 text-gray-400 hover:bg-green-50 hover:text-green-500 dark:hover:bg-green-500/20 dark:hover:text-green-400 transition-colors",children:e.jsx(D,{className:"w-5 h-5"})})]}):e.jsx("div",{className:"h-12 flex items-center justify-center bg-gray-50 dark:bg-white/5 rounded-2xl border border-dashed border-gray-200 dark:border-white/10",children:e.jsxs("span",{className:"text-xs font-bold text-gray-400 flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),"Estoque Infinito"]})})]})]})]},t.id))})]}),e.jsx(A,{show:f,onClose:()=>a(!1),maxWidth:"sm",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-black text-gray-900 dark:text-white mb-6 text-center",children:"Ajuste Manual"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 p-4 rounded-2xl border border-gray-100 dark:border-white/5 text-center",children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase mb-1",children:"Produto"}),e.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white line-clamp-1",children:o?.name})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"relative",children:[e.jsx(M,{type:"number",value:n,onChange:t=>d(t.target.value),className:"block w-full text-center text-4xl font-black h-20 border-[#ff3d03] text-[#ff3d03] focus:ring-[#ff3d03]",autoFocus:!0}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 font-bold",children:"UN"})]}),e.jsx("p",{className:"text-center text-xs text-gray-400 mt-2 font-medium",children:"Digite a nova quantidade total"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(B,{onClick:()=>a(!1),className:"flex-1 justify-center py-3 rounded-xl font-bold",children:"Cancelar"}),e.jsx(I,{onClick:k,className:"flex-1 justify-center py-3 rounded-xl bg-[#ff3d03] hover:bg-[#e63700] border-transparent font-bold shadow-lg shadow-[#ff3d03]/20",children:"Salvar"})]})]})]})})]})}export{Pe as default};
