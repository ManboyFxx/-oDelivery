import{r as g,u as w,j as e,H as k,a as h}from"./app-CUFRCqdo.js";import{A as S}from"./AuthenticatedLayout-DmaCqmli.js";import{M as P}from"./Modal-wZVOxSoP.js";import{I as r}from"./InputLabel-DVHgsnFl.js";import{T as o}from"./TextInput-BoOsYc3O.js";import{I as n}from"./InputError-B0KnlYsY.js";import{P as z}from"./PrimaryButton-o7JUs_1z.js";import{S as D}from"./SecondaryButton-DIjdGT2O.js";import{P as E}from"./plus-CqaD-vFi.js";import{P as I}from"./percent-Z6qKw5NR.js";import{D as T}from"./dollar-sign-D5NFXsV1.js";import{C as A}from"./circle-check-big-dgiNTSq8.js";import{C as M}from"./circle-x-DVSd-cgu.js";import{C as O}from"./calendar-Kdxbtm9m.js";import{S as B}from"./square-pen-CvfmcHZ8.js";import{T as F}from"./trash-2-CRh04c1c.js";import"./monitor-CdErZcrz.js";import"./shopping-bag-zJxrXg6M.js";import"./package-DVCD_rJr.js";import"./image-BKAXPnjU.js";import"./layout-dashboard-BtWfiYZv.js";import"./credit-card-Bd3Lyb5-.js";import"./trophy-DehOvCym.js";import"./ticket-BCTIij_8.js";import"./store-BwiyskbB.js";import"./key-1we6fNzh.js";import"./shield-check-BjPh3Gqx.js";import"./log-out-DBTtiL9k.js";import"./transition-XetXysYI.js";import"./use-sync-refs-DolXfIQ_.js";import"./truck-axOgfbev.js";import"./switch-DK1AqQ5S.js";import"./use-resolve-button-type-BW74xnh8.js";import"./keyboard-D1BT0WfK.js";import"./hidden-BqDU9bpd.js";import"./menu-DS0VEg_Z.js";import"./portal-BNG5Fp40.js";import"./with-selector-DHasQXaD.js";import"./chevron-down-rwh7xn8f.js";import"./clock-Dek9D_6L.js";import"./menu-Xk1DYuHU.js";import"./search-BtprMO6j.js";import"./sun-06dmpbPr.js";import"./bell-CTzvFoX6.js";import"./eye-BsPoA2GQ.js";import"./arrow-left-CdvzrZLx.js";function Ee({coupons:c}){const[f,x]=g.useState(!1),[i,m]=g.useState(null),{data:a,setData:t,post:j,put:v,processing:b,errors:d,reset:p,clearErrors:y}=w({code:"",discount_type:"percentage",discount_value:"",max_uses:"",valid_until:"",plan_restriction:"",is_active:!0}),u=s=>{y(),s?(m(s),t({code:s.code,discount_type:s.discount_type,discount_value:s.discount_value.toString(),max_uses:s.max_uses?s.max_uses.toString():"",valid_until:s.valid_until?s.valid_until.split("T")[0]:"",plan_restriction:s.plan_restriction||"",is_active:s.is_active})):(m(null),p()),x(!0)},l=()=>{x(!1),p()},N=s=>{s.preventDefault(),i?v(route("admin.plan-coupons.update",i.id),{onSuccess:l}):j(route("admin.plan-coupons.store"),{onSuccess:l})},_=s=>{h.post(route("admin.plan-coupons.toggle",s.id))},C=s=>{confirm("Tem certeza que deseja excluir este cupom? Esta ação não pode ser desfeita.")&&h.delete(route("admin.plan-coupons.destroy",s.id))};return e.jsxs(S,{children:[e.jsx(k,{title:"Gerenciar Cupons de Planos"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-gray-900 dark:text-white tracking-tight",children:"Cupons de Planos"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:"Gerencie descontos para assinaturas"})]}),e.jsxs("button",{onClick:()=>u(),className:"flex items-center gap-2 px-4 py-2 bg-[#ff3d03] text-white rounded-xl font-bold text-sm shadow-lg shadow-[#ff3d03]/20 hover:bg-[#e63700] transition-colors",children:[e.jsx(E,{className:"w-4 h-4"}),"Novo Cupom"]})]}),e.jsx("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[32px] border border-gray-100 dark:border-white/5 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-100 dark:border-white/5 bg-gray-50 dark:bg-white/5",children:[e.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-gray-400 uppercase",children:"Código"}),e.jsx("th",{className:"text-left py-4 px-4 text-xs font-bold text-gray-400 uppercase",children:"Desconto"}),e.jsx("th",{className:"text-left py-4 px-4 text-xs font-bold text-gray-400 uppercase",children:"Uso"}),e.jsx("th",{className:"text-left py-4 px-4 text-xs font-bold text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"text-right py-4 px-6 text-xs font-bold text-gray-400 uppercase",children:"Ações"})]})}),e.jsx("tbody",{children:c.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"py-8 text-center text-gray-500 text-sm",children:"Nenhum cupom encontrado."})}):c.data.map(s=>e.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-white/5 transition-colors border-b border-gray-100 dark:border-white/5 last:border-0",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-mono font-bold text-gray-900 dark:text-white",children:s.code}),s.plan_restriction&&e.jsxs("span",{className:"text-xs text-blue-500",children:["Apenas ",s.plan_restriction.toUpperCase()]}),e.jsxs("span",{className:"text-[10px] text-gray-400 flex items-center gap-0.5 mt-0.5",title:"Sincronizado com Stripe",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#635BFF]"}),"Stripe"]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-1 font-bold text-green-600 dark:text-green-400",children:[s.discount_type==="percentage"?e.jsx(I,{size:14}):e.jsx(T,{size:14}),s.discount_value,s.discount_type==="percentage"?"%":""]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.current_uses," / ",s.max_uses||"∞"]})}),e.jsxs("td",{className:"py-4 px-4",children:[e.jsxs("button",{onClick:()=>_(s),className:`px-2.5 py-1 rounded-lg text-xs font-bold flex items-center gap-1 transition-colors ${s.is_active?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[s.is_active?e.jsx(A,{size:12}):e.jsx(M,{size:12}),s.is_active?"Ativo":"Inativo"]}),s.valid_until&&e.jsxs("div",{className:"text-xs text-gray-400 mt-1 flex items-center gap-1",children:[e.jsx(O,{size:10}),"Até ",new Date(s.valid_until).toLocaleDateString()]})]}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>u(s),className:"p-2 text-blue-500 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(B,{size:16})}),s.current_uses===0&&e.jsx("button",{onClick:()=>C(s),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(F,{size:16})})]})})]},s.id))})]})})}),e.jsx(P,{show:f,onClose:l,children:e.jsxs("form",{onSubmit:N,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:i?"Editar Cupom":"Novo Cupom"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Código do Cupom"}),e.jsx(o,{value:a.code,onChange:s=>t("code",s.target.value.toUpperCase()),className:"w-full uppercase font-mono",placeholder:"EX: PRO30",disabled:!!i}),e.jsx(n,{message:d.code,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Tipo de Desconto"}),e.jsxs("select",{value:a.discount_type,onChange:s=>t("discount_type",s.target.value),className:"w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-[#ff3d03] focus:ring-[#ff3d03] rounded-xl shadow-sm",children:[e.jsx("option",{value:"percentage",children:"Porcentagem (%)"}),e.jsx("option",{value:"fixed",children:"Valor Fixo (R$)"})]})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Valor do Desconto"}),e.jsx(o,{type:"number",value:a.discount_value,onChange:s=>t("discount_value",s.target.value),className:"w-full",placeholder:"EX: 30"}),e.jsx(n,{message:d.discount_value,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Limite de Uso (Opcional)"}),e.jsx(o,{type:"number",value:a.max_uses,onChange:s=>t("max_uses",s.target.value),className:"w-full",placeholder:"Infinito"})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Validade (Opcional)"}),e.jsx(o,{type:"date",value:a.valid_until,onChange:s=>t("valid_until",s.target.value),className:"w-full"}),e.jsx(n,{message:d.valid_until,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Restrito ao Plano (Opcional)"}),e.jsxs("select",{value:a.plan_restriction,onChange:s=>t("plan_restriction",s.target.value),className:"w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-[#ff3d03] focus:ring-[#ff3d03] rounded-xl shadow-sm",children:[e.jsx("option",{value:"",children:"Todos os Planos"}),e.jsx("option",{value:"pro",children:"Pro"}),e.jsx("option",{value:"custom",children:"Personalizado"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(D,{onClick:l,children:"Cancelar"}),e.jsx(z,{disabled:b,children:i?"Atualizar":"Criar"})]})]})})]})]})}export{Ee as default};
