import{r as o,j as t,H as le,d as z}from"./app-TTZ6yfYt.js";import{u as ce,S as de,M as me}from"./useAudio-BrD6CPIp.js";import{t as g}from"./index-fAgkKtaT.js";import ue from"./HeroSection-V0eT2pxl.js";import pe from"./CategoryNav-BPHTlO4E.js";import he from"./ProductGrid-BW148wPZ.js";import xe from"./CartSidebar-CWpULOjU.js";import fe from"./StoreInfoModal-CQqtqyvw.js";import ge from"./ProductModal-Beb6PfQf.js";import we from"./AuthModal-CSACz72C.js";import be from"./CustomerAreaModal-CYqmutIq.js";import ve from"./CheckoutModal-BGlv5i_O.js";import je from"./MenuNavbar-BdLl5Loe.js";import{F as ye}from"./flame-BBXNMDs8.js";import{S as ke}from"./star-CFFUJXLP.js";import{S as Ne}from"./search-Qdzzigq9.js";import"./instagram-Bm1UNQK2.js";import"./message-circle-rRXLrCEA.js";import"./map-pin-BIcAiOcE.js";import"./navigation-jssw76Ar.js";import"./ProductCard-DsNZmc0r.js";import"./plus-D0H8QIYy.js";import"./shopping-bag-D7PBG70r.js";import"./pen-CW5tG0E4.js";import"./trash-2-DNWCUWnN.js";import"./minus-TG17GZ8E.js";import"./chevron-right-LC0UAjEJ.js";import"./clock-C8kbtfaR.js";import"./share-2-BuBUilMp.js";import"./AddressForm-vzw2qQyF.js";import"./TextInput-KWfHzR6p.js";import"./InputLabel-CjJFwicP.js";import"./PrimaryButton-3ujQzmlE.js";import"./SecondaryButton-C7WXyfu5.js";import"./loader-circle-ZypQRF6q.js";import"./bell-CSgR0Qf5.js";import"./gift-CQy5fQBz.js";import"./trophy-DB-OFGCm.js";import"./log-out-CsnF5_WX.js";import"./house-CpQdtLLD.js";import"./check-C5AhucfN.js";import"./history-CsIQiffq.js";import"./copy-CV5gEaRH.js";import"./Modal-48PZuyWw.js";import"./keyboard-BQvCND68.js";import"./use-sync-refs-6-NS1CTg.js";import"./portal-5ufihSUC.js";import"./with-selector-DUY2HtF-.js";import"./hidden-CExFSfQ-.js";import"./transition-Bs7QEe6q.js";import"./sparkles-CcRJtwAq.js";import"./arrow-left-ByxKKVVO.js";import"./circle-check-big-DLH-d9NB.js";import"./wallet-S8rj3OUC.js";import"./ticket-D7xrt7cm.js";import"./credit-card-DCZeHJ2i.js";import"./banknote-V7ZrHrcR.js";import"./switch-Dj3SprrZ.js";import"./use-resolve-button-type-CxTZIPCI.js";import"./store-BC_pVZeE.js";import"./user-D-pLA1Sg.js";function D(a,n){a=a.replace(/^#/,"");let l=parseInt(a.substring(0,2),16),c=parseInt(a.substring(2,4),16),m=parseInt(a.substring(4,6),16);l=Math.floor(l*(1+n/100)),c=Math.floor(c*(1+n/100)),m=Math.floor(m*(1+n/100)),l=Math.min(255,Math.max(0,l)),c=Math.min(255,Math.max(0,c)),m=Math.min(255,Math.max(0,m));const O=l.toString(16).padStart(2,"0"),u=c.toString(16).padStart(2,"0"),y=m.toString(16).padStart(2,"0");return`#${O}${u}${y}`}function At({store:a,categories:n,slug:l,authCustomer:c,activePromotion:m,availableCoupons:O}){const[u,y]=o.useState("all"),[k,V]=o.useState(""),[d,p]=o.useState([]),[B,E]=o.useState(null),[_,w]=o.useState(!1),[A,L]=o.useState(null),[U,P]=o.useState(null),[N,h]=o.useState(!1),[R,C]=o.useState(!1),[S,b]=o.useState(!1),[v,x]=o.useState(!1);o.useEffect(()=>{if(typeof window<"u"){const r=new URLSearchParams(window.location.search).get("ref");r&&localStorage.setItem("referral_code",r)}},[]);const[s,$]=o.useState(c),[J,T]=o.useState([]),[j,Q]=o.useState(()=>{const e=localStorage.getItem("menu_theme");return e?e==="dark":a.theme_mode==="dark"?!0:a.theme_mode==="light"?!1:window.matchMedia("(prefers-color-scheme: dark)").matches}),G=()=>{Q(e=>{const r=!e;return localStorage.setItem("menu_theme",r?"dark":"light"),r})},W=async()=>{if(s)try{const e=await z.get("/customer/addresses");T(e.data)}catch(e){console.error("Error loading addresses:",e)}};o.useEffect(()=>{s?W():T([])},[s]);const{play:Y,initializeAudio:q}=ce();o.useEffect(()=>{const e=()=>q();return window.addEventListener("click",e,{once:!0}),window.addEventListener("touchstart",e,{once:!0}),()=>{window.removeEventListener("click",e),window.removeEventListener("touchstart",e)}},[q]),o.useEffect(()=>{const e=localStorage.getItem("cart");if(e)try{p(JSON.parse(e))}catch(r){console.error("Error parsing cart",r)}},[]),o.useEffect(()=>{localStorage.setItem("cart",JSON.stringify(d))},[d]),o.useEffect(()=>{const e=window.document.documentElement;j?e.classList.add("dark"):e.classList.remove("dark")},[j]),o.useEffect(()=>{const e=()=>{};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[n]);const K=e=>{if(y(e),e!=="all"){const r=document.getElementById(e);if(r){const i=r.getBoundingClientRect().top+window.scrollY-120;window.scrollTo({top:i,behavior:"smooth"})}}else window.scrollTo({top:0,behavior:"smooth"})},M=e=>{E(e),P(null),L(null),w(!0)},X=e=>{A!==null?(p(r=>r.map((f,i)=>i===A?e:f)),g.success("Item atualizado com sucesso!")):(p(r=>[...r,e]),g.success("Adicionado ao carrinho!"),Y("success")),w(!1)},Z=e=>{const r=d[e];E(r.product),P(r),L(e),w(!0),h(!1)},ee=e=>{p(r=>r.filter((f,i)=>i!==e)),g.info("Item removido do carrinho.")},te=()=>{if(!s){g.info("Para finalizar, indentifique-se primeiro."),b(!0),h(!1);return}I(!0),h(!1)},[H,I]=o.useState(!1),re=e=>{$(e)},oe=async()=>{try{await z.post("/customer/logout"),$(null),g.info("Voc√™ saiu da conta."),x(!1)}catch(e){console.error(e)}},ae=d.reduce((e,r)=>e+r.subtotal,0),F=d.reduce((e,r)=>e+r.quantity,0),se=(e,r)=>{r<1||p(f=>f.map((i,ie)=>{if(ie===e){const ne=i.subtotal/i.quantity;return{...i,quantity:r,subtotal:ne*r}}return i}))};return t.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-premium-dark text-gray-900 dark:text-gray-100 font-sans selection:bg-orange-100 selection:text-orange-900 pb-40 md:pb-40 transition-colors duration-300",children:[t.jsx(le,{title:a.name,children:t.jsx("style",{children:`
                    :root {
                        --primary-color: ${a.theme_color||"#ff3d03"};
                        --primary-hover: ${D(a.theme_color||"#ff3d03",-10)};
                        --primary-active: ${D(a.theme_color||"#ff3d03",-20)};
                    }
                `})}),t.jsx(ue,{store:a,customer:s,onOpenAuth:()=>b(!0),onOpenProfile:()=>x(!0),onOpenCart:()=>h(!0),onOpenInfo:()=>C(!0),cartCount:F}),!k&&u==="all"&&n.some(e=>e.products.some(r=>r.is_featured))&&t.jsx("section",{className:"max-w-7xl mx-auto px-4 md:px-8 py-8",children:t.jsxs("div",{className:"mb-10",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"h-12 w-12 rounded-2xl bg-gradient-to-br from-orange-500 to-red-500 text-white flex items-center justify-center rotate-3 shadow-xl",children:t.jsx(ye,{className:"h-6 w-6"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl md:text-3xl font-black text-gray-900 dark:text-white tracking-tight",children:"Destaques da Casa"}),t.jsx("p",{className:"text-[10px] md:text-xs font-bold text-orange-500 uppercase tracking-[0.2em] mt-1",children:"Os favoritos dos clientes"})]})]}),t.jsx("div",{className:"flex gap-4 overflow-x-auto scrollbar-hide -mx-4 px-4 pb-4 mt-6",children:n.flatMap(e=>e.products).filter(e=>e.is_featured).map(e=>t.jsxs("div",{onClick:()=>M(e),className:"min-w-[280px] md:min-w-[320px] bg-white dark:bg-premium-dark rounded-3xl p-4 shadow-lg hover:shadow-xl transition-shadow cursor-pointer group flex-shrink-0",children:[t.jsxs("div",{className:"relative h-48 rounded-2xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-white/5 dark:to-white/10 overflow-hidden mb-4",children:[e.image_url?t.jsx("img",{src:e.image_url,alt:e.name,className:"h-full w-full object-cover group-hover:scale-110 transition-transform duration-500"}):t.jsx("div",{className:"h-full w-full flex items-center justify-center text-6xl",children:"üçï"}),t.jsx("div",{className:"absolute top-3 left-3",children:t.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest shadow-xl shadow-orange-500/50 flex items-center gap-1",children:[t.jsx(ke,{className:"h-3 w-3 fill-current"})," Destaque"]})}),e.is_promotional&&t.jsx("div",{className:"absolute top-3 right-3",children:t.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wide shadow-lg",children:"PROMO"})})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white group-hover:text-orange-500 transition-colors line-clamp-1",children:e.name}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-2 mt-1 mb-3",children:e.description}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex flex-col",children:e.promotional_price&&e.promotional_price<e.price?t.jsxs(t.Fragment,{children:[t.jsxs("span",{className:"text-xs text-gray-400 line-through",children:["R$ ",Number(e.price).toFixed(2).replace(".",",")]}),t.jsxs("span",{className:"text-lg font-black text-green-500",children:["R$ ",Number(e.promotional_price).toFixed(2).replace(".",",")]})]}):t.jsxs("span",{className:"text-lg font-black text-gray-900 dark:text-white",children:["R$ ",Number(e.price).toFixed(2).replace(".",",")]})}),t.jsx("button",{className:"h-9 w-9 rounded-full bg-gradient-to-br from-orange-500 to-red-500 text-white flex items-center justify-center hover:scale-110 active:scale-95 transition-transform shadow-lg shadow-orange-500/30",onClick:r=>{r.stopPropagation(),M(e)},children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]})]},e.id))})]})}),t.jsx("header",{className:"sticky top-0 z-40 bg-white/80 dark:bg-premium-dark/80 backdrop-blur-md shadow-sm border-b border-gray-100 dark:border-white/5 transition-colors duration-300",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-4 flex items-center justify-center gap-6",children:[t.jsx("div",{className:"flex-1 max-w-2xl",children:t.jsxs("div",{className:"relative group",children:[t.jsx(Ne,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-black transition-colors"}),t.jsx("input",{type:"text",placeholder:"O que vamos pedir agora?",value:k,onChange:e=>V(e.target.value),className:"w-full bg-gray-50/50 dark:bg-white/5 border border-transparent rounded-xl py-2.5 pl-11 pr-4 focus:ring-0 focus:border-gray-200 dark:focus:border-white/10 focus:bg-white dark:focus:bg-white/10 transition-all outline-none font-medium text-sm text-gray-900 dark:text-white placeholder:text-gray-950 dark:placeholder:text-gray-400"})]})}),t.jsx("button",{onClick:G,"aria-label":j?"Ativar modo claro":"Ativar modo escuro",className:"h-10 w-10 rounded-xl bg-gray-100 dark:bg-white/10 flex items-center justify-center text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-white/20 active:scale-90 transition-all shrink-0",children:j?t.jsx(de,{className:"h-4 w-4"}):t.jsx(me,{className:"h-4 w-4"})})]})}),t.jsx(pe,{categories:n,activeCategory:u,onSelectCategory:K}),t.jsx("main",{children:t.jsx("div",{className:"flex flex-col md:flex-row max-w-7xl mx-auto items-start gap-6",children:t.jsx("div",{className:"flex-1 w-full",children:t.jsx(he,{categories:n.map(e=>({...e,products:e.products.filter(r=>r.name.toLowerCase().includes(k.toLowerCase())&&(u==="all"||e.id===u))})).filter(e=>e.products.length>0),onAdd:M,viewMode:a.menu_view_mode||"grid"})})})}),t.jsx(xe,{isOpen:N,onClose:()=>h(!1),cart:d,onUpdateQuantity:se,onEdit:Z,onRemove:ee,onCheckout:te}),t.jsx(fe,{isOpen:R,onClose:()=>C(!1),store:a}),_&&t.jsx(ge,{product:B,isOpen:_,onClose:()=>w(!1),onAddToCart:X,initialValues:U}),S&&t.jsx(we,{isOpen:S,onClose:()=>b(!1),onLogin:re,slug:l}),v&&t.jsx(be,{isOpen:v,onClose:()=>x(!1),customer:s,onLogout:oe,store:a}),H&&t.jsx(ve,{show:H,onClose:()=>I(!1),cart:d,customer:s,store:a,total:ae,addresses:J,onSuccess:()=>{p([]),I(!1)}}),s&&!N&&!v&&t.jsx("div",{className:"fixed top-4 right-4 z-40 hidden md:block",children:t.jsxs("button",{onClick:()=>x(!0),className:"bg-white px-4 py-2 rounded-full shadow-lg border border-gray-100 flex items-center gap-2 hover:bg-gray-50 transition-colors",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-xs uppercase",children:s.name.substring(0,2)}),t.jsx("span",{className:"font-bold text-gray-700 text-sm",children:s.name.split(" ")[0]})]})}),t.jsx(je,{customer:s,cartCount:F,onHome:()=>window.scrollTo({top:0,behavior:"smooth"}),onAccount:()=>{s?x(!0):b(!0)},onStore:()=>C(!0),onCart:()=>h(!0),activeTab:N?"cart":v||S?"account":R?"store":"home"})]})}export{At as default};
