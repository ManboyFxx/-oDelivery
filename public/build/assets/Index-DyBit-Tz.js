import{j as e,r as p,H as f,L as x}from"./app-C1W35bN8.js";import{M as u}from"./MotoboyLayout-DjbjZpTp.js";import{M as y}from"./MapComponent-B57rn0SY.js";import{N as g}from"./navigation-8PrCMy6g.js";import{C as v}from"./clock-BLHrFU4D.js";import{C as w}from"./circle-alert-CGnhb5bd.js";import{L as k}from"./LocationTracker-CBmzWiiS.js";import{M as i}from"./map-pin-DtfGHsKS.js";import{H as C}from"./history-DxsE8xsK.js";import"./layout-dashboard-HzB_uDvB.js";import"./package-DXwJ4FBX.js";import"./bell-CO-5OhK2.js";import"./user-CTYCMMBZ.js";import"./chevron-right-AkZ17gAD.js";import"./chevron-left-lEN6xuel.js";import"./log-out-fRNXPPjn.js";import"./menu-B3pffHkI.js";import"./use-resolve-button-type-R6zPIUWg.js";import"./keyboard-BK6vGCbM.js";import"./use-sync-refs-Bxzx7kHd.js";import"./portal-oEj3dqf0.js";import"./with-selector-Qxn-_NZa.js";import"./transition-BCMx7zz8.js";import"./menu-DKL8AiCC.js";function E({distanceKm:t,distanceFormatted:s,estimatedTimeMinutes:d,estimatedTimeFormatted:l,currentSpeed:r,arrived:a=!1,loading:n=!1}){return n?e.jsx("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3].map(o=>e.jsx("div",{className:"bg-gray-100 rounded-lg p-4 h-24 animate-pulse"},o))}):e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(g,{className:"w-5 h-5 text-blue-600"}),e.jsx("p",{className:"text-xs font-bold text-blue-600 uppercase",children:"Dist√¢ncia"})]}),e.jsx("p",{className:"text-2xl font-black text-blue-900",children:s||"‚Äî"}),t&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[t," km"]})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${a?"bg-green-50 border-green-200":"bg-orange-50 border-orange-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(v,{className:`w-5 h-5 ${a?"text-green-600":"text-orange-600"}`}),e.jsx("p",{className:`text-xs font-bold uppercase ${a?"text-green-600":"text-orange-600"}`,children:a?"Chegou!":"Tempo Est."})]}),e.jsx("p",{className:`text-2xl font-black ${a?"text-green-900":"text-orange-900"}`,children:l||"‚Äî"}),d&&e.jsxs("p",{className:`text-xs mt-1 ${a?"text-green-600":"text-orange-600"}`,children:[d," minutos"]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(w,{className:"w-5 h-5 text-purple-600"}),e.jsx("p",{className:"text-xs font-bold text-purple-600 uppercase",children:"Velocidade"})]}),e.jsx("p",{className:"text-2xl font-black text-purple-900",children:r!=null?`${(r*3.6).toFixed(1)} km/h`:"‚Äî"}),r&&e.jsxs("p",{className:"text-xs text-purple-600 mt-1",children:[(r*3.6).toFixed(1)," km/h"]})]})]})}function Y({currentLocation:t,currentDelivery:s,distanceToCustomer:d,distanceFormatted:l,estimatedTimeMinutes:r,estimatedTimeFormatted:a,googleMapsApiKey:n}){const[o,h]=p.useState(!1),[c,b]=p.useState(null),j=m=>{b(new Date().toLocaleTimeString("pt-BR"))},N=m=>{console.error("Rastreamento error:",m)};return e.jsxs(u,{children:[e.jsx(f,{title:"Localiza√ß√£o"}),e.jsx(k,{enabled:o,orderId:s?.id,interval:10,onLocationUpdate:j,onError:N}),e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900",children:"Localiza√ß√£o em Tempo Real"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Acompanhe sua posi√ß√£o e trajeto at√© o cliente"})]}),e.jsxs("button",{onClick:()=>h(!o),className:`px-6 py-3 rounded-lg font-bold transition-all flex items-center gap-2 ${o?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${o?"bg-red-500":"bg-green-500"} animate-pulse`}),o?"Parando...":"Iniciar Rastreamento"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n?e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx(y,{currentLocation:t?{lat:t.latitude,lng:t.longitude}:void 0,destinationLocation:s?{lat:s.latitude,lng:s.longitude}:void 0,zoom:s?16:15,apiKey:n,height:"500px",showTrajectory:!1})}):e.jsxs("div",{className:"bg-blue-50 rounded-2xl border border-blue-200 p-6 text-center",children:[e.jsx(i,{className:"w-12 h-12 text-blue-300 mx-auto mb-3"}),e.jsx("p",{className:"text-blue-700 font-medium",children:"Google Maps API n√£o configurada"}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"Configure a chave de API em .env"})]}),s&&e.jsx(E,{distanceKm:d,distanceFormatted:l,estimatedTimeMinutes:r,estimatedTimeFormatted:a,currentSpeed:t?.speed})]}),e.jsxs("div",{className:"space-y-4",children:[s?e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-2xl border-2 border-orange-200 p-6",children:[e.jsx("h3",{className:"text-lg font-black text-orange-900 mb-4",children:"Pedido em Entrega"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-600 font-bold uppercase text-xs",children:"Pedido"}),e.jsxs("p",{className:"text-orange-900 font-black text-lg",children:["#",s.order_number]})]}),e.jsxs("div",{className:"border-t border-orange-200 pt-3",children:[e.jsx("p",{className:"text-orange-600 font-bold uppercase text-xs",children:"Cliente"}),e.jsx("p",{className:"text-orange-900 font-bold",children:s.customer_name}),e.jsxs("a",{href:`tel:${s.customer_phone}`,className:"text-orange-600 hover:text-orange-700 font-semibold flex items-center gap-1 mt-1",children:["üìû ",s.customer_phone]})]}),e.jsxs("div",{className:"border-t border-orange-200 pt-3",children:[e.jsx("p",{className:"text-orange-600 font-bold uppercase text-xs",children:"Endere√ßo"}),e.jsx("p",{className:"text-orange-900 font-semibold line-clamp-2",children:s.destination_address})]}),l&&e.jsxs("div",{className:"border-t border-orange-200 pt-3",children:[e.jsx("p",{className:"text-orange-600 font-bold uppercase text-xs",children:"Dist√¢ncia"}),e.jsx("p",{className:"text-orange-900 font-black text-lg",children:l}),a&&e.jsxs("p",{className:"text-orange-700 text-xs mt-1",children:["‚è±Ô∏è ",a]})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(x,{href:route("motoboy.orders.show",s.id),className:"w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded-lg transition-colors block text-center",children:"Ver Detalhes"}),e.jsxs(x,{href:route("motoboy.location.tracking"),className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),"Rastreamento Avan√ßado"]})]})]}):e.jsxs("div",{className:"bg-gray-50 rounded-2xl border border-gray-200 p-6 text-center",children:[e.jsx(i,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Nenhum pedido em entrega"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Aceite um pedido para come√ßar a rastrear"}),e.jsx(x,{href:route("motoboy.orders.index"),className:"mt-4 inline-block px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg transition-colors",children:"Ver Pedidos"})]}),t&&e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-4",children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(i,{className:"w-4 h-4 text-blue-600"}),"Sua Localiza√ß√£o"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs font-bold",children:"COORDENADAS"}),e.jsxs("p",{className:"text-gray-900 font-mono text-xs font-bold",children:[t.latitude.toFixed(5),", ",t.longitude.toFixed(5)]})]}),t.accuracy&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs font-bold",children:"PRECIS√ÉO"}),e.jsxs("p",{className:"text-gray-900 font-semibold",children:["¬±",t.accuracy.toFixed(1)," m"]})]}),t.speed!==void 0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs font-bold",children:"VELOCIDADE"}),e.jsxs("p",{className:"text-gray-900 font-semibold",children:[(t.speed*3.6).toFixed(1)," km/h"]})]}),c&&e.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2",children:e.jsxs("p",{className:"text-gray-500 text-xs",children:["Atualizado: ",c]})})]})]}),e.jsxs(x,{href:route("motoboy.location.history"),className:"w-full bg-white hover:bg-gray-50 border border-gray-200 hover:border-gray-300 text-gray-800 font-bold py-3 px-4 rounded-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),"Ver Hist√≥rico"]})]})]})]})}export{Y as default};
