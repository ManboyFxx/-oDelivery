import{c as w,r as d,j as e,T as j,H as _,L as A,a as g}from"./app-Co-RcoKZ.js";import{A as T,S as $}from"./AuthenticatedLayout-UkKPeckM.js";import{C as N}from"./circle-check-big-G87-CjUU.js";import{K as b}from"./transition-BBCVaVDC.js";import{h as y}from"./Modal-BCYtFCag.js";import{S as F}from"./search-79t8SG9f.js";import{F as M}from"./funnel-DknwX9Z-.js";import{G as P}from"./globe-rkJaUcVo.js";import{W as L,a as v}from"./wifi-CoWVV0H8.js";import{S as z}from"./square-pen-Dazos5Li.js";import{E}from"./external-link-KAKCCCiv.js";import"./credit-card-BoiVNEpj.js";import"./shopping-bag-D_1QUoay.js";import"./trophy-Bbx6phls.js";import"./chart-column-PFKsOK6Q.js";import"./ticket-llffRvF2.js";import"./shield-check-DELk92qk.js";import"./truck-BGPNBEzK.js";import"./switch-Bmr5xUaU.js";import"./chevron-down-_RR5dG7V.js";import"./clock--ttMHVBI.js";import"./sparkles-D9YEV0eG.js";import"./arrow-right-DZfsJvjy.js";const O=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],B=w("ban",O);const D=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],G=w("shield-alert",D);function R({isOpen:x,onClose:m,onConfirm:p,title:f,description:a,type:o,fields:u=[],confirmText:h="Confirmar",cancelText:i="Cancelar",isLoading:c=!1}){const[n,t]=d.useState({}),r=s=>{s.preventDefault(),p(n)},k=()=>{switch(o){case"danger":return e.jsx(j,{className:"h-6 w-6 text-red-600"});case"warning":return e.jsx(G,{className:"h-6 w-6 text-orange-600"});case"success":return e.jsx(N,{className:"h-6 w-6 text-green-600"});default:return e.jsx(j,{className:"h-6 w-6 text-blue-600"})}},S=()=>{switch(o){case"danger":return"bg-red-50 text-red-900";case"warning":return"bg-orange-50 text-orange-900";case"success":return"bg-green-50 text-green-900";default:return"bg-blue-50 text-blue-900"}},C=()=>{switch(o){case"danger":return"bg-red-600 hover:bg-red-700 focus:ring-red-500";case"warning":return"bg-orange-600 hover:bg-orange-700 focus:ring-orange-500";case"success":return"bg-green-600 hover:bg-green-700 focus:ring-green-500";default:return"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}};return e.jsx(b.Root,{show:x,as:d.Fragment,children:e.jsxs(y,{as:"div",className:"relative z-50",onClose:m,children:[e.jsx(b.Child,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),e.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:e.jsx(b.Child,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:e.jsxs(y.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white dark:bg-[#1a1b1e] text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[e.jsx("div",{className:"bg-white dark:bg-[#1a1b1e] px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:`mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full sm:mx-0 sm:h-10 sm:w-10 ${S()}`,children:k()}),e.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full",children:[e.jsx(y.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900 dark:text-white",children:f}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a})}),u.length>0&&e.jsx("div",{className:"mt-4 space-y-4",children:u.map(s=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s.label}),s.type==="select"?e.jsxs("select",{className:"w-full rounded-md border-gray-300 dark:border-white/10 dark:bg-white/5 py-2 pl-3 pr-10 text-base focus:border-[#ff3d03] focus:outline-none focus:ring-[#ff3d03] sm:text-sm text-gray-900 dark:text-white",onChange:l=>t({...n,[s.name]:l.target.value}),value:n[s.name]||"",children:[e.jsx("option",{value:"",children:"Selecione..."}),s.options?.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]}):s.type==="textarea"?e.jsx("textarea",{className:"w-full rounded-md border-gray-300 dark:border-white/10 dark:bg-white/5 py-2 px-3 text-base focus:border-[#ff3d03] focus:outline-none focus:ring-[#ff3d03] sm:text-sm text-gray-900 dark:text-white",rows:3,placeholder:s.placeholder,onChange:l=>t({...n,[s.name]:l.target.value}),value:n[s.name]||""}):e.jsx("input",{type:"text",className:"w-full rounded-md border-gray-300 dark:border-white/10 dark:bg-white/5 py-2 px-3 text-base focus:border-[#ff3d03] focus:outline-none focus:ring-[#ff3d03] sm:text-sm text-gray-900 dark:text-white",placeholder:s.placeholder,onChange:l=>t({...n,[s.name]:l.target.value}),value:n[s.name]||""})]},s.name))})]})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[e.jsx("button",{type:"button",className:`inline-flex w-full justify-center rounded-md px-3 py-2 text-sm font-semibold text-white shadow-sm sm:ml-3 sm:w-auto ${C()} disabled:opacity-50`,onClick:r,disabled:c,children:c?"Processando...":h}),e.jsx("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white dark:bg-transparent px-3 py-2 text-sm font-semibold text-gray-900 dark:text-gray-300 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-white/10 hover:bg-gray-50 dark:hover:bg-white/5 sm:mt-0 sm:w-auto",onClick:m,disabled:c,children:i})]})]})})})})]})})}function xe({tenants:x,filters:m}){const[p,f]=d.useState(m.search||""),[a,o]=d.useState({isOpen:!1,type:null,tenant:null}),u=t=>{t.preventDefault(),g.get(route("admin.tenants.index"),{search:p},{preserveState:!0})},h=(t,r)=>{o({isOpen:!0,type:t,tenant:r})},i=()=>{o({isOpen:!1,type:null,tenant:null})},c=t=>{a.tenant&&(a.type==="suspend"?g.post(route("admin.tenants.suspend",a.tenant.id),{reason:t.reason||null},{onSuccess:i}):a.type==="restore"?g.post(route("admin.tenants.restore",a.tenant.id),{},{onSuccess:i}):a.type==="plan"&&g.put(route("admin.tenants.update-plan",a.tenant.id),{plan:t.plan},{onSuccess:i}))},n=t=>!t.whats_app_instances||t.whats_app_instances.length===0?{status:"none",label:"Sem Instância",color:"text-gray-400"}:t.whats_app_instances[0].status==="connected"?{status:"connected",label:"Conectado",color:"text-green-600"}:{status:"disconnected",label:"Desconectado",color:"text-red-600"};return e.jsxs(T,{children:[e.jsx(_,{title:"Gerenciar Lojas"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"px-2 py-0.5 rounded-md bg-[#ff3d03]/10 text-[#ff3d03] text-[10px] font-bold uppercase tracking-wider",children:"Administração"})}),e.jsx("h2",{className:"text-3xl font-black text-gray-900 dark:text-white tracking-tight",children:"Gerenciar Lojas"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:"Visualize e gerencie todos os tenants da plataforma"})]}),e.jsx("div",{className:"flex gap-3"})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[24px] p-4 shadow-sm border border-gray-100 dark:border-white/5 flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsxs("form",{onSubmit:u,className:"relative w-full md:w-96",children:[e.jsx(F,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:p,onChange:t=>f(t.target.value),placeholder:"Buscar por nome, link ou email...",className:"w-full pl-10 pr-4 py-3 rounded-xl bg-gray-50 dark:bg-white/5 border-transparent focus:border-[#ff3d03]/30 focus:ring focus:ring-[#ff3d03]/10 text-sm font-bold transition-all"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2.5 bg-gray-50 dark:bg-white/5 hover:bg-gray-100 dark:hover:bg-white/10 rounded-xl text-xs font-bold text-gray-600 dark:text-gray-300 transition-colors",children:[e.jsx(M,{className:"h-4 w-4"}),"Status: Todos"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[32px] border border-gray-100 dark:border-white/5 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-white/[0.02]",children:[e.jsx("th",{className:"text-left py-5 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Loja"}),e.jsx("th",{className:"text-left py-5 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Contato"}),e.jsx("th",{className:"text-left py-5 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Plano"}),e.jsx("th",{className:"text-left py-5 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-5 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"WhatsApp"}),e.jsx("th",{className:"text-right py-5 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-white/5",children:x.data.map(t=>e.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"py-5 px-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-[#ff3d03]/10 text-[#ff3d03] flex items-center justify-center font-black text-lg",children:t.name.substring(0,1).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-base",children:t.name}),e.jsxs("a",{href:`/${t.slug}/menu`,target:"_blank",className:"flex items-center gap-1 text-xs text-gray-500 hover:text-[#ff3d03] transition-colors",children:[e.jsx(P,{className:"h-3 w-3"}),"/",t.slug]})]})]})}),e.jsx("td",{className:"py-5 px-6",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-bold text-gray-700 dark:text-gray-300",children:t.email}),e.jsx("p",{className:"text-gray-500 text-xs",children:t.phone})]})}),e.jsx("td",{className:"py-5 px-6",children:e.jsx("span",{className:"px-3 py-1 rounded-lg bg-blue-50 text-blue-700 dark:bg-blue-500/10 dark:text-blue-400 text-xs font-bold uppercase tracking-wide",children:t.plan})}),e.jsx("td",{className:"py-5 px-6",children:t.is_active?e.jsxs("span",{className:"px-3 py-1.5 rounded-lg bg-green-50 text-green-700 dark:bg-green-500/10 dark:text-green-400 text-xs font-bold flex items-center gap-1.5 w-fit",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-green-500"}),"Ativo"]}):e.jsxs("span",{className:"px-3 py-1.5 rounded-lg bg-red-50 text-red-700 dark:bg-red-500/10 dark:text-red-400 text-xs font-bold flex items-center gap-1.5 w-fit",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-red-500"}),"Suspenso"]})}),e.jsx("td",{className:"py-5 px-6",children:e.jsx("div",{className:"flex items-center gap-2",children:(()=>{const r=n(t);return e.jsxs("div",{className:"flex items-center gap-1.5 text-xs",children:[r.status==="connected"?e.jsx(L,{className:`h-3.5 w-3.5 ${r.color}`}):r.status==="disconnected"?e.jsx(v,{className:`h-3.5 w-3.5 ${r.color}`}):e.jsx(v,{className:`h-3.5 w-3.5 ${r.color}`}),e.jsx("span",{className:`font-medium ${r.color}`,children:r.label})]})})()})}),e.jsx("td",{className:"py-5 px-6 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>h("plan",t),className:"p-2 rounded-xl hover:bg-blue-50 text-gray-400 hover:text-blue-600 transition-colors",title:"Editar Plano",children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>h(t.is_active?"suspend":"restore",t),className:`p-2 rounded-xl transition-colors ${t.is_active?"hover:bg-red-50 text-gray-400 hover:text-red-600":"hover:bg-green-50 text-gray-400 hover:text-green-600"}`,title:t.is_active?"Suspender Loja":"Reativar Loja",children:t.is_active?e.jsx(B,{className:"h-4 w-4"}):e.jsx(N,{className:"h-4 w-4"})}),e.jsx(A,{href:route("admin.tenants.metrics",t.id),className:"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-white/10 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",title:"Ver Métricas",children:e.jsx(E,{className:"h-4 w-4"})})]})})]},t.id))})]})}),x.data.length===0&&e.jsxs("div",{className:"p-12 text-center text-gray-500",children:[e.jsx($,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"font-bold",children:"Nenhuma loja encontrada."})]})]}),e.jsx(R,{isOpen:a.isOpen,onClose:i,onConfirm:c,title:a.type==="suspend"?"Suspender Loja":a.type==="restore"?"Reativar Loja":"Alterar Plano",description:a.type==="suspend"?`Tem certeza que deseja suspender "${a.tenant?.name}"? A loja ficará inacessível até ser reativada.`:a.type==="restore"?`Tem certeza que deseja reativar "${a.tenant?.name}"?`:`Selecione o novo plano para "${a.tenant?.name}":`,type:a.type==="suspend"?"danger":a.type==="restore"?"success":"info",fields:a.type==="suspend"?[{name:"reason",label:"Motivo da Suspensão (Opcional)",type:"textarea",placeholder:"Ex: Pagamento em atraso, violação de termos..."}]:a.type==="plan"?[{name:"plan",label:"Plano",type:"select",required:!0,options:[{label:"Gratuito",value:"free"},{label:"Básico",value:"basic"},{label:"Pro",value:"pro"},{label:"Trial",value:"trial"},{label:"Enterprise",value:"enterprise"}]}]:[],confirmText:a.type==="suspend"?"Suspender":a.type==="restore"?"Reativar":"Atualizar Plano"})]})]})}export{xe as default};
