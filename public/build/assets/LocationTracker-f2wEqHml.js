import{r as s,d as h}from"./app-BeiTK8O7.js";function S({orderId:w,enabled:l=!0,interval:u=10,onLocationUpdate:c,onError:g}){const i=s.useRef(null),d=s.useRef(0);s.useEffect(()=>{if(!l||!navigator.geolocation){navigator.geolocation||g?.("Geolocalização não disponível neste navegador");return}p();const t={enableHighAccuracy:!0,timeout:3e4,maximumAge:0};return i.current=navigator.geolocation.watchPosition(o=>{const{latitude:e,longitude:a,accuracy:r,speed:n,heading:m}=o.coords,v=Date.now();v-d.current>=u*1e3&&(f({latitude:e,longitude:a,accuracy:r,speed:n,heading:m}),d.current=v),c?.({latitude:e,longitude:a,accuracy:r,speed:n,heading:m,timestamp:new Date().toISOString()})},o=>{console.warn("Geolocation warning: Motoboy denied or GPS unavailable.",o.message)},t),()=>{i.current!==null&&navigator.geolocation.clearWatch(i.current)}},[l,u,c,g]);const p=async()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{const{latitude:o,longitude:e,accuracy:a,speed:r,heading:n}=t.coords;f({latitude:o,longitude:e,accuracy:a,speed:r,heading:n}),c?.({latitude:o,longitude:e,accuracy:a,speed:r,heading:n,timestamp:new Date().toISOString()})},t=>{console.error("Erro ao obter localização:",t)})},f=async t=>{try{await h.post(route("api.motoboy.location.store"),{...t,order_id:w||null})}catch(o){console.error("Erro ao salvar localização:",o)}};return null}export{S as L};
