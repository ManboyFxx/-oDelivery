import{j as e,L as c,r as n,a as x,H as v}from"./app-Bh9R34ZO.js";import{A as N,S as w}from"./AuthenticatedLayout-D9q3-Okj.js";import{P as k}from"./plus-BnzcbKPU.js";import{S}from"./search-CcoCB8bW.js";import{P as _}from"./package-DwZAaaKq.js";import{S as T}from"./shopping-cart-DyUIaNz7.js";import{S as P}from"./shield-EoSHvFv-.js";import{C}from"./clock-BazatonD.js";import"./shopping-bag-CWTZwspu.js";import"./menu-DgjMbpNy.js";import"./use-resolve-button-type-BBJOE8Rw.js";import"./keyboard-BiCSg4Of.js";import"./use-sync-refs-B_p-Iyz4.js";import"./portal-BHWBglhE.js";import"./with-selector-CmbsVBJE.js";import"./transition-DzHQOXHN.js";import"./credit-card-D2VfEDVY.js";import"./trophy-Bt3XnscG.js";import"./chart-column-2Uko60HO.js";import"./ticket-CtW85ApK.js";import"./shield-check-fvXKv-L4.js";import"./log-out-CXfWQqAQ.js";import"./Modal-BHnUrnJl.js";import"./hidden-DThcXkGa.js";import"./truck-CfoRzLyA.js";import"./switch-DVYTFmpu.js";import"./chevron-down-DHgnv5rh.js";import"./sparkles-8cRFo6sA.js";import"./arrow-right-Clp6G8C6.js";function E({links:a}){return!a||a.length<=3?null:e.jsx("div",{className:"flex items-center justify-center gap-1",children:a.map((s,l)=>s.url?s.active?e.jsx("span",{className:"px-4 py-2 text-sm font-bold bg-[#ff3d03] text-white rounded-lg",dangerouslySetInnerHTML:{__html:s.label}},l):e.jsx(c,{href:s.url,className:"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg transition-colors",dangerouslySetInnerHTML:{__html:s.label},preserveScroll:!0},l):e.jsx("span",{className:"px-3 py-2 text-sm text-gray-400 cursor-not-allowed",dangerouslySetInnerHTML:{__html:s.label}},l))})}function ie({tenants:a,filters:s,plans:l}){const[d,m]=n.useState(s.search||""),[i,g]=n.useState(s.status||"all"),[o,h]=n.useState(s.plan||"all"),[L,u]=n.useState(null);n.useEffect(()=>{const t=setTimeout(()=>{d!==(s.search||"")&&x.get(route("admin.tenants.index"),{search:d,status:i!=="all"?i:void 0,plan:o!=="all"?o:void 0},{preserveState:!0,preserveScroll:!0,replace:!0})},300);return()=>clearTimeout(t)},[d]);const p=(t,r)=>{t==="status"&&g(r),t==="plan"&&h(r),x.get(route("admin.tenants.index"),{search:d,status:t==="status"&&r!=="all"?r:i!=="all"?i:void 0,plan:t==="plan"&&r!=="all"?r:o!=="all"?o:void 0},{preserveState:!0,preserveScroll:!0})},f=(t,r)=>{confirm(`Estender trial por ${r} dias?`)&&x.post(route("admin.tenants.extend-trial",t),{days:r},{onSuccess:()=>u(null)})},b=t=>{const r={free:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",pro:"bg-gradient-to-r from-[#ff3d03] to-[#e63700] text-white",custom:"bg-gradient-to-r from-purple-500 to-purple-700 text-white"};return r[t]||r.free},j=t=>{if(!t.is_trial_active)return null;const r=t.trial_days_remaining,y=r<=3;return e.jsxs("span",{className:`px-2.5 py-1 rounded-lg text-xs font-bold flex items-center gap-1 ${y?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400":"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400"}`,children:[e.jsx(C,{className:"h-3 w-3"}),"Trial: ",r,"d restantes"]})};return e.jsxs(N,{children:[e.jsx(v,{title:"Gerenciar Lojas"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-gray-900 dark:text-white tracking-tight",children:"Gerenciar Lojas"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:[a.meta?.total||0," lojas cadastradas"]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(c,{href:route("admin.tenants.create"),className:"flex items-center gap-2 px-6 py-3 bg-[#ff3d03] hover:bg-[#ff3d03]/90 text-white rounded-xl font-bold text-sm shadow-lg shadow-[#ff3d03]/20 transition-all transform hover:scale-105",children:[e.jsx(k,{className:"h-4 w-4"}),"Nova Loja"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] p-4 rounded-[24px] border border-gray-100 dark:border-white/5 shadow-sm flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 w-full",children:[e.jsx(S,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, domínio ou email...",value:d,onChange:t=>m(t.target.value),className:"w-full pl-9 pr-4 py-2.5 rounded-xl bg-gray-50 dark:bg-white/5 border-transparent focus:border-[#ff3d03] focus:ring-[#ff3d03] text-sm"})]}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto overflow-x-auto pb-2 md:pb-0",children:[e.jsxs("select",{value:i,onChange:t=>p("status",t.target.value),className:"px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-white/5 border-transparent focus:border-[#ff3d03] focus:ring-[#ff3d03] text-sm font-medium min-w-[140px]",children:[e.jsx("option",{value:"all",children:"Todos Status"}),e.jsx("option",{value:"active",children:"Ativos"}),e.jsx("option",{value:"suspended",children:"Suspensos"}),e.jsx("option",{value:"trial",children:"Em Trial"}),e.jsx("option",{value:"inactive",children:"Inativos"})]}),e.jsxs("select",{value:o,onChange:t=>p("plan",t.target.value),className:"px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-white/5 border-transparent focus:border-[#ff3d03] focus:ring-[#ff3d03] text-sm font-medium min-w-[140px]",children:[e.jsx("option",{value:"all",children:"Todos Planos"}),l&&l.map(t=>e.jsx("option",{value:t.plan,children:t.display_name},t.plan))]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[32px] border border-gray-100 dark:border-white/5 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50/50 dark:bg-white/5 border-b border-gray-100 dark:border-white/5",children:[e.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Loja"}),e.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Plano"}),e.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Uso"}),e.jsx("th",{className:"text-right py-4 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Ações"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-white/5",children:[a.data.map(t=>e.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-[#ff3d03] to-[#e63700] flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-[#ff3d03]/20",children:t.slug.substring(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx(c,{href:route("admin.tenants.edit",t.id),className:"font-bold text-gray-900 dark:text-white hover:text-[#ff3d03] transition-colors",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mt-0.5",children:[e.jsx("span",{children:t.email}),e.jsx("span",{children:"•"}),e.jsxs("a",{href:`http://${t.slug}.oodelivery.com.br`,target:"_blank",rel:"noreferrer",className:"hover:underline hover:text-[#ff3d03]",children:[t.slug,".oodelivery.com.br"]})]})]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`px-2.5 py-1 rounded-lg text-xs font-bold w-fit ${b(t.plan)}`,children:t.plan.toUpperCase()}),t.is_trial_active&&j(t)]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("span",{className:`px-2.5 py-1 rounded-lg text-xs font-bold flex items-center gap-1.5 w-fit ${t.is_suspended?"bg-red-50 text-red-600 dark:bg-red-500/10 dark:text-red-400":t.is_active?"bg-green-50 text-green-600 dark:bg-green-500/10 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-white/10 dark:text-gray-400"}`,children:[e.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${t.is_suspended?"bg-red-500":t.is_active?"bg-green-500":"bg-gray-500"}`}),t.is_suspended?"Suspenso":t.is_active?"Ativo":"Inativo"]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("span",{className:"text-gray-500 flex items-center gap-1",children:[e.jsx(_,{className:"h-3 w-3"})," Prod."]}),e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:[t.usage.products,e.jsxs("span",{className:"text-gray-400 font-normal",children:[" / ",t.limits.products||"∞"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("span",{className:"text-gray-500 flex items-center gap-1",children:[e.jsx(T,{className:"h-3 w-3"})," Ped."]}),e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:t.usage.orders})]})]})}),e.jsx("td",{className:"py-4 px-6 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.is_trial_active&&e.jsx("button",{onClick:()=>f(t.id,7),className:"px-2 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded text-[10px] font-bold transition-colors",title:"Estender +7 dias",children:"+7d"}),e.jsx(c,{href:route("admin.tenants.edit",t.id),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-white/10 text-gray-400 hover:text-[#ff3d03] transition-colors",title:"Editar",children:e.jsx(P,{className:"h-4 w-4"})})]})})]},t.id)),a.data.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"py-12 text-center text-gray-500",children:[e.jsx(w,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"font-medium",children:"Nenhuma loja encontrada"}),e.jsx("p",{className:"text-xs mt-1",children:"Tente ajustar os filtros de busca"})]})})]})]})}),e.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-white/5",children:e.jsx(E,{links:a.links})})]})]})]})}export{ie as default};
