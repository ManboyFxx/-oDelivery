import{r as a,j as e,f as Re,d as D,X as q,e as x}from"./app-ntdTxgOy.js";import{M as Te}from"./Modal-BQGxMqkX.js";import{S as Ve}from"./sparkles-BncnBWFM.js";import{G as K}from"./gift-BLnvqTiJ.js";import ze from"./AddressForm-CpfTzYap.js";import{t as L}from"./index-DewVx1FX.js";import{A as qe}from"./arrow-left-Cj6NRz14.js";import{C as be}from"./circle-check-big--5CXPtRb.js";import{M as B}from"./map-pin-Vvxz9RhE.js";import{W as H}from"./wallet-0pdfnIqU.js";import{L as J}from"./loader-circle-ea4WoloX.js";import{T as Le}from"./ticket-AlH-4h02.js";import{C as ye}from"./credit-card-Dwib51Ix.js";import{B as Be}from"./banknote-2CDjb9fz.js";import{C as Oe}from"./chevron-right-D9UwuC25.js";import{t as Ze}from"./switch-vHB9fxmw.js";import"./keyboard-DRMfDIvJ.js";import"./use-sync-refs-Dc50QNpL.js";import"./portal-3LWpQXte.js";import"./with-selector-9VIjIqJH.js";import"./hidden-DW5r8TlX.js";import"./transition-BwYjvS6O.js";import"./TextInput-Bif_IK_b.js";import"./InputLabel-r0t_v9P3.js";import"./PrimaryButton-C9Wkxoix.js";import"./SecondaryButton-BUe8MGz7.js";import"./search-lAJhAM70.js";import"./use-resolve-button-type-BmhzpvpH.js";function Ye({points:f,show:b,onComplete:k}){return a.useEffect(()=>{if(b){const o=setTimeout(k,3500);return()=>clearTimeout(o)}},[b,k]),b?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/30 animate-fade-in pointer-events-auto"}),e.jsx("style",{children:`
                @keyframes celebrationBounce {
                    0% {
                        transform: scale(0.5) translateY(20px);
                        opacity: 0;
                    }
                    50% {
                        transform: scale(1.05) rotate(5deg);
                    }
                    100% {
                        transform: scale(1) translateY(0);
                        opacity: 1;
                    }
                }

                @keyframes spin-slowly {
                    0%, 100% { transform: rotate(0deg); }
                    50% { transform: rotate(10deg) scaleY(1.1); }
                }

                @keyframes pulse-glow {
                    0%, 100% { box-shadow: 0 0 20px rgba(255, 61, 3, 0.5); }
                    50% { box-shadow: 0 0 40px rgba(255, 61, 3, 0.8); }
                }

                @keyframes float-up {
                    0% {
                        opacity: 1;
                        transform: translateY(0);
                    }
                    100% {
                        opacity: 0;
                        transform: translateY(-100px);
                    }
                }

                .celebration-card {
                    animation: celebrationBounce 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
                }

                .celebration-icon {
                    animation: spin-slowly 2s ease-in-out infinite;
                }

                .celebration-glow {
                    animation: pulse-glow 1.5s ease-in-out infinite;
                }

                .floating-points {
                    animation: float-up 2s ease-out forwards;
                }
            `}),e.jsx("div",{className:"celebration-card relative z-10",children:e.jsxs("div",{className:"bg-gradient-to-br from-orange-400 via-orange-500 to-pink-500 rounded-3xl p-8 shadow-2xl celebration-glow text-center max-w-sm w-full",children:[e.jsx("div",{className:"absolute inset-0 rounded-3xl overflow-hidden",children:[...Array(6)].map((o,l)=>e.jsx(Ve,{className:"absolute h-6 w-6 text-white/40",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animation:`float-up ${2+Math.random()*1}s ease-out forwards`,animationDelay:`${l*.2}s`}},l))}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"celebration-icon mb-4",children:e.jsx(K,{className:"h-16 w-16 mx-auto text-white drop-shadow-lg"})}),e.jsx("h2",{className:"text-3xl md:text-4xl font-black text-white mb-2 drop-shadow-lg",children:"Parab√©ns!"}),e.jsxs("div",{className:"text-white",children:[e.jsxs("p",{className:"text-5xl font-black mb-2 drop-shadow-lg",children:["+",f]}),e.jsx("p",{className:"text-lg font-bold drop-shadow-lg",children:"pontos!"})]}),e.jsx("p",{className:"text-white/90 text-sm mt-3 drop-shadow-lg",children:"Voc√™ est√° acumulando pr√™mios üéâ"})]})]})}),[...Array(8)].map((o,l)=>e.jsx("div",{className:"absolute floating-points pointer-events-none",style:{left:`calc(50% + ${(l-4)*30}px)`,top:"50%",animationDelay:`${l*.1}s`},children:e.jsxs("span",{className:"text-2xl font-black text-orange-500",children:["+",Math.floor(f/4)]})},l))]}):null}function kt({show:f,onClose:b,cart:k,store:o,customer:l,total:ve,addresses:O,onSuccess:Ue}){const[n,F]=a.useState("delivery"),[s,Q]=a.useState("delivery"),[m,Z]=a.useState(O),[i,I]=a.useState(""),[_,S]=a.useState(!1),[y,je]=a.useState("credit_card"),[$,we]=a.useState(""),[v,j]=a.useState(!1),[ee,u]=a.useState(""),[ke,te]=a.useState(!1),[Ne,Ce]=a.useState(0),[R,re]=a.useState(""),[h,ae]=a.useState(null),[se,T]=a.useState(""),[_e,oe]=a.useState(!1),[N,Se]=a.useState(!1),[Pe,ne]=a.useState(0),[ie,de]=a.useState(0),[le,Y]=a.useState(!1),[U,Ae]=a.useState(""),[p,C]=a.useState(null),[ce,We]=a.useState(!1),[xe,P]=a.useState(null),[me,A]=a.useState(""),[w,Ee]=a.useState([]),[E,W]=a.useState(""),{success:V}=Re();a.useEffect(()=>{Z(O)},[O]),a.useEffect(()=>{if(f&&m.length>0&&!i){const t=m.find(r=>r.is_default);I(t?t.id:m[0].id)}f&&s==="delivery"&&m.length===0&&!_&&S(!0)},[f,m,s,_]),a.useEffect(()=>{const t=o?.settings?.tenant_id;t&&D.get(`/api/delivery-zones?tenant_id=${t}`).then(r=>Ee(r.data)).catch(()=>{})},[o?.settings?.tenant_id]),a.useEffect(()=>{if(s!=="delivery"||!i){C(!0),P(null),A("");return}const t=m.find(d=>d.id===i);if(!t)return;if(W(""),w.length===0){C(!0),P(null),A("");return}const r=t.neighborhood,c=w.find(d=>d.neighborhood.toLowerCase()===r.toLowerCase());c?(C(!0),P(Number(c.delivery_fee)),A("")):(C(!1),P(null),A("N√£o entregamos neste bairro. Selecione um bairro atendido abaixo."))},[i,s,m,w]),s!=="delivery"||E||m.find(r=>r.id===i)?.neighborhood;const ge=s==="delivery"&&p!==!1?xe!==null?xe:o.settings?.delivery_fee||5:0,G=(h&&h.discount_amount||0)+ie,M=ve,X=Math.max(0,M+ge-G),ue=a.useMemo(()=>!o?.loyalty_enabled||!o?.settings?.points_per_currency?0:Math.ceil(M*o.settings.points_per_currency),[M,o]),g=t=>`R$ ${t.toFixed(2).replace(".",",")}`,Me=async()=>{if(n==="delivery"){if(s==="delivery"&&!i){u("Selecione um endere√ßo para entrega.");return}if(s==="delivery"&&E){const t=m.find(r=>r.id===i);if(t)try{j(!0);const r=await D.put(`/customer/addresses/${i}`,{...t,neighborhood:E});Z(c=>c.map(d=>d.id===i?r.data.address:d)),W(""),C(!0)}catch(r){console.error("Error updating address neighborhood:",r),L.error("Erro ao atualizar bairro do endere√ßo. Tente novamente."),j(!1);return}finally{j(!1)}}if(s==="delivery"&&p===!1){u("Selecione um bairro atendido para continuar.");return}u(""),F("payment")}else if(n==="payment"){if(y==="cash"&&$&&parseFloat($.replace(",","."))<X){u("O valor do troco deve ser maior que o total.");return}u(""),F("review")}},he=()=>{n==="review"?F("payment"):n==="payment"&&F("delivery")},pe=async()=>{if(!o.is_open){u("A loja est√° fechada no momento. N√£o √© poss√≠vel concluir o pedido.");return}j(!0),u("");try{const t={tenant_id:o.settings.tenant_id,customer_id:l.id,mode:s,address_id:s==="delivery"?i:null,payment_method:y,change_for:y==="cash"?parseFloat($.replace(",",".")):null,coupon_id:h?.id||null,loyalty_points_used:N?Pe:0,items:k.map(z=>({product_id:z.product.id,quantity:z.quantity,notes:z.notes,complements:z.selectedComplements.map(fe=>({id:fe.optionId||fe.id,quantity:1}))}))},r=await D.post("/customer/checkout",t),d=`/${window.location.pathname.split("/")[1]}/orders/${r.data.order_id}`;r.data.loyalty_points_earned>0?(Ce(r.data.loyalty_points_earned),te(!0),setTimeout(()=>{V("Pedido Realizado!","Redirecionando para acompanhamento..."),window.location.href=d},3500)):(V("Pedido Realizado!","Redirecionando para acompanhamento..."),setTimeout(()=>{window.location.href=d},1500))}catch(t){console.error(t),t.response?.status===403&&t.response?.data?.requires_identity_verification?(Y(!0),L.warning("Confirme sua identidade para continuar.")):u(t.response?.data?.message||"Erro ao processar pedido.")}finally{j(!1)}},De=async t=>{t.preventDefault(),j(!0);try{let r=localStorage.getItem("device_fingerprint");r||(r="device-"+Math.random().toString(36).substring(2)+Date.now().toString(36),localStorage.setItem("device_fingerprint",r)),(await D.post("/customer/quick-login",{phone_last_4:U,customer_id:l.id,device_fingerprint:r})).data.success&&(L.success("Identidade confirmada!"),Y(!1),pe())}catch(r){console.error(r),L.error(r.response?.data?.message||"D√≠gitos incorretos.")}finally{j(!1)}},Fe=async()=>{if(R.trim()){oe(!0),T("");try{const t=await D.post("/api/validate-coupon",{code:R,cart_total:M,tenant_id:o.tenant_id||window.location.pathname.split("/")[1]});t.data.valid?(ae({...t.data.coupon,discount_amount:t.data.discount}),V("Cupom Aplicado!",t.data.message),re("")):T(t.data.message||"Cupom inv√°lido")}catch(t){T(t.response?.data?.message||"Erro ao validar cupom")}finally{oe(!1)}}},Ie=t=>{Z(r=>[...r,t]),I(t.id),S(!1)},$e=()=>e.jsxs("div",{className:"flex justify-between items-center mb-6 px-2",children:[[{id:"delivery",label:"Entrega",icon:B},{id:"payment",label:"Pagamento",icon:H},{id:"review",label:"Confirma√ß√£o",icon:be}].map((t,r)=>{const c=t.id===n,d=n==="payment"&&r===0||n==="review"&&r<=1;return e.jsxs("div",{className:"flex flex-col items-center relative z-10",children:[e.jsx("div",{className:x("w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 border-2",c?"bg-primary border-primary text-white shadow-lg scale-110":d?"bg-green-500 border-green-500 text-white":"bg-white dark:bg-premium-card border-gray-300 dark:border-gray-700 text-gray-400 dark:text-gray-500"),children:e.jsx(t.icon,{className:"w-5 h-5"})}),e.jsx("span",{className:x("text-xs font-semibold mt-2 transition-colors duration-300",c?"text-primary":d?"text-green-600 dark:text-green-400":"text-gray-400 dark:text-gray-500"),children:t.label})]},t.id)}),e.jsx("div",{className:"absolute top-[4.5rem] left-10 right-10 h-0.5 bg-gray-200 dark:bg-gray-700 -z-0 transition-colors duration-300"}),e.jsx("div",{className:x("absolute top-[4.5rem] left-10 h-0.5 bg-green-500 transition-all duration-300 -z-0",n==="delivery"?"w-0":n==="payment"?"w-1/2":"w-[calc(100%-5rem)]")})]});return e.jsxs(Te,{show:f,onClose:b,maxWidth:"md",children:[e.jsx(Ye,{points:Ne,show:ke,onComplete:()=>te(!1)}),e.jsxs("div",{className:"p-6 min-h-[500px] flex flex-col bg-white dark:bg-premium-dark transition-colors duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n!=="delivery"?e.jsx("button",{onClick:he,className:"p-1 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full transition-colors duration-300",children:e.jsx(qe,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})}):e.jsx("div",{}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white transition-colors duration-300",children:le?"Confirma√ß√£o de Seguran√ßa":e.jsxs(e.Fragment,{children:[n==="delivery"&&"Entrega ou Retirada",n==="payment"&&"Pagamento",n==="review"&&"Resumo do Pedido"]})}),e.jsx("button",{onClick:b,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-300",children:e.jsx(q,{className:"h-6 w-6"})})]}),le?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 dark:bg-orange-900/20 rounded-full flex items-center justify-center mb-4 transition-colors duration-300",children:e.jsx(be,{className:"w-8 h-8 text-[#ff3d03]"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 text-center transition-colors duration-300",children:"Protegendo sua conta"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-center text-sm mb-6 transition-colors duration-300",children:["Para continuar, confirme os ",e.jsx("strong",{children:"4 √∫ltimos d√≠gitos"})," do seu telefone."]}),e.jsxs("form",{onSubmit:De,className:"w-full max-w-xs space-y-4",children:[e.jsx("input",{type:"text",value:U,onChange:t=>Ae(t.target.value.replace(/\D/g,"").slice(0,4)),placeholder:"0000",className:"w-full text-center text-2xl font-bold tracking-widest py-3 border-2 border-gray-200 dark:border-gray-700 dark:bg-white/5 dark:text-white rounded-xl focus:border-primary dark:focus:border-primary focus:ring-0 outline-none transition-all duration-300",autoFocus:!0}),e.jsx("button",{type:"submit",disabled:v||U.length<4,className:"w-full bg-primary hover:bg-primary-600 text-white font-bold py-3 rounded-xl transition-colors disabled:opacity-50",children:v?"Verificando...":"Confirmar"}),e.jsx("button",{type:"button",onClick:()=>Y(!1),className:"w-full text-gray-400 dark:text-gray-500 font-medium text-sm hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-300",children:"Cancelar"})]})]}):e.jsxs(e.Fragment,{children:[!_&&$e(),e.jsxs("div",{className:"flex-1 overflow-y-auto max-h-[60vh] px-1 py-1",children:[ee&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-3 rounded-lg mb-4 text-sm font-medium flex items-center gap-2 transition-colors duration-300",children:[e.jsx(q,{className:"w-4 h-4"})," ",ee]}),_?e.jsx(ze,{onCancel:()=>S(!1),onSuccess:Ie,tenantId:o.settings.tenant_id,customerId:l.id,preloadedZones:w,store:o}):e.jsxs(e.Fragment,{children:[n==="delivery"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>Q("delivery"),className:x("p-4 rounded-xl border-2 font-bold transition-all flex flex-col items-center gap-2 duration-300",s==="delivery"?"border-[#ff3d03] bg-[#ff3d03]/5 text-[#ff3d03] shadow-md shadow-orange-500/10":"border-gray-200 dark:border-gray-700 dark:bg-white/5 text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600 bg-white"),children:[e.jsx(B,{className:"w-6 h-6"}),"Entrega"]}),e.jsxs("button",{onClick:()=>Q("pickup"),className:x("p-4 rounded-xl border-2 font-bold transition-all flex flex-col items-center gap-2 duration-300",s==="pickup"?"border-[#ff3d03] bg-[#ff3d03]/5 text-[#ff3d03] shadow-md shadow-orange-500/10":"border-gray-200 dark:border-gray-700 dark:bg-white/5 text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600 hover:bg-gray-50 bg-white"),children:[e.jsx("div",{className:"w-6 h-6 relative",children:e.jsx(H,{className:"absolute w-full h-full"})}),"Retirada"]})]}),s==="delivery"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-premium-dark transition-colors duration-300",children:[e.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-200 transition-colors duration-300",children:"Selecione o Endere√ßo"}),e.jsx("button",{onClick:()=>S(!0),className:"px-3 py-1.5 rounded-lg bg-[#ff3d03]/10 text-[#ff3d03] text-sm font-bold hover:bg-[#ff3d03]/20 transition-colors",children:"+ Novo Endere√ßo"})]}),ce&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 py-1 transition-colors duration-300",children:[e.jsx(J,{className:"w-3 h-3 animate-spin text-primary"})," Validando entrega..."]}),!ce&&p===!1&&me&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl text-xs font-bold transition-colors duration-300",children:[e.jsx(q,{className:"w-4 h-4"})," ",me]}),w.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wider",children:"Selecione um bairro atendido:"}),e.jsxs("select",{value:E,onClick:t=>t.stopPropagation(),onChange:t=>{const r=t.target.value;W(r);const c=w.find(d=>d.neighborhood===r);c&&(C(!0),P(Number(c.delivery_fee)),A(""))},className:"w-full text-sm p-3 rounded-xl border-2 border-orange-200 dark:border-orange-800/50 dark:bg-white/5 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all",children:[e.jsx("option",{value:"",children:"Selecione o bairro..."}),w.map(t=>e.jsxs("option",{value:t.neighborhood,children:[t.neighborhood," ‚Äî R$ ",Number(t.delivery_fee).toFixed(2).replace(".",",")]},t.id||t.neighborhood))]}),e.jsx("div",{className:"mt-1 text-[10px] text-gray-500 text-right",children:"* Sele√ß√£o obrigat√≥ria para c√°lculo do frete"})]})]}),m.length===0?e.jsxs("div",{className:"text-center py-6 bg-gray-50 dark:bg-white/5 rounded-xl border-2 border-dashed border-gray-200 dark:border-gray-700 transition-colors duration-300",children:[e.jsx(B,{className:"w-8 h-8 text-gray-300 dark:text-gray-600 mx-auto mb-2 transition-colors duration-300"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2 transition-colors duration-300",children:"Nenhum endere√ßo cadastrado"}),e.jsx("button",{onClick:()=>S(!0),className:"px-4 py-2 bg-white dark:bg-white/10 border border-gray-300 dark:border-white/10 rounded-lg text-sm font-medium hover:bg-gray-50 dark:hover:bg-white/20 text-gray-900 dark:text-white transition-colors duration-300",children:"Cadastrar Agora"})]}):m.map(t=>{const r=i===t.id;return e.jsxs("div",{onClick:()=>I(t.id),className:x("p-4 rounded-xl border-2 cursor-pointer transition-all flex items-start justify-between group duration-300",r?p===!1?"border-red-400 bg-red-50 dark:bg-red-900/10 ring-1 ring-red-400":"border-[#ff3d03] bg-[#ff3d03]/5 dark:bg-[#ff3d03]/10 ring-1 ring-[#ff3d03]":"border-gray-200 dark:border-gray-700 bg-white dark:bg-white/5 hover:border-orange-200 hover:bg-orange-50/30"),children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:x("mt-1 w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition-all duration-300",r?p===!1?"border-red-500 bg-red-500 text-white shadow-sm shadow-red-500/20":"border-[#ff3d03] bg-[#ff3d03] text-white shadow-sm shadow-orange-500/20":"border-gray-300 dark:border-gray-600 bg-white dark:bg-white/5"),children:r&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-gray-900 dark:text-white transition-colors duration-300",children:[t.street,", ",t.number]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 transition-colors duration-300",children:[t.neighborhood," - ",t.city]}),t.complement&&e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-0.5 transition-colors duration-300",children:t.complement})]})]}),r&&p&&e.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-[10px] font-black px-2 py-0.5 rounded-full animate-in zoom-in-95 duration-300 uppercase tracking-tighter",children:"√Årea Coberta"})]},t.id)})]})]}),n==="payment"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 p-4 rounded-xl border border-gray-100 dark:border-white/5 transition-colors duration-300",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2 text-sm transition-colors duration-300",children:[e.jsx(Le,{className:"h-4 w-4 text-primary"}),"Cupom de Desconto"]}),h?e.jsxs("div",{className:"bg-white dark:bg-white/5 border border-green-200 dark:border-green-800/50 rounded-lg p-3 flex justify-between items-center shadow-sm transition-colors duration-300",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-green-700 dark:text-green-400 text-sm transition-colors duration-300",children:["‚úì ",h.code]}),e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-500/80 transition-colors duration-300",children:["Desconto de ",h.discount_type==="fixed"?g(h.discount_value):`${h.discount_value}%`]})]}),e.jsx("button",{onClick:()=>ae(null),className:"text-gray-400 dark:text-gray-500 hover:text-red-500 dark:hover:text-red-400 transition-colors duration-300",children:e.jsx(q,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:R,onChange:t=>{re(t.target.value),T("")},placeholder:"C√≥digo do cupom",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-white/5 dark:text-white rounded-lg text-sm focus:ring-primary focus:border-primary transition-colors duration-300"}),e.jsx("button",{onClick:Fe,disabled:_e||!R,className:"bg-gray-900 text-white px-3 py-2 rounded-lg text-sm font-medium hover:bg-gray-800 disabled:opacity-50",children:"Aplicar"})]}),se&&e.jsx("p",{className:"text-xs text-red-500 mt-2",children:se})]}),o?.loyalty_enabled&&l?.loyalty_points>0&&e.jsxs("div",{className:x("p-4 rounded-xl border transition-all duration-300",N?"bg-orange-50 dark:bg-[#ff3d03]/10 border-orange-200 dark:border-[#ff3d03]/30":"bg-gray-50 dark:bg-white/5 border-gray-100 dark:border-white/5"),children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2 text-sm transition-colors duration-300",children:[e.jsx(K,{className:"h-4 w-4 text-orange-500"}),"Abater com Pontos"]}),e.jsx(Ze,{checked:N,onChange:t=>{if(Se(t),t){const r=l.loyalty_points*(o.settings?.currency_per_point||.1);ne(l.loyalty_points),de(r),V("Pontos Aplicados!",`Desconto de ${g(r)} adicionado.`)}else ne(0),de(0)},className:x("relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none",N?"bg-primary":"bg-gray-200"),children:e.jsx("span",{className:x("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",N?"translate-x-6":"translate-x-1")})})]}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 transition-colors duration-300",children:["Saldo: ",e.jsxs("span",{className:"font-bold",children:[l.loyalty_points," pontos"]})]}),e.jsxs("p",{className:"text-[10px] text-gray-400 dark:text-gray-500 transition-colors duration-300",children:["1 ponto = ",g(o.settings?.currency_per_point||.1)]})]}),N&&e.jsxs("p",{className:"text-sm font-bold text-orange-600",children:["-",g(ie)]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-3 transition-colors duration-300",children:"Forma de Pagamento"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{id:"credit_card",label:"Cr√©dito",sub:"Maquininha",icon:ye},{id:"debit_card",label:"D√©bito",sub:"Maquininha",icon:ye},{id:"pix",label:"PIX",sub:"Na entrega",icon:H},{id:"cash",label:"Dinheiro",sub:"Esp√©cie",icon:Be}].map(t=>e.jsxs("div",{onClick:()=>je(t.id),className:x("p-3 rounded-xl border-2 cursor-pointer transition-all flex flex-col items-center text-center gap-2 hover:shadow-md duration-300",y===t.id?"border-primary bg-orange-50 dark:bg-primary/10 shadow-sm":"border-gray-100 dark:border-gray-700 bg-white dark:bg-white/5 hover:border-gray-200 dark:hover:border-gray-600"),children:[e.jsx(t.icon,{className:x("w-6 h-6 transition-colors duration-300",y===t.id?"text-primary":"text-gray-400 dark:text-gray-500")}),e.jsxs("div",{children:[e.jsx("p",{className:x("font-bold text-sm transition-colors duration-300",y===t.id?"text-primary":"text-gray-700 dark:text-gray-200"),children:t.label}),e.jsx("p",{className:"text-[10px] text-gray-400 dark:text-gray-500 transition-colors duration-300",children:t.sub})]})]},t.id))})]}),y==="cash"&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 duration-200",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 transition-colors duration-300",children:"Troco para quanto?"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500 dark:text-gray-400 transition-colors duration-300",children:"R$"}),e.jsx("input",{type:"text",value:$,onChange:t=>we(t.target.value),placeholder:"0,00",className:"w-full pl-9 px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-white/5 dark:text-white rounded-lg focus:ring-[#ff3d03] focus:border-[#ff3d03] transition-colors duration-300"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 transition-colors duration-300",children:["Total do pedido: ",g(X)]})]})]}),n==="review"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-premium-card border border-gray-200 dark:border-white/5 rounded-xl shadow-sm overflow-hidden transition-colors duration-300",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 px-4 py-3 border-b border-gray-100 dark:border-white/5 flex justify-between items-center transition-colors duration-300",children:[e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white transition-colors duration-300",children:"Resumo do Pedido"}),e.jsxs("span",{className:"text-xs font-medium bg-gray-200 dark:bg-white/10 px-2 py-1 rounded-full text-gray-600 dark:text-gray-300 transition-colors duration-300",children:[k.length," itens"]})]}),e.jsx("div",{className:"p-4 space-y-3 max-h-40 overflow-y-auto",children:k.map((t,r)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white transition-colors duration-300",children:[t.quantity,"x"]}),e.jsx("span",{className:"font-bold text-gray-700 dark:text-gray-200 transition-colors duration-300 line-clamp-1",children:t.product.name})]}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium transition-colors duration-300",children:g(t.subtotal)})]}),t.selectedComplements.length>0&&e.jsx("div",{className:"pl-7 space-y-0.5",children:t.selectedComplements.map((c,d)=>e.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 leading-tight",children:["+ ",c.name]},d))}),t.notes&&e.jsx("div",{className:"pl-7",children:e.jsxs("p",{className:"text-[10px] italic text-gray-400 dark:text-gray-500 line-clamp-2",children:["Obs: ",t.notes]})})]},r))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl text-sm text-blue-800 dark:text-blue-300 transition-colors duration-300",children:[e.jsx(B,{className:"w-5 h-5 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:s==="delivery"?"Entrega em:":"Retirada em Loja"}),s==="delivery"&&i?e.jsxs("p",{className:"opacity-90",children:[m.find(t=>t.id===i)?.street,", ",m.find(t=>t.id===i)?.number]}):e.jsx("p",{className:"opacity-90",children:"Retirar no balc√£o."})]})]}),ue>0&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/10 dark:to-orange-900/10 rounded-xl border border-yellow-100 dark:border-yellow-900/20 transition-colors duration-300",children:[e.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900/20 p-1.5 rounded-full text-yellow-600 dark:text-yellow-400 transition-colors duration-300",children:e.jsx(K,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-bold text-yellow-800 dark:text-yellow-400 transition-colors duration-300",children:["Voc√™ ganhar√° ",ue," pontos!"]}),e.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-500/80 transition-colors duration-300",children:"Neste pedido"})]})]}),e.jsxs("div",{className:"space-y-2 pt-2 border-t border-gray-100 dark:border-white/5 transition-colors duration-300",children:[e.jsxs("div",{className:"flex justify-between text-gray-500 dark:text-gray-400 text-sm transition-colors duration-300",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:g(M)})]}),s==="delivery"&&e.jsxs("div",{className:"flex justify-between text-gray-500 dark:text-gray-400 text-sm transition-colors duration-300",children:[e.jsx("span",{children:"Taxa de Entrega"}),e.jsx("span",{children:g(ge)})]}),G>0&&e.jsxs("div",{className:"flex justify-between text-green-600 dark:text-green-400 text-sm font-medium transition-colors duration-300",children:[e.jsx("span",{children:"Desconto"}),e.jsxs("span",{children:["- ",g(G)]})]}),e.jsxs("div",{className:"flex justify-between items-end pt-2 mt-2 border-t border-gray-100 dark:border-white/5 transition-colors duration-300",children:[e.jsx("span",{className:"text-gray-900 dark:text-white font-bold transition-colors duration-300",children:"Total Final"}),e.jsx("span",{className:"text-2xl font-black text-primary",children:g(X)})]})]})]})]})]}),!_&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-100 dark:border-white/5 flex gap-3 transition-colors duration-300",children:[n!=="delivery"?e.jsx("button",{onClick:he,className:"flex-1 px-4 py-3 bg-gray-100 dark:bg-white/10 text-gray-700 dark:text-gray-300 font-bold rounded-xl hover:bg-gray-200 dark:hover:bg-white/20 transition-colors duration-300",children:"Voltar"}):e.jsx("button",{onClick:b,className:"flex-1 px-4 py-3 bg-gray-100 dark:bg-white/10 text-gray-700 dark:text-gray-300 font-bold rounded-xl hover:bg-gray-200 dark:hover:bg-white/20 transition-colors duration-300",children:"Cancelar"}),n==="review"?e.jsx("button",{onClick:pe,disabled:v,className:"flex-[2] bg-[#ff3d03] hover:bg-[#e63700] text-white font-bold py-3 px-4 rounded-xl transition-colors flex items-center justify-center gap-2 shadow-lg shadow-orange-200 disabled:opacity-70",children:v?e.jsx(J,{className:"animate-spin"}):"Confirmar Pedido"}):e.jsx("button",{onClick:Me,disabled:v||s==="delivery"&&!i||s==="delivery"&&p===!1,className:x("flex-[2] px-4 py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 shadow-lg shadow-orange-200",v||s==="delivery"&&!i||s==="delivery"&&p===!1?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed shadow-none text-gray-500":"bg-[#ff3d03] hover:bg-[#e63700] hover:shadow-orange-500/40 text-white"),children:v?e.jsx(J,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:["Continuar ",e.jsx(Oe,{className:"w-5 h-5"})]})})]})]})]})]})}export{kt as default};
