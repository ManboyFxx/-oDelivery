import{c as B,r as w,u as k,j as e,H as $,e as c}from"./app-ntdTxgOy.js";import{A as q,U as y}from"./AuthenticatedLayout-DrPozIcs.js";import{I as r}from"./InputLabel-r0t_v9P3.js";import{T as l}from"./TextInput-Bif_IK_b.js";import{P as _}from"./PrimaryButton-C9Wkxoix.js";import{S as L}from"./SecondaryButton-BUe8MGz7.js";import{M as O}from"./Modal-BQGxMqkX.js";import{P as H}from"./PageHeader-C4DqDqh_.js";import{P as f}from"./plus-8zyznK_8.js";import{H as j}from"./history-BeGrjAk2.js";import{A as V}from"./arrow-down-left-Dje82dKg.js";import{A as C}from"./arrow-up-right-8lGdU1JG.js";import{G as A}from"./gift-BLnvqTiJ.js";import{T as U}from"./trash-2-CIwVe9Km.js";import{S as z}from"./save-W31y1H7x.js";import{t as Q}from"./switch-vHB9fxmw.js";import"./monitor-CaNksAR2.js";import"./shopping-bag-B5tIDbd2.js";import"./package-CIS4Panz.js";import"./image-BVhE8mtv.js";import"./layout-dashboard-DTePbe4z.js";import"./credit-card-Dwib51Ix.js";import"./trophy-D4NmT9nV.js";import"./ticket-AlH-4h02.js";import"./store-R3tkl9eO.js";import"./dollar-sign-CIA1BGvf.js";import"./key-Ah8hAJ3J.js";import"./shield-check-DdhX9tun.js";import"./log-out-DjRx1XER.js";import"./transition-BwYjvS6O.js";import"./use-sync-refs-Dc50QNpL.js";import"./truck-DYXuK85-.js";import"./menu-RLfObER_.js";import"./use-resolve-button-type-BmhzpvpH.js";import"./keyboard-DRMfDIvJ.js";import"./portal-3LWpQXte.js";import"./with-selector-9VIjIqJH.js";import"./chevron-down-DtfRhuHf.js";import"./clock-C_fpnon1.js";import"./menu-Dn_rDpth.js";import"./search-lAJhAM70.js";import"./sun-CwHSdhJ6.js";import"./bell-phIVX4TK.js";import"./eye-CQR7DTUA.js";import"./arrow-left-Cj6NRz14.js";import"./hidden-DW5r8TlX.js";const J=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],K=B("settings",J);function Oe({settings:d,history:v,customers:D,referrals:b,referralStats:g}){const[o,u]=w.useState("dashboard"),[P,x]=w.useState(!1),{data:a,setData:s,post:I,processing:S}=k({loyalty_enabled:d?.loyalty_enabled??!1,points_per_currency:d?.points_per_currency??1,currency_per_point:d?.currency_per_point??.1,loyalty_expiry_days:d?.loyalty_expiry_days??null,referral_enabled:d?.referral_enabled??!1,referral_referrer_points:d?.referral_referrer_points??50,referral_referred_points:d?.referral_referred_points??20,referral_max_per_customer:d?.referral_max_per_customer??10,referral_min_order_value:d?.referral_min_order_value??null,referral_code_expiry_days:d?.referral_code_expiry_days??null,loyalty_tiers:d?.loyalty_tiers??[{name:"Bronze",min_points:0,multiplier:1},{name:"Prata",min_points:100,multiplier:1.05},{name:"Ouro",min_points:500,multiplier:1.1},{name:"Diamante",min_points:1e3,multiplier:1.15}]}),R=t=>{t.preventDefault(),I(route("loyalty.settings"))},{data:m,setData:p,post:T,processing:M,reset:F,errors:N}=k({customer_id:"",points:"",type:"add",description:"Ajuste manual"}),E=t=>{t.preventDefault(),T(route("loyalty.adjust"),{onSuccess:()=>{x(!1),F()}})};return e.jsxs(q,{children:[e.jsx($,{title:"Fidelidade"}),e.jsxs("div",{className:"flex h-full flex-col space-y-8",children:[e.jsx(H,{title:"Programa de Fidelidade",subtitle:"Gerencie pontos, recompensas e configurações.",action:o==="dashboard"?e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 rounded-2xl bg-[#ff3d03] px-6 py-3 text-sm font-bold text-white shadow-lg shadow-[#ff3d03]/20 hover:bg-[#e63700] hover:scale-105 active:scale-95 transition-all whitespace-nowrap",children:[e.jsx(f,{className:"h-5 w-5"}),"Ajuste Manual"]}):void 0}),e.jsx("div",{className:"flex justify-center md:justify-start",children:e.jsxs("nav",{className:"flex items-center gap-1 bg-white dark:bg-[#1a1b1e] p-1.5 rounded-2xl border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsxs("button",{onClick:()=>u("dashboard"),className:c("px-6 py-2.5 rounded-xl text-sm font-bold transition-all whitespace-nowrap flex items-center gap-2",o==="dashboard"?"bg-[#ff3d03] text-white shadow-md shadow-[#ff3d03]/20":"text-gray-500 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5"),children:[e.jsx(j,{className:"h-4 w-4"}),"Visão Geral"]}),e.jsxs("button",{onClick:()=>u("referrals"),className:c("px-6 py-2.5 rounded-xl text-sm font-bold transition-all whitespace-nowrap flex items-center gap-2",o==="referrals"?"bg-[#ff3d03] text-white shadow-md shadow-[#ff3d03]/20":"text-gray-500 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5"),children:[e.jsx(y,{className:"h-4 w-4"}),"Indicações"]}),e.jsxs("button",{onClick:()=>u("settings"),className:c("px-6 py-2.5 rounded-xl text-sm font-bold transition-all whitespace-nowrap flex items-center gap-2",o==="settings"?"bg-[#ff3d03] text-white shadow-md shadow-[#ff3d03]/20":"text-gray-500 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5"),children:[e.jsx(K,{className:"h-4 w-4"}),"Configurações"]})]})}),e.jsxs("div",{children:[o==="dashboard"&&e.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[32px] shadow-xl shadow-gray-200/50 dark:shadow-none border border-gray-100 dark:border-white/5 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-white/5 flex justify-between items-center",children:e.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:"Últimas Movimentações"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-[#0f1012] text-gray-500 dark:text-gray-400 uppercase text-xs font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 rounded-tl-[32px]",children:"Cliente"}),e.jsx("th",{className:"px-6 py-4",children:"Tipo"}),e.jsx("th",{className:"px-6 py-4",children:"Pontos"}),e.jsx("th",{className:"px-6 py-4",children:"Descrição"}),e.jsx("th",{className:"px-6 py-4 rounded-tr-[32px]",children:"Data"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-white/5",children:[v.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:t.customer.name}),e.jsx("td",{className:"px-6 py-4",children:t.type==="earn"?e.jsxs("span",{className:"inline-flex items-center gap-1.5 text-green-600 bg-green-50 dark:bg-green-500/10 px-3 py-1 rounded-lg text-xs font-bold border border-green-100 dark:border-green-500/20",children:[e.jsx(V,{className:"h-3 w-3"})," Acúmulo"]}):e.jsxs("span",{className:"inline-flex items-center gap-1.5 text-red-600 bg-red-50 dark:bg-red-500/10 px-3 py-1 rounded-lg text-xs font-bold border border-red-100 dark:border-red-500/20",children:[e.jsx(C,{className:"h-3 w-3"})," Resgate"]})}),e.jsxs("td",{className:c("px-6 py-4 font-black text-lg",t.type==="earn"?"text-green-600":"text-red-500"),children:[t.type==="earn"?"+":"-",t.points]}),e.jsx("td",{className:"px-6 py-4 text-gray-500 dark:text-gray-400",children:t.description}),e.jsxs("td",{className:"px-6 py-4 text-gray-400 dark:text-gray-500 text-xs font-medium",children:[new Date(t.created_at).toLocaleDateString("pt-BR")," às ",new Date(t.created_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]},t.id)),v.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-20 text-center text-gray-500 dark:text-gray-400 flex flex-col items-center justify-center w-full",children:[e.jsx("div",{className:"h-16 w-16 bg-gray-50 dark:bg-white/5 rounded-full flex items-center justify-center mb-4",children:e.jsx(j,{className:"h-8 w-8 text-gray-300"})}),e.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:"Nenhuma movimentação registrada."})]})})]})]})})]})}),o==="referrals"&&e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] p-6 rounded-[24px] shadow-sm border border-gray-100 dark:border-white/5",children:[e.jsx("h4",{className:"text-gray-500 dark:text-gray-400 text-xs font-bold uppercase tracking-wider mb-2",children:"Total de Indicações"}),e.jsx("p",{className:"text-3xl font-black text-gray-900 dark:text-white",children:g?.total??0})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] p-6 rounded-[24px] shadow-sm border border-gray-100 dark:border-white/5",children:[e.jsx("h4",{className:"text-gray-500 dark:text-gray-400 text-xs font-bold uppercase tracking-wider mb-2",children:"Pendentes"}),e.jsx("p",{className:"text-3xl font-black text-orange-500",children:g?.pending??0})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] p-6 rounded-[24px] shadow-sm border border-gray-100 dark:border-white/5",children:[e.jsx("h4",{className:"text-gray-500 dark:text-gray-400 text-xs font-bold uppercase tracking-wider mb-2",children:"Convertidas"}),e.jsx("p",{className:"text-3xl font-black text-green-500",children:g?.completed??0})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] p-6 rounded-[24px] shadow-sm border border-gray-100 dark:border-white/5",children:[e.jsx("h4",{className:"text-gray-500 dark:text-gray-400 text-xs font-bold uppercase tracking-wider mb-2",children:"Pontos Distribuídos"}),e.jsx("p",{className:"text-3xl font-black text-[#ff3d03]",children:g?.total_points_awarded??0})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[32px] shadow-xl shadow-gray-200/50 dark:shadow-none border border-gray-100 dark:border-white/5 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-white/5 flex justify-between items-center",children:e.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:"Últimas Indicações"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-[#0f1012] text-gray-500 dark:text-gray-400 uppercase text-xs font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 rounded-tl-[32px]",children:"Padrinho (Indicou)"}),e.jsx("th",{className:"px-6 py-4",children:"Indicado (Novo Cliente)"}),e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4",children:"Pontos (Padrinho)"}),e.jsx("th",{className:"px-6 py-4 rounded-tr-[32px]",children:"Data"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-white/5",children:[b?.data.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:[t.referrer.name,e.jsx("span",{className:"block text-xs text-gray-500 font-normal",children:t.referrer.phone})]}),e.jsx("td",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:t.referred?e.jsxs(e.Fragment,{children:[t.referred.name,e.jsx("span",{className:"block text-xs text-gray-500 font-normal",children:t.referred.phone})]}):e.jsx("span",{className:"text-gray-400 italic",children:"Aguardando cadastro"})}),e.jsxs("td",{className:"px-6 py-4",children:[t.status==="completed"&&e.jsx("span",{className:"inline-flex items-center gap-1.5 text-green-600 bg-green-50 dark:bg-green-500/10 px-3 py-1 rounded-lg text-xs font-bold border border-green-100 dark:border-green-500/20",children:"Concluída"}),t.status==="pending"&&e.jsx("span",{className:"inline-flex items-center gap-1.5 text-orange-600 bg-orange-50 dark:bg-orange-500/10 px-3 py-1 rounded-lg text-xs font-bold border border-orange-100 dark:border-orange-500/20",children:"Pendente"}),(t.status==="fraud"||t.status==="expired")&&e.jsx("span",{className:"inline-flex items-center gap-1.5 text-red-600 bg-red-50 dark:bg-red-500/10 px-3 py-1 rounded-lg text-xs font-bold border border-red-100 dark:border-red-500/20",children:t.status==="fraud"?"Suspeita":"Expirada"})]}),e.jsx("td",{className:"px-6 py-4 font-black text-gray-900 dark:text-white",children:t.referrer_points_awarded>0?`+${t.referrer_points_awarded}`:"-"}),e.jsx("td",{className:"px-6 py-4 text-gray-400 dark:text-gray-500 text-xs font-medium",children:new Date(t.created_at).toLocaleDateString("pt-BR")})]},t.id)),(!b?.data||b.data.length===0)&&e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-20 text-center text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"h-16 w-16 bg-gray-50 dark:bg-white/5 rounded-full flex items-center justify-center mb-4 mx-auto",children:e.jsx(y,{className:"h-8 w-8 text-gray-300"})}),e.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:"Nenhuma indicação encontrada."})]})})]})]})})]})]}),o==="settings"&&e.jsx("div",{className:"max-w-4xl space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsx("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[32px] shadow-xl shadow-gray-200/50 dark:shadow-none border border-gray-100 dark:border-white/5 p-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-orange-50 dark:bg-orange-900/20 flex items-center justify-center text-[#ff3d03]",children:e.jsx(A,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Programa de Fidelidade"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ative para permitir que seus clientes acumulem pontos."})]})]}),e.jsx(Q,{checked:a.loyalty_enabled,onChange:t=>s("loyalty_enabled",t),className:`${a.loyalty_enabled?"bg-[#ff3d03]":"bg-gray-300 dark:bg-gray-600"} relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none`,children:e.jsx("span",{className:`${a.loyalty_enabled?"translate-x-6":"translate-x-1"} inline-block h-5 w-5 transform rounded-full bg-white transition-transform`})})]})}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[32px] shadow-xl shadow-gray-200/50 dark:shadow-none border border-gray-100 dark:border-white/5 p-8",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6",children:"Regras de Pontuação"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Pontos por Real Gasto",className:"mb-2"}),e.jsxs("div",{className:"relative group",children:[e.jsx(l,{type:"number",value:a.points_per_currency,onChange:t=>s("points_per_currency",parseFloat(t.target.value)),className:"w-full pr-16 h-14 text-lg font-bold",step:"0.1",min:"0"}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none text-gray-400 font-bold bg-transparent",children:"pts / R$"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2 pl-1",children:["Ex: O cliente ganha ",e.jsx("strong",{className:"text-gray-900 dark:text-white",children:"1 ponto"})," a cada R$ 1,00 gasto."]})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Valor do CashBack (Resgate)",className:"mb-2"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none text-gray-400 font-bold",children:"R$"}),e.jsx(l,{type:"number",value:a.currency_per_point,onChange:t=>s("currency_per_point",parseFloat(t.target.value)),className:"w-full pl-10 pr-16 h-14 text-lg font-bold",step:"0.01",min:"0"}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none text-gray-400 font-bold",children:"/ ponto"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2 pl-1",children:["Ex: Cada ponto vale ",e.jsx("strong",{className:"text-gray-900 dark:text-white",children:"R$ 0,10"})," de desconto."]})]})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mt-8 mb-6 pt-6 border-t border-gray-100 dark:border-white/5",children:"Configuração de Indicações (Indique e Ganhe)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(y,{className:"h-4 w-4 text-blue-500"}),e.jsx(r,{value:"Pontos para quem INDICA (Padrinho)"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx(l,{type:"number",value:a.referral_referrer_points,onChange:t=>s("referral_referrer_points",parseInt(t.target.value)||0),className:"w-full pr-16 h-14 text-lg font-bold",placeholder:"50",min:"0"}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none text-gray-400 font-bold bg-transparent",children:"pts"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2 pl-1",children:"Ganho pelo cliente que enviou o convite."})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(A,{className:"h-4 w-4 text-green-500"}),e.jsx(r,{value:"Pontos para o INDICADO (Novo Cliente)"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx(l,{type:"number",value:a.referral_referred_points,onChange:t=>s("referral_referred_points",parseInt(t.target.value)||0),className:"w-full pr-16 h-14 text-lg font-bold",placeholder:"20",min:"0"}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none text-gray-400 font-bold bg-transparent",children:"pts"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2 pl-1",children:"Ganho pelo novo cliente ao se cadastrar e comprar."})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Máximo de Indicações por Cliente",className:"mb-2"}),e.jsx(l,{type:"number",value:a.referral_max_per_customer,onChange:t=>s("referral_max_per_customer",parseInt(t.target.value)||10),className:"w-full h-14 text-lg font-bold",placeholder:"10",min:"1"})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Valor Mínimo do 1º Pedido",className:"mb-2"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none text-gray-400 font-bold",children:"R$"}),e.jsx(l,{type:"number",value:a.referral_min_order_value??"",onChange:t=>s("referral_min_order_value",t.target.value?parseFloat(t.target.value):null),className:"w-full pl-10 h-14 text-lg font-bold",placeholder:"Opcional",step:"0.01",min:"0"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2 pl-1",children:"Mínimo gasto pelo indicado para validar a recompensa."})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(j,{className:"h-4 w-4 text-orange-500"}),e.jsx(r,{value:"Validade dos Pontos (Geral)"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx(l,{type:"number",value:a.loyalty_expiry_days??"",onChange:t=>s("loyalty_expiry_days",t.target.value?parseInt(t.target.value):null),className:"w-full pr-16 h-14 text-lg font-bold",placeholder:"Ex: 90",min:"1"}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none text-gray-400 font-bold bg-transparent",children:"dias"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2 pl-1",children:"Deixe em branco para pontos nunca expirarem."})]})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-white/5",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-bold text-gray-900 dark:text-white",children:"Níveis de Fidelidade (Ranking)"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Defina os nomes e pontuações para cada nível."})]}),e.jsxs("button",{type:"button",onClick:()=>{const t=a.loyalty_tiers||[];s("loyalty_tiers",[...t,{name:"Novo Nível",min_points:0,multiplier:1}])},className:"text-sm font-bold text-[#ff3d03] hover:text-[#e63700] flex items-center gap-1",children:[e.jsx(f,{className:"h-4 w-4"})," Adicionar Nível"]})]}),e.jsxs("div",{className:"space-y-3",children:[a.loyalty_tiers?.map((t,h)=>e.jsxs("div",{className:"flex gap-4 items-end bg-gray-50 dark:bg-white/5 p-4 rounded-2xl border border-gray-100 dark:border-white/5 group",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(r,{value:"Nome do Nível",className:"mb-1 text-xs"}),e.jsx(l,{value:t.name,onChange:i=>{const n=[...a.loyalty_tiers];n[h].name=i.target.value,s("loyalty_tiers",n)},className:"w-full h-10 text-sm font-bold",placeholder:"Ex: Diamante"})]}),e.jsxs("div",{className:"w-32",children:[e.jsx(r,{value:"Min. Pontos",className:"mb-1 text-xs"}),e.jsx(l,{type:"number",value:t.min_points,onChange:i=>{const n=[...a.loyalty_tiers];n[h].min_points=parseInt(i.target.value)||0,s("loyalty_tiers",n)},className:"w-full h-10 text-sm font-bold"})]}),e.jsxs("div",{className:"w-24",children:[e.jsx(r,{value:"Multiplicador",className:"mb-1 text-xs"}),e.jsx(l,{type:"number",step:"0.05",value:t.multiplier,onChange:i=>{const n=[...a.loyalty_tiers];n[h].multiplier=parseFloat(i.target.value)||1,s("loyalty_tiers",n)},className:"w-full h-10 text-sm font-bold"})]}),e.jsx("button",{type:"button",onClick:()=>{const i=a.loyalty_tiers.filter((n,G)=>G!==h);s("loyalty_tiers",i)},className:"h-10 w-10 flex items-center justify-center rounded-xl text-gray-400 hover:text-red-500 hover:bg-red-50 transition-colors",children:e.jsx(U,{className:"h-5 w-5"})})]},h)),(!a.loyalty_tiers||a.loyalty_tiers.length===0)&&e.jsx("p",{className:"text-center text-gray-500 py-4 italic",children:"Nenhum nível configurado. Adicione um para começar."})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(_,{disabled:S,className:"h-12 px-8 rounded-xl bg-[#ff3d03] hover:bg-[#e63700] shadow-lg shadow-[#ff3d03]/20 border-transparent text-base font-bold",children:[e.jsx(z,{className:"h-5 w-5 mr-2"}),"Salvar Configurações"]})})]})})]})]}),e.jsx(O,{show:P,onClose:()=>x(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-black text-gray-900 dark:text-white",children:"Ajuste Manual de Pontos"}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600"})]}),e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Cliente"}),e.jsxs("select",{value:m.customer_id,onChange:t=>p("customer_id",t.target.value),className:"w-full mt-1 border-gray-200 dark:border-gray-700 bg-white dark:bg-[#0f1012] text-gray-900 dark:text-white focus:border-[#ff3d03] focus:ring-[#ff3d03] rounded-xl h-12 shadow-sm",required:!0,children:[e.jsx("option",{value:"",children:"Selecione um cliente..."}),D.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.loyalty_points," pts atuais)"]},t.id))]})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Tipo de Operação"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-1",children:[e.jsxs("button",{type:"button",onClick:()=>p("type","add"),className:c("flex items-center justify-center gap-2 py-3 px-4 rounded-xl border font-bold transition-all relative overflow-hidden",m.type==="add"?"bg-green-500 text-white border-green-500 shadow-md transform scale-[1.02]":"border-gray-200 text-gray-500 bg-gray-50 hover:bg-gray-100 dark:border-gray-700 dark:bg-white/5 dark:text-gray-400"),children:[e.jsx(f,{className:"h-5 w-5"})," Adicionar"]}),e.jsxs("button",{type:"button",onClick:()=>p("type","remove"),className:c("flex items-center justify-center gap-2 py-3 px-4 rounded-xl border font-bold transition-all relative overflow-hidden",m.type==="remove"?"bg-red-500 text-white border-red-500 shadow-md transform scale-[1.02]":"border-gray-200 text-gray-500 bg-gray-50 hover:bg-gray-100 dark:border-gray-700 dark:bg-white/5 dark:text-gray-400"),children:[e.jsx(C,{className:"h-5 w-5"})," Remover"]})]})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Quantidade de Pontos"}),e.jsx(l,{type:"number",value:m.points,onChange:t=>p("points",t.target.value),className:"w-full mt-1 h-12 font-bold text-lg",min:"1",placeholder:"0",required:!0}),N.points&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:N.points})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Motivo / Descrição"}),e.jsx(l,{type:"text",value:m.description,onChange:t=>p("description",t.target.value),className:"w-full mt-1 h-12",placeholder:"Ex: Bônus de aniversário",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-gray-100 dark:border-white/5",children:[e.jsx(L,{onClick:()=>x(!1),className:"h-12 px-6 rounded-xl",children:"Cancelar"}),e.jsx(_,{disabled:M,className:"h-12 px-6 rounded-xl bg-[#ff3d03] hover:bg-[#e63700] border-transparent shadow-lg shadow-[#ff3d03]/20",children:"Confirmar Ajuste"})]})]})]})})]})}export{Oe as default};
