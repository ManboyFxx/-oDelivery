import{r,g as U,j as e,H as W,d as P}from"./app-BdORke9e.js";import{t as c}from"./index-DQcsEE3M.js";import X from"./HeroSection-D7zFjtll.js";import Z from"./CategoryNav-v10Fuy_C.js";import $ from"./ProductGrid-D3J997PP.js";import tt from"./CartFloatingButton-DUk8U_xZ.js";import et from"./CartSidebar-0JOXUYvE.js";import ot from"./ProductModal-BbNbWBYG.js";import rt from"./AuthModal-dES7Xpy-.js";import st from"./CustomerAreaModal-CBmwHHQC.js";import nt from"./CheckoutModal-DXopIJ_e.js";import"./user-BTM5BNvF.js";import"./shopping-bag-Bkq9HZGo.js";import"./map-pin-BWgvq1Vv.js";import"./clock-Bea4bg8j.js";import"./message-circle-B2A9tAiI.js";import"./instagram-C0K6rASI.js";import"./chevron-down-BYu3fBBM.js";import"./navigation-Cb02Pl7E.js";import"./ProductCard-CViBfzEX.js";import"./plus-CCxwXr4F.js";import"./shopping-cart-Bt16nmAI.js";import"./pen-BlJc7w87.js";import"./trash-2-LDi6n0fj.js";import"./minus-BNVZGM0E.js";import"./trophy-BVLuvj5r.js";import"./gift-DTli0vqC.js";import"./log-out-D5bYoo4C.js";import"./check-9F5QNde4.js";import"./history-C1CrGtwE.js";import"./Modal-BRZfGGEO.js";import"./keyboard-BwAVKa8y.js";import"./use-sync-refs-DARQMqKe.js";import"./portal-C1qL--0H.js";import"./with-selector-ExNsPTrk.js";import"./hidden-BNzSnsRH.js";import"./transition-q_lP3uwy.js";import"./sparkles-DKy4QTPq.js";import"./AddressForm-Bd-BkKU4.js";import"./TextInput-DlNoCsqf.js";import"./InputLabel-DKincI9_.js";import"./PrimaryButton-4oCrw539.js";import"./SecondaryButton-C-seBEKT.js";import"./loader-circle-EmGJLPhk.js";import"./search-2QIM9VoB.js";import"./arrow-left-COa3xEmo.js";import"./wallet-gk3fH-Vr.js";import"./ticket-CxV0NpQc.js";import"./credit-card-D29PRqwD.js";import"./banknote-CSE4Vbrg.js";import"./chevron-right-KGoeu4FG.js";import"./circle-check-big-f19XPCGK.js";import"./switch-CS5Qda18.js";import"./use-resolve-button-type-QCoL9pdX.js";function le({store:d,categories:m,slug:k,authCustomer:L,activePromotion:at,availableCoupons:it}){const[f,N]=r.useState("all"),[n,i]=r.useState([]),[H,C]=r.useState(null),[T,u]=r.useState(!1),[v,w]=r.useState(null),[z,S]=r.useState(null),[y,a]=r.useState(!1),[R,h]=r.useState(!1),[j,p]=r.useState(!1),[s,b]=r.useState(L),[V,E]=r.useState([]),B=async()=>{if(s)try{const t=await P.get("/customer/addresses");E(t.data)}catch(t){console.error("Error loading addresses:",t)}};r.useEffect(()=>{s?B():E([])},[s]);const{play:q,initializeAudio:O}=U();r.useEffect(()=>{const t=()=>O();return window.addEventListener("click",t,{once:!0}),window.addEventListener("touchstart",t,{once:!0}),()=>{window.removeEventListener("click",t),window.removeEventListener("touchstart",t)}},[O]),r.useEffect(()=>{const t=localStorage.getItem("cart");if(t)try{i(JSON.parse(t))}catch(o){console.error("Error parsing cart",o)}},[]),r.useEffect(()=>{localStorage.setItem("cart",JSON.stringify(n))},[n]),r.useEffect(()=>{const t=()=>{};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[m]);const J=t=>{if(N(t),t!=="all"){const o=document.getElementById(t);if(o){const l=o.getBoundingClientRect().top+window.scrollY-120;window.scrollTo({top:l,behavior:"smooth"})}}else window.scrollTo({top:0,behavior:"smooth"})},_=t=>{C(t),S(null),w(null),u(!0)},F=t=>{v!==null?(i(o=>o.map((x,l)=>l===v?t:x)),c.success("Item atualizado com sucesso!")):(i(o=>[...o,t]),c.success("Adicionado ao carrinho!"),q("success")),u(!1)},G=t=>{const o=n[t];C(o.product),S(o),w(t),u(!0),a(!1)},Y=t=>{i(o=>o.filter((x,l)=>l!==t)),c.info("Item removido do carrinho.")},D=()=>{if(!s){c.info("Para finalizar, indentifique-se primeiro."),h(!0),a(!1);return}g(!0),a(!1)},[I,g]=r.useState(!1),K=t=>{b(t)},Q=async()=>{try{await P.post("/customer/logout"),b(null),c.info("VocÃª saiu da conta."),p(!1)}catch(t){console.error(t)}},A=n.reduce((t,o)=>t+o.subtotal,0),M=n.reduce((t,o)=>t+o.quantity,0);return e.jsxs("div",{className:"min-h-screen bg-gray-50 text-gray-900 font-sans selection:bg-orange-100 selection:text-orange-900 pb-24 md:pb-0",children:[e.jsx(W,{title:d.name}),e.jsx(X,{store:d,customer:s,onOpenAuth:()=>h(!0),onOpenProfile:()=>p(!0),onOpenCart:()=>a(!0),cartCount:M}),e.jsx(Z,{categories:m,activeCategory:f,onSelectCategory:J}),e.jsx("main",{children:e.jsx("div",{className:"flex flex-col md:flex-row max-w-7xl mx-auto items-start gap-6",children:e.jsx("div",{className:"flex-1 w-full",children:e.jsx($,{categories:f==="all"?m:m.filter(t=>t.id===f),onAdd:_})})})}),e.jsx(tt,{itemCount:M,total:A,onClick:()=>a(!0)}),e.jsx(et,{isOpen:y,onClose:()=>a(!1),cart:n,onEdit:G,onRemove:Y,onCheckout:D}),e.jsx(ot,{product:H,isOpen:T,onClose:()=>u(!1),onAddToCart:F,initialValues:z}),e.jsx(rt,{isOpen:R,onClose:()=>h(!1),onLogin:K,slug:k}),e.jsx(st,{isOpen:j,onClose:()=>p(!1),customer:s,onLogout:Q,store:d}),I&&e.jsx(nt,{show:I,onClose:()=>g(!1),cart:n,customer:s,store:d,total:A,addresses:V,onSuccess:()=>{i([]),g(!1)}}),s&&!y&&!j&&e.jsx("div",{className:"fixed top-4 right-4 z-40 hidden md:block",children:e.jsxs("button",{onClick:()=>p(!0),className:"bg-white px-4 py-2 rounded-full shadow-lg border border-gray-100 flex items-center gap-2 hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center text-[#ff3d03] font-bold text-xs uppercase",children:s.name.substring(0,2)}),e.jsx("span",{className:"font-bold text-gray-700 text-sm",children:s.name.split(" ")[0]})]})})]})}export{le as default};
