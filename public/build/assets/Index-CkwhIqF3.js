import{r as i,u as w,j as o,H as W,a as j}from"./app-BeiTK8O7.js";import{A as X}from"./AuthenticatedLayout-BtNzUuQ3.js";import Y from"./GeneralSettings-Dh0S1ah4.js";import ee from"./BusinessHoursSettings-LCVGOOzB.js";import re from"./DeliverySettings-D3MvuadI.js";import oe from"./PaymentSettings-MJiQqJ6u.js";import te from"./NotificationSettings-B7vFNXvy.js";import ie from"./SystemSettings-DtjawnRt.js";import se from"./PrinterSettings-DsQeIolQ.js";import ae from"./SecuritySettings-B53nDBkS.js";import{S as ne}from"./store-C7665HT-.js";import{C as le}from"./clock-BXCeX13J.js";import{T as me}from"./truck-DGriCJtF.js";import{C as pe}from"./credit-card-CIOk5m4Q.js";import{B as de}from"./bell-BgpWhUXC.js";import{S as ue}from"./shield-DHJr3_i8.js";import{P as ce}from"./palette-DH1zPaqa.js";import{P as _e}from"./printer-CtnGjJwq.js";import{C as fe}from"./circle-check-big-BNyxzmGn.js";import{K as he}from"./transition-CBp3oMBM.js";import"./monitor-BDRP01qu.js";import"./shopping-bag-hl0p71xX.js";import"./package-CEUpl4-U.js";import"./image-BG7Ub9h9.js";import"./layout-dashboard-CSg-5LrW.js";import"./users-CZWQ_-4D.js";import"./trophy-woHj7yoO.js";import"./ticket-DneXDJ_e.js";import"./dollar-sign-mA4ymkos.js";import"./key-CQvEDJ22.js";import"./shield-check-B9isBl6q.js";import"./log-out-jkVU1Rox.js";import"./Modal-2QFZ16oO.js";import"./keyboard-B_lk7WoT.js";import"./use-sync-refs-Bh1C4zpM.js";import"./portal-Iwu6bisq.js";import"./with-selector-oSkNhEYU.js";import"./hidden-CMxKSJQJ.js";import"./switch-D1W3lKyY.js";import"./use-resolve-button-type-DRTzruyL.js";import"./menu-CgDjUqwt.js";import"./chevron-down-HJU_jkfX.js";import"./circle-play-B344MPTV.js";import"./menu-CjUl8ut6.js";import"./search-a38Vqx5c.js";import"./sun-Ka4C_pFu.js";import"./eye-CbhF-INM.js";import"./arrow-left-BwlAY5OQ.js";import"./usePushNotifications-DUwXs6sv.js";import"./zap-DLpij74m.js";import"./star-CvHf3rTp.js";import"./chevron-right-Byj7wEsR.js";import"./lock-Cduow9Aa.js";import"./MediaPickerModal-9RvT5MTO.js";import"./loader-circle-m-BePsOh.js";import"./check-2lv-AJTh.js";import"./trash-2--0rQBpLT.js";import"./upload-NYmxIbEI.js";import"./InputError-Cx8s4nJb.js";import"./phone-CTGT5ZCn.js";import"./mail-D7Hgz7-u.js";import"./map-pin-6dfgS09F.js";import"./globe-DULWZHMM.js";import"./instagram-ZNaGKETp.js";import"./WeeklySchedule-M7QG-qnh.js";import"./SecondaryButton-C6DwDxfj.js";import"./circle-alert-DXQTsyYN.js";import"./plus-CXYls96f.js";import"./square-pen-CSSPAgBe.js";import"./banknote-BnMOvwHO.js";import"./qr-code-CJD1dz57.js";import"./volume-2-BkDiARwv.js";import"./refresh-cw-BH4wleWB.js";import"./PrimaryButton-Ce1OIklR.js";import"./copy-lWBA-HTU.js";import"./smartphone-Cd7ShSlT.js";function zr({auth:N,settings:e,deliveryZones:l,motoboys:k,paymentMethods:Z,flash:be}){const[s,C]=i.useState("general"),[c,E]=i.useState(()=>e?.business_hours?typeof e.business_hours=="string"?JSON.parse(e.business_hours):e.business_hours:{monday:{is_open:!0,open_time:"18:00",close_time:"23:00"},tuesday:{is_open:!0,open_time:"18:00",close_time:"23:00"},wednesday:{is_open:!0,open_time:"18:00",close_time:"23:00"},thursday:{is_open:!0,open_time:"18:00",close_time:"23:00"},friday:{is_open:!0,open_time:"18:00",close_time:"23:59"},saturday:{is_open:!0,open_time:"18:00",close_time:"23:59"},sunday:{is_open:!0,open_time:"18:00",close_time:"23:00"}}),[_,P]=i.useState(()=>{const r={browser_notifications:!0,sound_enabled:!0,order_created:!0,order_status_updated:!0,stock_low_warning:!0};return e?.notification_settings?typeof e.notification_settings=="string"?{...r,...JSON.parse(e.notification_settings)}:{...r,...e.notification_settings}:r}),[T,D]=i.useState(l),[B,n]=i.useState(!1),[m,f]=i.useState(null),{data:t,setData:a,post:A,processing:h,errors:b,recentlySuccessful:y}=w({store_name:e?.store_name||"",phone:e?.phone||"",whatsapp:e?.whatsapp||"",email:e?.email||"",address:e?.address||"",description:e?.description||"",instagram:e?.instagram||"",facebook:e?.facebook||"",website:e?.website||"",logo_url:e?.logo_url||"",banner_url:e?.banner_url||"",logo_path:e?.logo_path||null,banner_path:e?.banner_path||null,remove_logo:!1,remove_banner:!1,business_hours:JSON.stringify(c),notification_settings:JSON.stringify(_),delivery_radius_km:e?.delivery_radius_km||5,fixed_delivery_fee:e?.fixed_delivery_fee||0,min_order_delivery:e?.min_order_delivery||0,free_delivery_min:e?.free_delivery_min||"",estimated_delivery_time:e?.estimated_delivery_time||40,default_motoboy_id:e?.default_motoboy_id||"",theme_color:e?.theme_color||"#ff3d03",printer_paper_width:e?.printer_paper_width||80,auto_print_on_confirm:e?.auto_print_on_confirm||!1,print_copies:e?.print_copies||1,enable_password_login:e?.enable_password_login??!0,enable_otp_verification:e?.enable_otp_verification??!1,enable_quick_login:e?.enable_quick_login??!0,enable_checkout_security:e?.enable_checkout_security??!0}),{data:H,setData:x,post:M,put:J,delete:ye,processing:O,errors:$,reset:p,clearErrors:g}=w({neighborhood:"",delivery_fee:"",estimated_time_min:"",is_active:!0}),[q,v]=i.useState(!1),[z,d]=i.useState(null),[F,u]=i.useState(null);i.useEffect(()=>{t.logo_url?d(t.logo_url):t.logo_path?d(`/uploads/${t.logo_path}`):d(null)},[t.logo_url,t.logo_path]),i.useEffect(()=>{t.banner_url?u(t.banner_url):t.banner_path?u(`/uploads/${t.banner_path}`):u(null)},[t.banner_url,t.banner_path]),i.useEffect(()=>{if(y){v(!0);const r=setTimeout(()=>v(!1),2e3);return()=>clearTimeout(r)}},[y]);const G=r=>{r.preventDefault(),A(route("settings.update"),{preserveScroll:!0})},I=()=>{f(null),p(),g(),n(!0)},K=r=>{f(r),x({neighborhood:r.neighborhood,delivery_fee:r.delivery_fee,estimated_time_min:r.estimated_time_min,is_active:!!r.is_active}),g(),n(!0)},L=()=>{m?J(route("delivery-zones.update",m.id),{onSuccess:()=>{n(!1),p()}}):M(route("delivery-zones.store"),{onSuccess:()=>{n(!1),p()},onError:r=>{console.error("Zone submit errors:",r)}})},R=r=>{confirm("Tem certeza que deseja excluir esta zona de entrega?")&&j.delete(route("delivery-zones.destroy",r),{preserveScroll:!0})},Q=r=>{j.put(route("delivery-zones.update",r.id),{...r,is_active:!r.is_active},{preserveScroll:!0})};i.useEffect(()=>{D(l)},[l]);const U=[{id:"general",label:"Geral",icon:ne},{id:"hours",label:"Horários",icon:le},{id:"delivery",label:"Delivery",icon:me},{id:"payment",label:"Pagamento",icon:pe},{id:"notifications",label:"Notificações",icon:de},{id:"security",label:"Segurança",icon:ue},{id:"system",label:"Sistema",icon:ce},{id:"printer",label:"Impressão",icon:_e}];return o.jsxs(X,{user:N.user,header:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Configurações"}),o.jsx(he,{show:q,enter:"transition ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:o.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 px-4 py-2 rounded-lg",children:[o.jsx(fe,{className:"h-5 w-5"}),o.jsx("span",{className:"font-medium",children:"Configurações salvas!"})]})})]}),children:[o.jsx(W,{title:"Configurações"}),o.jsx("div",{className:"py-12",children:o.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[o.jsx("div",{className:"w-full lg:w-64 flex-shrink-0",children:o.jsx("nav",{className:"flex lg:flex-col gap-2 overflow-x-auto lg:overflow-visible pb-4 lg:pb-0 bg-white dark:bg-premium-card p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-white/5",children:U.map(r=>{const V=r.icon,S=s===r.id;return o.jsxs("button",{onClick:()=>C(r.id),className:`
                                                flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 whitespace-nowrap
                                                ${S?"bg-[#ff3d03] text-white shadow-lg shadow-[#ff3d03]/30 font-bold":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-white/5 font-medium"}
                                            `,children:[o.jsx(V,{className:`h-5 w-5 ${S?"text-white":"text-gray-400"}`}),r.label]},r.id)})})}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("form",{onSubmit:G,encType:"multipart/form-data",children:[s==="general"&&o.jsx(Y,{data:t,setData:a,errors:b,logoPreview:z,bannerPreview:F}),s==="hours"&&o.jsx(ee,{businessHours:c,setBusinessHours:E,setData:a}),s==="delivery"&&o.jsx(re,{data:t,setData:a,errors:b,deliveryZones:T,zoneData:H,setZoneData:x,zoneProcessing:O,zoneErrors:$,submitZone:L,handleDeleteZone:R,toggleZoneActive:Q,openCreateZoneModal:I,openEditZoneModal:K,showZoneModal:B,setShowZoneModal:n,editingZone:m,motoboys:k}),s==="payment"&&o.jsx(oe,{paymentMethods:Z}),s==="notifications"&&o.jsx(te,{notificationSettings:_,setNotificationSettings:P,setData:a}),s==="security"&&o.jsx(ae,{data:t,setData:a}),s==="system"&&o.jsx(ie,{data:t,setData:a}),s==="printer"&&o.jsx(se,{data:t,setData:a}),s!=="payment"&&o.jsx("div",{className:"mt-8 flex justify-end",children:o.jsx("button",{type:"submit",disabled:h,className:"px-8 py-3 bg-[#ff3d03] text-white rounded-xl font-bold shadow-lg shadow-[#ff3d03]/20 hover:bg-[#e63700] transition-all disabled:opacity-50",children:h?"Salvando...":"Salvar Alterações"})})]})})]})})})]})}export{zr as default};
