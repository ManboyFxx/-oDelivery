import{r,g as ot,j as o,H as rt,d as q}from"./app-B_J8lkvq.js";import{t as u}from"./index-91nK9nk-.js";import st from"./HeroSection-Ddv1gbwM.js";import at from"./CategoryNav-B-INotQQ.js";import nt from"./ProductGrid-CxfqcNQF.js";import it from"./CartFloatingButton-D67AOFDk.js";import lt from"./CartSidebar-BglnvEf5.js";import ct from"./StoreInfoModal-DCrZNgeo.js";import dt from"./ProductModal-DFMkcf_g.js";import ut from"./AuthModal-BjD2gpi9.js";import mt from"./CustomerAreaModal-CYBhk6wY.js";import pt from"./CheckoutModal-Df9IyWRA.js";import{S as ft}from"./search-BGAmxcu_.js";import"./chevron-right-D4H5QWyD.js";import"./user-BTvSlL8r.js";import"./instagram-xBARMpdC.js";import"./message-circle-BkBmPU2W.js";import"./map-pin-BoRzD9rk.js";import"./navigation-R_bl7pl4.js";import"./ProductCard-CiEkE2t-.js";import"./plus-B3HQxRgD.js";import"./shopping-bag-DaPSf6TI.js";import"./shopping-cart-BQ_jWB0W.js";import"./pen-Dm8Ijwci.js";import"./trash-2-DC9jLvpP.js";import"./minus-e6wevEVp.js";import"./clock-DD5LZAZg.js";import"./star-1s4UmD8y.js";import"./share-2-BztSWHjk.js";import"./bell-DhFf-dhR.js";import"./gift-CCHvs5L8.js";import"./trophy-CpSHVSLI.js";import"./log-out-BCw83gpS.js";import"./check-CyZQ-pP0.js";import"./history-RlN_G7ea.js";import"./copy-oN96LBmY.js";import"./Modal-C-bZLru0.js";import"./keyboard-C8TFH4Q7.js";import"./use-sync-refs-D78moVXV.js";import"./portal-CNpUkHpF.js";import"./with-selector-FY2Gi7hl.js";import"./hidden-DWZmHSJq.js";import"./transition-DR1ycciu.js";import"./sparkles-CjHjX-SN.js";import"./AddressForm-BWnhEbux.js";import"./TextInput-CF_NLL-i.js";import"./InputLabel-DgCzgfTB.js";import"./PrimaryButton-yomEzznH.js";import"./SecondaryButton-DwxEYMC-.js";import"./loader-circle-BYYjQVCF.js";import"./arrow-left-DhEioSnZ.js";import"./circle-check-big-CMbbDAdv.js";import"./wallet-C3tQ6gIF.js";import"./ticket-DBNRMPVC.js";import"./credit-card-hB9Iy1G8.js";import"./banknote-C9X8qYDX.js";import"./switch-C3fnJxal.js";import"./use-resolve-button-type-LJuoFKDT.js";function ye({store:n,categories:f,slug:z,authCustomer:H,activePromotion:ht,availableCoupons:xt}){const[h,T]=r.useState("all"),[C,R]=r.useState(""),[i,l]=r.useState([]),[V,b]=r.useState(null),[y,m]=r.useState(!1),[v,S]=r.useState(null),[_,k]=r.useState(null),[j,c]=r.useState(!1),[B,O]=r.useState(!1),[E,x]=r.useState(!1),[g,p]=r.useState(!1),[s,I]=r.useState(H),[J,L]=r.useState([]),Q=async()=>{if(s)try{const t=await q.get("/customer/addresses");L(t.data)}catch(t){console.error("Error loading addresses:",t)}};r.useEffect(()=>{s?Q():L([])},[s]);const{play:U,initializeAudio:N}=ot();r.useEffect(()=>{const t=()=>N();return window.addEventListener("click",t,{once:!0}),window.addEventListener("touchstart",t,{once:!0}),()=>{window.removeEventListener("click",t),window.removeEventListener("touchstart",t)}},[N]),r.useEffect(()=>{const t=localStorage.getItem("cart");if(t)try{l(JSON.parse(t))}catch(e){console.error("Error parsing cart",e)}},[]),r.useEffect(()=>{localStorage.setItem("cart",JSON.stringify(i))},[i]),r.useEffect(()=>{const t=window.document.documentElement,e=n.theme_mode||"auto";e==="dark"?t.classList.add("dark"):e==="light"?t.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?t.classList.add("dark"):t.classList.remove("dark")},[n.theme_mode]),r.useEffect(()=>{const t=()=>{};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[f]);const F=t=>{if(T(t),t!=="all"){const e=document.getElementById(t);if(e){const a=e.getBoundingClientRect().top+window.scrollY-120;window.scrollTo({top:a,behavior:"smooth"})}}else window.scrollTo({top:0,behavior:"smooth"})},G=t=>{b(t),k(null),S(null),m(!0)},Y=t=>{v!==null?(l(e=>e.map((d,a)=>a===v?t:d)),u.success("Item atualizado com sucesso!")):(l(e=>[...e,t]),u.success("Adicionado ao carrinho!"),U("success")),m(!1)},D=t=>{const e=i[t];b(e.product),k(e),S(t),m(!0),c(!1)},K=t=>{l(e=>e.filter((d,a)=>a!==t)),u.info("Item removido do carrinho.")},W=()=>{if(!s){u.info("Para finalizar, indentifique-se primeiro."),x(!0),c(!1);return}w(!0),c(!1)},[A,w]=r.useState(!1),X=t=>{I(t)},Z=async()=>{try{await q.post("/customer/logout"),I(null),u.info("VocÃª saiu da conta."),p(!1)}catch(t){console.error(t)}},M=i.reduce((t,e)=>t+e.subtotal,0),P=i.reduce((t,e)=>t+e.quantity,0),$=(t,e)=>{e<1||l(d=>d.map((a,tt)=>{if(tt===t){const et=a.subtotal/a.quantity;return{...a,quantity:e,subtotal:et*e}}return a}))};return o.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-premium-dark text-gray-900 dark:text-gray-100 font-sans selection:bg-orange-100 selection:text-orange-900 pb-24 md:pb-0 transition-colors duration-300",children:[o.jsx(rt,{title:n.name}),o.jsx(st,{store:n,customer:s,onOpenAuth:()=>x(!0),onOpenProfile:()=>p(!0),onOpenCart:()=>c(!0),onOpenInfo:()=>O(!0),cartCount:P}),o.jsx("header",{className:"sticky top-0 z-40 bg-white/80 dark:bg-premium-dark/80 backdrop-blur-md shadow-sm border-b border-gray-100 dark:border-white/5 transition-colors duration-300",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-4 flex items-center justify-center gap-6",children:o.jsx("div",{className:"flex-1 max-w-2xl",children:o.jsxs("div",{className:"relative group",children:[o.jsx(ft,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-black transition-colors"}),o.jsx("input",{type:"text",placeholder:"O que vamos pedir agora?",value:C,onChange:t=>R(t.target.value),className:"w-full bg-gray-50/50 dark:bg-white/5 border border-transparent rounded-xl py-2.5 pl-11 pr-4 focus:ring-0 focus:border-gray-200 dark:focus:border-white/10 focus:bg-white dark:focus:bg-white/10 transition-all outline-none font-medium text-sm text-gray-900 dark:text-white placeholder:text-gray-950 dark:placeholder:text-gray-400"})]})})})}),o.jsx(at,{categories:f,activeCategory:h,onSelectCategory:F}),o.jsx("main",{children:o.jsx("div",{className:"flex flex-col md:flex-row max-w-7xl mx-auto items-start gap-6",children:o.jsx("div",{className:"flex-1 w-full",children:o.jsx(nt,{categories:f.map(t=>({...t,products:t.products.filter(e=>e.name.toLowerCase().includes(C.toLowerCase())&&(h==="all"||t.id===h))})).filter(t=>t.products.length>0),onAdd:G})})})}),o.jsx(it,{itemCount:P,total:M,onClick:()=>c(!0)}),o.jsx(lt,{isOpen:j,onClose:()=>c(!1),cart:i,onUpdateQuantity:$,onEdit:D,onRemove:K,onCheckout:W}),o.jsx(ct,{isOpen:B,onClose:()=>O(!1),store:n}),y&&o.jsx(dt,{product:V,isOpen:y,onClose:()=>m(!1),onAddToCart:Y,initialValues:_}),E&&o.jsx(ut,{isOpen:E,onClose:()=>x(!1),onLogin:X,slug:z}),g&&o.jsx(mt,{isOpen:g,onClose:()=>p(!1),customer:s,onLogout:Z,store:n}),A&&o.jsx(pt,{show:A,onClose:()=>w(!1),cart:i,customer:s,store:n,total:M,addresses:J,onSuccess:()=>{l([]),w(!1)}}),s&&!j&&!g&&o.jsx("div",{className:"fixed top-4 right-4 z-40 hidden md:block",children:o.jsxs("button",{onClick:()=>p(!0),className:"bg-white px-4 py-2 rounded-full shadow-lg border border-gray-100 flex items-center gap-2 hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center text-[#ff3d03] font-bold text-xs uppercase",children:s.name.substring(0,2)}),o.jsx("span",{className:"font-bold text-gray-700 text-sm",children:s.name.split(" ")[0]})]})})]})}export{ye as default};
