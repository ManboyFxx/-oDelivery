import{r,g as U,j as e,H as W,d as L}from"./app-D2VljvTw.js";import{t as c}from"./index-CzcrtSLM.js";import X from"./HeroSection-D7KRS8cz.js";import Z from"./CategoryNav-Cs0facW1.js";import $ from"./ProductGrid-CwqoMLcI.js";import tt from"./CartFloatingButton-ohxPodXo.js";import et from"./CartSidebar-DVlxh5ty.js";import ot from"./ProductModal-CsjW01HL.js";import rt from"./AuthModal-Df5SkEhP.js";import st from"./CustomerAreaModal-Bjcu2fLb.js";import nt from"./CheckoutModal-MduzkaqR.js";import"./user-Bxz_gykG.js";import"./shopping-bag-DeV0Q4uc.js";import"./map-pin-CycHX-FG.js";import"./clock-DhsNYQvR.js";import"./message-circle-Cj5I8UU2.js";import"./instagram-C7-c4zKl.js";import"./chevron-down-DopCl3ie.js";import"./navigation-DM2pniBN.js";import"./ProductCard-CzgiSv7L.js";import"./plus-XB2pHjD6.js";import"./shopping-cart-C-8XTcPB.js";import"./pen-BAXEgap9.js";import"./trash-2-D5qGatoK.js";import"./minus-C3gGHrXJ.js";import"./trophy-CGi22m5G.js";import"./gift-vj-Eal1v.js";import"./log-out-BGloaton.js";import"./check-S0IfOmyK.js";import"./history-DUE7NIPB.js";import"./Modal-CPkuO39I.js";import"./keyboard-D3GHKAuh.js";import"./use-sync-refs-DLhS85IC.js";import"./portal-KUhlGsT1.js";import"./with-selector-D8O5el8K.js";import"./hidden-DG7gvhwG.js";import"./transition-D2MB-Bkq.js";import"./sparkles-CJH1Xak9.js";import"./AddressForm-B9DzIsMe.js";import"./TextInput-DLKzFZ7C.js";import"./InputLabel-DKb6P6rq.js";import"./PrimaryButton-Cx2oxEBi.js";import"./SecondaryButton-BR6-z2BJ.js";import"./loader-circle-BhHVA8cD.js";import"./search-DgyBcvPy.js";import"./arrow-left-BOEQvvf9.js";import"./wallet-Dj4m-397.js";import"./ticket-Btog9CtY.js";import"./credit-card-CJ_Fv3xf.js";import"./banknote-Bc7LJn9d.js";import"./chevron-right-d3u1QDd_.js";import"./circle-check-big-jFZJVZKS.js";import"./switch-DTazzpId.js";import"./use-resolve-button-type-hvyh8Ega.js";function le({store:d,categories:m,slug:N,authCustomer:H,activePromotion:at,availableCoupons:it}){const[f,T]=r.useState("all"),[n,i]=r.useState([]),[z,v]=r.useState(null),[w,u]=r.useState(!1),[S,y]=r.useState(null),[R,j]=r.useState(null),[b,a]=r.useState(!1),[E,h]=r.useState(!1),[g,p]=r.useState(!1),[s,O]=r.useState(H),[V,I]=r.useState([]),B=async()=>{if(s)try{const t=await L.get("/customer/addresses");I(t.data)}catch(t){console.error("Error loading addresses:",t)}};r.useEffect(()=>{s?B():I([])},[s]);const{play:q,initializeAudio:A}=U();r.useEffect(()=>{const t=()=>A();return window.addEventListener("click",t,{once:!0}),window.addEventListener("touchstart",t,{once:!0}),()=>{window.removeEventListener("click",t),window.removeEventListener("touchstart",t)}},[A]),r.useEffect(()=>{const t=localStorage.getItem("cart");if(t)try{i(JSON.parse(t))}catch(o){console.error("Error parsing cart",o)}},[]),r.useEffect(()=>{localStorage.setItem("cart",JSON.stringify(n))},[n]),r.useEffect(()=>{const t=()=>{};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[m]);const J=t=>{if(T(t),t!=="all"){const o=document.getElementById(t);if(o){const l=o.getBoundingClientRect().top+window.scrollY-120;window.scrollTo({top:l,behavior:"smooth"})}}else window.scrollTo({top:0,behavior:"smooth"})},_=t=>{v(t),j(null),y(null),u(!0)},F=t=>{S!==null?(i(o=>o.map((C,l)=>l===S?t:C)),c.success("Item atualizado com sucesso!")):(i(o=>[...o,t]),c.success("Adicionado ao carrinho!"),q("success")),u(!1)},G=t=>{const o=n[t];v(o.product),j(o),y(t),u(!0),a(!1)},Y=t=>{i(o=>o.filter((C,l)=>l!==t)),c.info("Item removido do carrinho.")},D=()=>{if(!s){c.info("Para finalizar, indentifique-se primeiro."),h(!0),a(!1);return}x(!0),a(!1)},[M,x]=r.useState(!1),K=t=>{O(t)},Q=async()=>{try{await L.post("/customer/logout"),O(null),c.info("VocÃª saiu da conta."),p(!1)}catch(t){console.error(t)}},P=n.reduce((t,o)=>t+o.subtotal,0),k=n.reduce((t,o)=>t+o.quantity,0);return e.jsxs("div",{className:"min-h-screen bg-gray-50 text-gray-900 font-sans selection:bg-orange-100 selection:text-orange-900 pb-24 md:pb-0",children:[e.jsx(W,{title:d.name}),e.jsx(X,{store:d,customer:s,onOpenAuth:()=>h(!0),onOpenProfile:()=>p(!0),onOpenCart:()=>a(!0),cartCount:k}),e.jsx(Z,{categories:m,activeCategory:f,onSelectCategory:J}),e.jsx("main",{children:e.jsx("div",{className:"flex flex-col md:flex-row max-w-7xl mx-auto items-start gap-6",children:e.jsx("div",{className:"flex-1 w-full",children:e.jsx($,{categories:f==="all"?m:m.filter(t=>t.id===f),onAdd:_})})})}),e.jsx(tt,{itemCount:k,total:P,onClick:()=>a(!0)}),e.jsx(et,{isOpen:b,onClose:()=>a(!1),cart:n,onEdit:G,onRemove:Y,onCheckout:D}),w&&e.jsx(ot,{product:z,isOpen:w,onClose:()=>u(!1),onAddToCart:F,initialValues:R}),E&&e.jsx(rt,{isOpen:E,onClose:()=>h(!1),onLogin:K,slug:N}),g&&e.jsx(st,{isOpen:g,onClose:()=>p(!1),customer:s,onLogout:Q,store:d}),M&&e.jsx(nt,{show:M,onClose:()=>x(!1),cart:n,customer:s,store:d,total:P,addresses:V,onSuccess:()=>{i([]),x(!1)}}),s&&!b&&!g&&e.jsx("div",{className:"fixed top-4 right-4 z-40 hidden md:block",children:e.jsxs("button",{onClick:()=>p(!0),className:"bg-white px-4 py-2 rounded-full shadow-lg border border-gray-100 flex items-center gap-2 hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center text-[#ff3d03] font-bold text-xs uppercase",children:s.name.substring(0,2)}),e.jsx("span",{className:"font-bold text-gray-700 text-sm",children:s.name.split(" ")[0]})]})})]})}export{le as default};
