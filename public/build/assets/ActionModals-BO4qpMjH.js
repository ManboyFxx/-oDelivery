import{u as v,f as N,r as h,j as e,X as f}from"./app-TTZ6yfYt.js";import{M as w}from"./Modal-48PZuyWw.js";import{I as y}from"./InputLabel-CjJFwicP.js";import{T as W}from"./TextInput-KWfHzR6p.js";import{C as B}from"./circle-alert-DSLyJ3lz.js";import{C as L}from"./credit-card-DCZeHJ2i.js";import{S as M}from"./shopping-bag-D7PBG70r.js";import"./keyboard-BQvCND68.js";import"./use-sync-refs-6-NS1CTg.js";import"./portal-5ufihSUC.js";import"./with-selector-DUY2HtF-.js";import"./hidden-CExFSfQ-.js";import"./transition-Bs7QEe6q.js";function se({show:i,onClose:r,order:a}){const{data:c,setData:l,post:m,processing:x,reset:u}=v({reason:""}),{error:n}=N();h.useEffect(()=>{i&&u()},[i]);const p=g=>{g.preventDefault(),a&&m(route("orders.cancel",a.id),{onSuccess:()=>{r()},onError:()=>{n("Erro","Não foi possível cancelar o pedido.")}})};return e.jsx(w,{show:i,onClose:r,maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-xl",children:e.jsx(B,{className:"w-6 h-6 text-red-600"})}),e.jsx("h2",{className:"text-xl font-black text-gray-900 dark:text-white tracking-tight",children:"Cancelar Pedido"})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-full transition-colors",children:e.jsx(f,{className:"w-5 h-5 text-gray-400"})})]}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(y,{value:"Motivo do Cancelamento",className:"mb-2 ml-1"}),e.jsx(W,{className:"w-full rounded-2xl border-gray-200 focus:border-red-500 focus:ring-red-500 bg-gray-50 dark:bg-black/20",value:c.reason,onChange:g=>l("reason",g.target.value),placeholder:"Ex: Cliente desistiu",required:!0}),e.jsx("p",{className:"mt-2 text-xs text-gray-500 ml-1",children:"Esta ação não pode ser desfeita. O pedido será marcado como cancelado."})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-5 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-100 dark:hover:bg-white/5 transition-colors",children:"Voltar"}),e.jsx("button",{disabled:x,className:"px-5 py-2.5 rounded-xl bg-red-600 hover:bg-red-700 text-white font-bold shadow-lg shadow-red-600/20 transition-all active:scale-95 disabled:opacity-50",children:"Confirmar Cancelamento"})]})]})]})})}function ae({show:i,onClose:r,order:a}){const{data:c,setData:l,post:m,processing:x}=v({payment_method:"",payment_status:""});N(),h.useEffect(()=>{a&&l({payment_method:"cash",payment_status:a.payment_status})},[a]);const u=n=>{n.preventDefault(),a&&m(route("orders.payment",a.id),{onSuccess:()=>{r()}})};return e.jsx(w,{show:i,onClose:r,maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-xl",children:e.jsx(L,{className:"w-6 h-6 text-green-600"})}),e.jsx("h2",{className:"text-xl font-black text-gray-900 dark:text-white tracking-tight",children:"Pagamento"})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-full transition-colors",children:e.jsx(f,{className:"w-5 h-5 text-gray-400"})})]}),e.jsxs("form",{onSubmit:u,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx(y,{value:"Método de Pagamento",className:"mb-2 ml-1"}),e.jsxs("select",{value:c.payment_method,onChange:n=>l("payment_method",n.target.value),className:"w-full rounded-2xl border-gray-200 focus:border-green-500 focus:ring-green-500 bg-gray-50 dark:bg-black/20 p-2.5",children:[e.jsx("option",{value:"cash",children:"Dinheiro"}),e.jsx("option",{value:"credit_card",children:"Cartão de Crédito"}),e.jsx("option",{value:"debit_card",children:"Cartão de Débito"}),e.jsx("option",{value:"pix",children:"Pix"})]})]}),e.jsxs("div",{children:[e.jsx(y,{value:"Status do Pagamento",className:"mb-2 ml-1"}),e.jsxs("select",{value:c.payment_status,onChange:n=>l("payment_status",n.target.value),className:"w-full rounded-2xl border-gray-200 focus:border-green-500 focus:ring-green-500 bg-gray-50 dark:bg-black/20 p-2.5",children:[e.jsx("option",{value:"pending",children:"Pendente"}),e.jsx("option",{value:"paid",children:"Pago"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:r,className:"px-5 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-100 transition-colors",children:"Cancelar"}),e.jsx("button",{disabled:x,className:"px-5 py-2.5 rounded-xl bg-green-600 hover:bg-green-700 text-white font-bold shadow-lg shadow-green-600/20 transition-all active:scale-95 disabled:opacity-50",children:"Salvar Alterações"})]})]})]})})}function re({show:i,onClose:r,order:a}){const{data:c,setData:l,post:m,processing:x}=v({mode:""});N(),h.useEffect(()=>{a&&l("mode",a.mode)},[a]);const u=n=>{n.preventDefault(),a&&m(route("orders.mode",a.id),{onSuccess:()=>{r()}})};return e.jsx(w,{show:i,onClose:r,maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-xl",children:e.jsx(M,{className:"w-6 h-6 text-blue-600"})}),e.jsx("h2",{className:"text-xl font-black text-gray-900 dark:text-white tracking-tight",children:"Tipo de Pedido"})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-full transition-colors",children:e.jsx(f,{className:"w-5 h-5 text-gray-400"})})]}),e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 gap-3",children:["delivery","pickup","table"].map(n=>e.jsxs("button",{type:"button",onClick:()=>l("mode",n),className:`flex items-center justify-between p-4 rounded-2xl border-2 transition-all ${c.mode===n?"border-blue-500 bg-blue-50 text-blue-700 shadow-md transform scale-[1.02]":"border-gray-100 bg-white text-gray-500 hover:border-gray-200"}`,children:[e.jsx("span",{className:"font-bold uppercase tracking-wider text-sm",children:n==="delivery"?"Entrega":n==="pickup"?"Retirada":"Mesa"}),c.mode===n&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"})]},n))}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-5 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-100 transition-colors",children:"Cancelar"}),e.jsx("button",{disabled:x,className:"px-5 py-2.5 rounded-xl bg-blue-600 hover:bg-blue-700 text-white font-bold shadow-lg shadow-blue-600/20 transition-all active:scale-95 disabled:opacity-50",children:"Confirmar"})]})]})]})})}function ne({show:i,onClose:r,order:a,products:c=[]}){const{data:l,setData:m,put:x,processing:u,reset:n}=v({items:[]});N();const[p,g]=h.useState(""),[I,j]=h.useState({});h.useEffect(()=>{if(i&&a){const t=a.items.map(s=>({id:s.id,product_id:s.product_id,product_name:s.product_name||s.product?.name,quantity:s.quantity,notes:s.notes||"",unit_price:s.unit_price,subtotal:s.subtotal,complements:s.complements||[]}));m("items",t)}else i||(n(),g(""),j({}))},[i,a]);const R=()=>{if(!p)return;const t=c.find(E=>E.id===p);if(!t)return;const s=[];let o=0;Object.entries(I).forEach(([E,S])=>{if(S>0){let b=null;t.complement_groups?.forEach(F=>{const D=F.options?.find(T=>T.id===E);D&&(b=D)}),b&&(s.push({id:b.id,name:b.name,price:b.price,quantity:S}),o+=Number(b.price)*S)}});const d=1,C=(Number(t.price)+o)*d,_={product_id:t.id,product_name:t.name,quantity:d,notes:"",unit_price:t.price,complements_price:o,subtotal:C,is_new:!0,complements:s};m("items",[...l.items,_]),g(""),j({})},q=t=>{const s=[...l.items];s.splice(t,1),m("items",s)},P=(t,s,o)=>{const d=[...l.items];if(d[t]={...d[t],[s]:o},s==="quantity"){const C=Number(d[t].unit_price),_=Number(d[t].complements_price||0);d[t].subtotal=(C+_)*o}m("items",d)},A=(t,s)=>{j(o=>{const d={...o};return s?d[t]=1:delete d[t],d})},O=t=>{t.preventDefault(),a&&x(route("orders.update-items",a.id),{onSuccess:()=>{r()}})},k=c.find(t=>t.id===p),$=l.items.reduce((t,s)=>t+(Number(s.subtotal)||0),0);return e.jsx(w,{show:i,onClose:r,maxWidth:"2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-col md:flex-row md:items-center gap-1 md:gap-3",children:[e.jsx("div",{className:"hidden md:block p-2 bg-orange-100 rounded-xl",children:e.jsx(M,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-black text-gray-900 dark:text-white tracking-tight",children:["Editar Pedido #",a?.order_number]}),e.jsxs("p",{className:"text-sm font-medium text-gray-500",children:["Total Estimado: ",e.jsx("span",{className:"text-orange-600 font-bold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format($)})]})]})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-full transition-colors",children:e.jsx(f,{className:"w-5 h-5 text-gray-400"})})]}),e.jsxs("form",{onSubmit:O,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-black/20 p-5 rounded-[24px] border border-gray-100 dark:border-white/5 space-y-4",children:[e.jsxs("div",{className:"flex gap-3 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(y,{value:"Adicionar Produto",className:"mb-2 ml-1"}),e.jsxs("select",{className:"w-full rounded-2xl border-gray-200 focus:border-orange-500 focus:ring-orange-500 bg-white dark:bg-[#1a1b1e] p-2.5 text-sm",value:p,onChange:t=>{g(t.target.value),j({})},children:[e.jsx("option",{value:"",children:"Selecione um produto..."}),c.map(t=>e.jsxs("option",{value:t.id,children:[t.name," - R$ ",Number(t.price).toFixed(2)]},t.id))]})]}),e.jsx("button",{type:"button",onClick:R,disabled:!p,className:"px-5 py-2.5 h-[42px] flex items-center bg-orange-500 hover:bg-orange-600 text-white font-bold rounded-xl shadow-lg shadow-orange-500/20 disabled:opacity-50 transition-all active:scale-95",children:"Adicionar"})]}),k&&k.complement_groups?.length>0&&e.jsxs("div",{className:"mt-2 pl-2 border-t border-gray-200 dark:border-white/10 pt-3",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 block",children:"Adicionais / Opções"}),e.jsx("div",{className:"space-y-3 max-h-40 overflow-y-auto pr-1 scrollbar-thin",children:k.complement_groups.map(t=>e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] p-3 rounded-xl border border-gray-100 dark:border-white/5",children:[e.jsx("div",{className:"text-xs font-bold text-gray-800 dark:text-gray-200 mb-2",children:t.name}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.options?.map(s=>e.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400 cursor-pointer hover:bg-gray-50 dark:hover:bg-white/5 p-1 rounded-lg transition-colors",children:[e.jsx("input",{type:"checkbox",className:"rounded-md border-gray-300 text-orange-600 shadow-sm focus:border-orange-300 focus:ring focus:ring-orange-200 focus:ring-opacity-50",checked:!!I[s.id],onChange:o=>A(s.id,o.target.checked)}),e.jsxs("span",{children:[s.name," (+R$ ",Number(s.price).toFixed(2),")"]})]},s.id))})]},t.id))})]})]}),e.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-1 pl-1",children:l.items.length===0?e.jsx("div",{className:"text-center text-gray-400 py-8 bg-gray-50 rounded-[24px] border border-dashed border-gray-200",children:"Nenhum item no pedido."}):l.items.map((t,s)=>e.jsxs("div",{className:"group flex gap-4 items-start p-4 bg-white dark:bg-[#1a1b1e] border border-gray-100 dark:border-white/5 rounded-2xl shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"w-16",children:[e.jsx(y,{value:"Qtd",className:"text-[10px] ml-1 mb-1"}),e.jsx("input",{type:"number",min:"1",className:"w-full border-gray-200 rounded-xl shadow-sm text-sm p-2 text-center font-bold focus:border-orange-500 focus:ring-orange-500",value:t.quantity,onChange:o=>P(s,"quantity",parseInt(o.target.value)||1)})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-bold text-gray-900 dark:text-white text-sm",children:t.product_name}),t.complements&&t.complements.length>0&&e.jsx("div",{className:"text-[11px] text-gray-500 mt-1 leading-snug bg-gray-50 inline-block px-2 py-1 rounded-lg",children:t.complements.map(o=>`+ ${o.quantity>1?o.quantity+"x ":""}${o.name}`).join(", ")}),e.jsxs("div",{className:"text-xs font-bold text-orange-600 mt-1",children:["R$ ",Number(t.subtotal).toFixed(2)]}),e.jsx("input",{type:"text",placeholder:"Observação do item...",className:"w-full mt-2 border-none bg-gray-50 dark:bg-black/20 rounded-xl text-xs p-2 focus:ring-1 focus:ring-orange-500 transition-all placeholder:text-gray-400",value:t.notes,onChange:o=>P(s,"notes",o.target.value)})]}),e.jsx("div",{className:"pt-1",children:e.jsx("button",{type:"button",onClick:()=>q(s),className:"p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all",title:"Remover item",children:e.jsx(f,{className:"h-5 w-5"})})})]},s))}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-100 dark:border-white/5",children:[e.jsx("button",{type:"button",onClick:r,className:"px-5 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-100 transition-colors",children:"Cancelar"}),e.jsx("button",{disabled:u,className:"px-5 py-2.5 rounded-xl bg-orange-600 hover:bg-orange-700 text-white font-bold shadow-lg shadow-orange-600/20 transition-all active:scale-95 disabled:opacity-50",children:"Salvar Alterações"})]})]})]})})}export{se as CancelOrderModal,re as ChangeModeModal,ae as ChangePaymentModal,ne as EditOrderModal};
