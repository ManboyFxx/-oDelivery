import{c as N,r as u,u as v,j as e,H as k,L as p,e as d}from"./app-DbPWLEQz.js";import{A as w}from"./AuthenticatedLayout-Dks_vcgM.js";import{I as n}from"./InputLabel-CH2RrfB4.js";import{T as x}from"./TextInput-Kov7Ul3A.js";import{P as C}from"./PrimaryButton-k0J9y0OF.js";import{U as h}from"./user-CKed5UKK.js";import{A as P}from"./arrow-left-DxvvzU6N.js";import{M as g}from"./map-pin-DSyt0YTv.js";import{H as _}from"./history-dBGk7J4Y.js";import{P as E}from"./phone-BiEJVTcE.js";import{M as D}from"./mail-CtcaszKP.js";import{S}from"./save-B_wO0cqo.js";import"./monitor-Cn7RiXhp.js";import"./shopping-bag-X5OyDO5n.js";import"./package-BoeND7Xk.js";import"./image-BXIRfbPU.js";import"./layout-dashboard-9BlQdCEh.js";import"./credit-card-eq2zZePW.js";import"./users-Da7bwuRb.js";import"./trophy-giYxlz_m.js";import"./ticket-DZADkc1G.js";import"./store-xDwxUMXW.js";import"./dollar-sign-axyloPHj.js";import"./key-BmQ0wdbL.js";import"./shield-check-Cs5LKv5H.js";import"./log-out-DKUiWj6w.js";import"./transition-DsAP_ylf.js";import"./use-sync-refs-DmsoagOF.js";import"./Modal-DXiZdhLA.js";import"./keyboard-DuHvJwgB.js";import"./portal-D4W2IGS0.js";import"./with-selector-o_2PE-6E.js";import"./hidden-BMuDQJ4j.js";import"./truck-NJXhfwgR.js";import"./switch-DX0liJHV.js";import"./use-resolve-button-type-CEmk7fhE.js";import"./menu-CipS6wKn.js";import"./chevron-down-DsLcFt0A.js";import"./clock-S-42N5z_.js";import"./circle-play-CIcDIZBj.js";import"./menu-DyhUAhI6.js";import"./search-DCnAb7aP.js";import"./sun-tgyWBYtU.js";import"./bell-BDtw9j92.js";import"./eye-CRm1aZoK.js";import"./usePushNotifications-Bw5K8vt_.js";import"./zap-pJsdy0H3.js";import"./star-Dj0UldL-.js";import"./chevron-right-CBRKy-mZ.js";import"./lock-NMhhQP24.js";const A=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],L=N("receipt",A);function De({customer:a}){const[s,l]=u.useState("details"),{data:i,setData:o,put:y,processing:f,errors:r}=v({name:a.name,email:a.email||"",phone:a.phone,address:a.address||""}),j=t=>{t.preventDefault(),y(route("customers.update",a.id))},c=t=>new Date(t).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),b=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t);return e.jsxs(w,{children:[e.jsx(k,{title:`Editar Cliente - ${a.name}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(h,{className:"h-6 w-6 text-[#ff3d03]"}),a.name]}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Gerenciamento completo do cliente"})]}),e.jsxs(p,{href:route("customers.index"),className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white flex items-center gap-1 text-sm font-medium",children:[e.jsx(P,{className:"h-4 w-4"})," Voltar"]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"lg:w-64 flex-shrink-0",children:e.jsx("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 overflow-hidden",children:e.jsxs("nav",{className:"flex flex-col",children:[e.jsxs("button",{onClick:()=>l("details"),className:d("flex items-center gap-3 px-4 py-3 text-sm font-medium transition-colors border-l-2",s==="details"?"bg-[#ff3d03]/10 text-[#ff3d03] border-[#ff3d03] dark:bg-[#ff3d03] dark:text-white dark:border-[#ff3d03]":"text-gray-600 border-transparent hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"),children:[e.jsx(h,{className:"h-4 w-4"})," Dados Pessoais"]}),e.jsxs("button",{onClick:()=>l("addresses"),className:d("flex items-center gap-3 px-4 py-3 text-sm font-medium transition-colors border-l-2",s==="addresses"?"bg-[#ff3d03]/10 text-[#ff3d03] border-[#ff3d03] dark:bg-[#ff3d03] dark:text-white dark:border-[#ff3d03]":"text-gray-600 border-transparent hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"),children:[e.jsx(g,{className:"h-4 w-4"})," Endereços"]}),e.jsxs("button",{onClick:()=>l("orders"),className:d("flex items-center gap-3 px-4 py-3 text-sm font-medium transition-colors border-l-2",s==="orders"?"bg-[#ff3d03]/10 text-[#ff3d03] border-[#ff3d03] dark:bg-[#ff3d03] dark:text-white dark:border-[#ff3d03]":"text-gray-600 border-transparent hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"),children:[e.jsx(L,{className:"h-4 w-4"})," Histórico de Pedidos"]}),e.jsxs("button",{onClick:()=>l("loyalty"),className:d("flex items-center gap-3 px-4 py-3 text-sm font-medium transition-colors border-l-2",s==="loyalty"?"bg-[#ff3d03]/10 text-[#ff3d03] border-[#ff3d03] dark:bg-[#ff3d03] dark:text-white dark:border-[#ff3d03]":"text-gray-600 border-transparent hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"),children:[e.jsx(_,{className:"h-4 w-4"})," Fidelidade (",a.loyalty_points," pts)"]})]})})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 p-6",children:[s==="details"&&e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(n,{value:"Nome Completo"}),e.jsx(x,{value:i.name,onChange:t=>o("name",t.target.value),className:"w-full mt-1",required:!0}),r.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.name})]}),e.jsxs("div",{children:[e.jsx(n,{value:"Telefone (WhatsApp)"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(E,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(x,{value:i.phone,onChange:t=>o("phone",t.target.value),className:"w-full pl-9",required:!0})]}),r.phone&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.phone})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(n,{value:"Email (Opcional)"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(D,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(x,{type:"email",value:i.email,onChange:t=>o("email",t.target.value),className:"w-full pl-9"})]}),r.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.email})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(n,{value:"Endereço Principal (Legado)"}),e.jsx(x,{value:i.address,onChange:t=>o("address",t.target.value),className:"w-full mt-1"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Este campo é mantido para compatibilidade. Use a aba "Endereços" para gestão completa.'})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-100 dark:border-gray-800",children:e.jsxs(C,{disabled:f,className:"gap-2",children:[e.jsx(S,{className:"h-4 w-4"})," Salvar Alterações"]})})]}),s==="addresses"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-bold dark:text-white",children:"Endereços Cadastrados"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Gestão de múltiplos endereços (Em breve)"})]}),a.addresses&&a.addresses.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.addresses.map(t=>e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg p-4 relative",children:[t.is_default&&e.jsx("span",{className:"absolute top-2 right-2 bg-green-100 text-green-800 text-xs px-2 py-0.5 rounded-full dark:bg-green-900/20 dark:text-green-400",children:"Padrão"}),e.jsxs("p",{className:"font-bold dark:text-white",children:[t.street,", ",t.number]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.neighborhood," - ",t.city]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["CEP: ",t.zip_code]})]},t.id))}):e.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsx(g,{className:"h-10 w-10 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Nenhum endereço estruturado cadastrado."}),e.jsx("p",{className:"text-sm text-gray-400",children:"O cliente pode apenas ter o endereço legado."})]})]}),s==="orders"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold dark:text-white mb-4",children:"Histórico de Pedidos"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-gray-500 dark:text-gray-400 uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"ID"}),e.jsx("th",{className:"px-4 py-2",children:"Data"}),e.jsx("th",{className:"px-4 py-2",children:"Status"}),e.jsx("th",{className:"px-4 py-2",children:"Total"}),e.jsx("th",{className:"px-4 py-2",children:"Itens"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:a.orders&&a.orders.length>0?a.orders.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[e.jsxs("td",{className:"px-4 py-3 font-mono text-xs text-gray-500",children:["#",t.id.substring(0,8)]}),e.jsx("td",{className:"px-4 py-3 dark:text-gray-300",children:c(t.created_at)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:d("px-2 py-1 rounded-full text-xs font-bold capitalize",t.status==="completed"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":t.status==="cancelled"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"),children:t.status})}),e.jsx("td",{className:"px-4 py-3 font-bold dark:text-white",children:b(t.total)}),e.jsx("td",{className:"px-4 py-3 text-gray-500 dark:text-gray-400 text-xs",children:t.items.map(m=>`${m.quantity}x ${m.product_name}`).join(", ")})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"Nenhum pedido realizado."})})})]})})]}),s==="loyalty"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-bold dark:text-white",children:"Extrato de Pontos"}),e.jsxs("div",{className:"bg-[#ff3d03]/10 text-[#ff3d03] px-3 py-1 rounded-full font-bold text-sm",children:["Saldo Atual: ",a.loyalty_points," pts"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-gray-500 dark:text-gray-400 uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Data"}),e.jsx("th",{className:"px-4 py-2",children:"Descrição"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Pontos"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:a.loyalty_history&&a.loyalty_history.length>0?a.loyalty_history.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[e.jsx("td",{className:"px-4 py-3 dark:text-gray-300",children:c(t.created_at)}),e.jsx("td",{className:"px-4 py-3 dark:text-gray-300",children:t.description}),e.jsxs("td",{className:d("px-4 py-3 text-right font-bold",t.type==="earn"?"text-green-600":"text-red-600"),children:[t.type==="earn"?"+":"-",t.points]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-gray-500",children:"Nenhuma movimentação de pontos."})})})]})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-gray-800 flex justify-end",children:e.jsx(p,{href:route("loyalty.index"),className:"text-[#ff3d03] text-sm hover:underline font-medium",children:"Gerenciar/Ajustar Pontos →"})})]})]})})]})]})]})}export{De as default};
