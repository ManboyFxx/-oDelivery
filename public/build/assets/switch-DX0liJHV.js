import{Z as ne,V as le,u as ae,N as oe,$ as ue,a as se,w as ce,e as ie,s as fe}from"./use-resolve-button-type-CEmk7fhE.js";import{r as l,i as P,R as u}from"./app-DbPWLEQz.js";import{a as h,p as F,m as de,Y as me,K as C,y as pe,V as he}from"./use-sync-refs-DmsoagOF.js";import{M as be,H as ge,m as ve,b as ye,w as $e,a as Se,o as w}from"./keyboard-DuHvJwgB.js";import{f as O,s as T}from"./hidden-BMuDQJ4j.js";function Ee(t,r,e){let[n,a]=l.useState(e),o=t!==void 0,c=l.useRef(o),s=l.useRef(!1),i=l.useRef(!1);return o&&!c.current&&!s.current?(s.current=!0,c.current=o,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!o&&c.current&&!i.current&&(i.current=!0,c.current=o,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[o?t:n,h(d=>(o||P.flushSync(()=>a(d)),r?.(d)))]}function xe(t){let[r]=l.useState(t);return r}function D(t={},r=null,e=[]){for(let[n,a]of Object.entries(t))R(e,I(r,n),a);return e}function I(t,r){return t?t+"["+r+"]":r}function R(t,r,e){if(Array.isArray(e))for(let[n,a]of e.entries())R(t,I(r,n.toString()),a);else e instanceof Date?t.push([r,e.toISOString()]):typeof e=="boolean"?t.push([r,e?"1":"0"]):typeof e=="string"?t.push([r,e]):typeof e=="number"?t.push([r,`${e}`]):e==null?t.push([r,""]):we(e)&&!l.isValidElement(e)&&D(e,r,t)}function ke(t){var r,e;let n=(r=t?.form)!=null?r:t.closest("form");if(n){for(let a of n.elements)if(a!==t&&(a.tagName==="INPUT"&&a.type==="submit"||a.tagName==="BUTTON"&&a.type==="submit"||a.nodeName==="INPUT"&&a.type==="image")){a.click();return}(e=n.requestSubmit)==null||e.call(n)}}function we(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let r=Object.getPrototypeOf(t);return r===null||Object.getPrototypeOf(r)===null}let Pe=l.createContext(null);function Fe({children:t}){let r=l.useContext(Pe);if(!r)return u.createElement(u.Fragment,null,t);let{target:e}=r;return e?P.createPortal(u.createElement(u.Fragment,null,t),e):null}function Ce({data:t,form:r,disabled:e,onReset:n,overrides:a}){let[o,c]=l.useState(null),s=F();return l.useEffect(()=>{if(n&&o)return s.addEventListener(o,"reset",n)},[o,r,n]),u.createElement(Fe,null,u.createElement(Oe,{setForm:c,formId:r}),D(t).map(([i,d])=>u.createElement(O,{features:T.Hidden,...de({key:i,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:r,disabled:e,name:i,value:d,...a})})))}function Oe({setForm:t,formId:r}){return l.useEffect(()=>{if(r){let e=document.getElementById(r);e&&t(e)}},[t,r]),r?null:u.createElement(O,{features:T.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:e=>{if(!e)return;let n=e.closest("form");n&&t(n)}})}let S=l.createContext(null);S.displayName="GroupContext";let Te=l.Fragment;function De(t){var r;let[e,n]=l.useState(null),[a,o]=le(),[c,s]=ge(),i=l.useMemo(()=>({switch:e,setSwitch:n}),[e,n]),d={},y=t,b=C();return u.createElement(s,{name:"Switch.Description",value:c},u.createElement(o,{name:"Switch.Label",value:a,props:{htmlFor:(r=i.switch)==null?void 0:r.id,onClick(g){e&&(ve(g.currentTarget)&&g.preventDefault(),e.click(),e.focus({preventScroll:!0}))}}},u.createElement(S.Provider,{value:i},b({ourProps:d,theirProps:y,slot:{},defaultTag:Te,name:"Switch.Group"}))))}let Ie="button";function Re(t,r){var e;let n=l.useId(),a=ae(),o=ye(),{id:c=a||`headlessui-switch-${n}`,disabled:s=o||!1,checked:i,defaultChecked:d,onChange:y,name:b,value:g,form:j,autoFocus:$=!1,...N}=t,E=l.useContext(S),[A,V]=l.useState(null),G=l.useRef(null),H=pe(G,r,E===null?null:E.setSwitch,V),m=xe(d),[v,p]=Ee(i,y,m??!1),L=F(),[U,x]=l.useState(!1),k=h(()=>{x(!0),p?.(!v),L.nextFrame(()=>{x(!1)})}),K=h(f=>{if(fe(f.currentTarget))return f.preventDefault();f.preventDefault(),k()}),B=h(f=>{f.key===w.Space?(f.preventDefault(),k()):f.key===w.Enter&&ke(f.currentTarget)}),M=h(f=>f.preventDefault()),q=oe(),J=$e(),{isFocusVisible:W,focusProps:X}=ue({autoFocus:$}),{isHovered:Y,hoverProps:Z}=se({isDisabled:s}),{pressed:_,pressProps:z}=ce({disabled:s}),Q=Se({checked:v,disabled:s,hover:Y,focus:W,active:_,autofocus:$,changing:U}),ee=he({id:c,ref:H,role:"switch",type:ie(t,A),tabIndex:t.tabIndex===-1?0:(e=t.tabIndex)!=null?e:0,"aria-checked":v,"aria-labelledby":q,"aria-describedby":J,disabled:s||void 0,autoFocus:$,onClick:K,onKeyUp:B,onKeyPress:M},X,Z,z),te=l.useCallback(()=>{if(m!==void 0)return p?.(m)},[p,m]),re=C();return u.createElement(u.Fragment,null,b!=null&&u.createElement(Ce,{disabled:s,data:{[b]:g||"on"},overrides:{type:"checkbox",checked:v},form:j,onReset:te}),re({ourProps:ee,theirProps:N,slot:Q,defaultTag:Ie,name:"Switch"}))}let je=me(Re),Ne=De,Ae=ne,Ve=be,Be=Object.assign(je,{Group:Ne,Label:Ae,Description:Ve});export{Be as t};
