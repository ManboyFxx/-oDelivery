import{r as t,u as Z,j as o,H as oe,a as l}from"./app-B9gtViVy.js";import{A as te}from"./AuthenticatedLayout-Bo80Bqhz.js";import ie from"./GeneralSettings-BMHu4sm1.js";import se from"./BusinessHoursSettings-D1sicioa.js";import ae from"./DeliverySettings-CuqtZZlk.js";import ne from"./PaymentSettings-3lkW1rjh.js";import le from"./NotificationSettings-DbTECtJn.js";import me from"./SystemSettings-CxX_G4Of.js";import de from"./PrinterSettings-BlOKV9QT.js";import pe from"./SecuritySettings-B7eqscJo.js";import{S as ce}from"./store-C_D7kVff.js";import{C as ue}from"./clock-DI_Wwxgd.js";import{T as fe}from"./truck-DfjlcWKF.js";import{C as _e}from"./credit-card-18wcj3yn.js";import{B as he}from"./bell-DHDIdkCt.js";import{S as ve}from"./shield-CIyaWghR.js";import{P as ge}from"./palette-B3KptqQH.js";import{P as ye}from"./printer-B3sQnY1y.js";import{C as be}from"./circle-check-big-DqBNuNzr.js";import{K as xe}from"./transition-YGiZBht7.js";import"./monitor-QjUUOgIo.js";import"./shopping-bag-sASrHuCS.js";import"./package-Gg_M5_vH.js";import"./image-icu5S7jB.js";import"./layout-dashboard-DA3N-KTy.js";import"./trophy-Ch1k1ZhV.js";import"./ticket-fUx25vSt.js";import"./dollar-sign-84IazjXL.js";import"./key-C6uuaUCv.js";import"./shield-check-Bjndzdci.js";import"./log-out-CDSiAepq.js";import"./Modal-BL7H72at.js";import"./keyboard-B1A1vkKm.js";import"./use-sync-refs-BOPwmgUw.js";import"./portal-DG5HsT3O.js";import"./with-selector-30sR8F9s.js";import"./hidden-EorsTIUM.js";import"./switch-C1mVYhWx.js";import"./use-resolve-button-type-ByM8bgjc.js";import"./menu-3AOsGCJ1.js";import"./chevron-down-Cybe6Rxz.js";import"./menu-D46QcRtC.js";import"./search-CMtzBOH9.js";import"./useAudio-BHUXML8-.js";import"./eye-wEr0eyfP.js";import"./arrow-left-CJjmVAHq.js";import"./phone-BzkP5m2k.js";import"./mail-BNc3bKh6.js";import"./map-pin-D_In3IQT.js";import"./globe--prmEXgG.js";import"./instagram-Cc2XYFbG.js";import"./trash-2-Amv3kldw.js";import"./upload-0Xg80Ont.js";import"./WeeklySchedule-Cc0KKG3l.js";import"./SecondaryButton-CBt6MEka.js";import"./circle-alert-Dwr4iblw.js";import"./plus-BLztYt6j.js";import"./square-pen-Bbcc2JK9.js";import"./loader-circle-CK1MGoyD.js";import"./banknote-BeOsEHqr.js";import"./qr-code-D5vcADt-.js";import"./volume-2-IkB1e9pT.js";import"./refresh-cw-XqKqh70P.js";import"./PrimaryButton-CMe0yobj.js";import"./check-WocHE8PR.js";import"./copy-BOjoddwq.js";import"./smartphone-BQP7Pkxp.js";import"./lock-CF__qH8Z.js";function Lr({auth:D,settings:e,deliveryZones:c,motoboys:Se,paymentMethods:C,flash:we}){const[i,P]=t.useState("general"),[E,h]=t.useState(!1),[T,v]=t.useState(e?.logo_path?`/storage/${e.logo_path}`:e?.logo_url||null),[B,g]=t.useState(e?.banner_path?`/storage/${e.banner_path}`:e?.banner_url||null),[y,A]=t.useState(()=>e?.business_hours?typeof e.business_hours=="string"?JSON.parse(e.business_hours):e.business_hours:{monday:{is_open:!0,open_time:"18:00",close_time:"23:00"},tuesday:{is_open:!0,open_time:"18:00",close_time:"23:00"},wednesday:{is_open:!0,open_time:"18:00",close_time:"23:00"},thursday:{is_open:!0,open_time:"18:00",close_time:"23:00"},friday:{is_open:!0,open_time:"18:00",close_time:"23:59"},saturday:{is_open:!0,open_time:"18:00",close_time:"23:59"},sunday:{is_open:!0,open_time:"18:00",close_time:"23:00"}}),[b,F]=t.useState(()=>{const r={browser_notifications:!0,sound_enabled:!0,order_created:!0,order_status_updated:!0,stock_low_warning:!0};return e?.notification_settings?typeof e.notification_settings=="string"?{...r,...JSON.parse(e.notification_settings)}:{...r,...e.notification_settings}:r}),[R,H]=t.useState(c),[M,m]=t.useState(!1),[u,x]=t.useState(null),{data:d,setData:n,post:L,processing:S,errors:w,recentlySuccessful:j}=Z({store_name:e?.store_name||"",phone:e?.phone||"",whatsapp:e?.whatsapp||"",email:e?.email||"",address:e?.address||"",description:e?.description||"",instagram:e?.instagram||"",facebook:e?.facebook||"",website:e?.website||"",logo:null,banner:null,remove_logo:!1,remove_banner:!1,business_hours:JSON.stringify(y),notification_settings:JSON.stringify(b),delivery_radius_km:e?.delivery_radius_km||5,fixed_delivery_fee:e?.fixed_delivery_fee||0,min_order_delivery:e?.min_order_delivery||0,free_delivery_min:e?.free_delivery_min||"",estimated_delivery_time:e?.estimated_delivery_time||40,default_motoboy_id:e?.default_motoboy_id||"",theme_color:e?.theme_color||"#ff3d03",printer_paper_width:e?.printer_paper_width||80,auto_print_on_confirm:e?.auto_print_on_confirm||!1,print_copies:e?.print_copies||1,enable_password_login:e?.enable_password_login??!0,enable_otp_verification:e?.enable_otp_verification??!1,enable_quick_login:e?.enable_quick_login??!0,enable_checkout_security:e?.enable_checkout_security??!0}),{data:J,setData:N,post:O,put:U,delete:je,processing:$,errors:q,reset:f,clearErrors:k}=Z({neighborhood:"",delivery_fee:"",estimated_time_min:"",is_active:!0});t.useEffect(()=>{if(j){h(!0);const r=setTimeout(()=>h(!1),2e3);return()=>clearTimeout(r)}},[j]);const z=r=>{const s=r.target.files?.[0];if(!s)return;const a=new FileReader;a.onload=_=>v(_.target?.result),a.readAsDataURL(s);const p=new FormData;p.append("logo",s),l.post(route("settings.upload-logo"),p,{preserveScroll:!0})},G=r=>{const s=r.target.files?.[0];if(!s)return;const a=new FileReader;a.onload=_=>g(_.target?.result),a.readAsDataURL(s);const p=new FormData;p.append("banner",s),l.post(route("settings.upload-banner"),p,{preserveScroll:!0})},I=()=>{v(null),l.delete(route("settings.remove-logo"),{preserveScroll:!0})},K=()=>{g(null),l.delete(route("settings.remove-banner"),{preserveScroll:!0})},Q=r=>{r.preventDefault(),L(route("settings.update"),{forceFormData:!0,preserveScroll:!0})},V=()=>{x(null),f(),k(),m(!0)},W=r=>{x(r),N({neighborhood:r.neighborhood,delivery_fee:r.delivery_fee,estimated_time_min:r.estimated_time_min,is_active:!!r.is_active}),k(),m(!0)},X=()=>{u?U(route("delivery-zones.update",u.id),{onSuccess:()=>{m(!1),f()}}):O(route("delivery-zones.store"),{onSuccess:()=>{m(!1),f()},onError:r=>{console.error("Zone submit errors:",r)}})},Y=r=>{confirm("Tem certeza que deseja excluir esta zona de entrega?")&&l.delete(route("delivery-zones.destroy",r),{preserveScroll:!0})},ee=r=>{l.put(route("delivery-zones.update",r.id),{...r,is_active:!r.is_active},{preserveScroll:!0})};t.useEffect(()=>{H(c)},[c]);const re=[{id:"general",label:"Geral",icon:ce},{id:"hours",label:"Horários",icon:ue},{id:"delivery",label:"Delivery",icon:fe},{id:"payment",label:"Pagamento",icon:_e},{id:"notifications",label:"Notificações",icon:he},{id:"security",label:"Segurança",icon:ve},{id:"system",label:"Sistema",icon:ge},{id:"printer",label:"Impressão",icon:ye}];return o.jsxs(te,{user:D.user,header:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Configurações"}),o.jsx(xe,{show:E,enter:"transition ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:o.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 px-4 py-2 rounded-lg",children:[o.jsx(be,{className:"h-5 w-5"}),o.jsx("span",{className:"font-medium",children:"Configurações salvas!"})]})})]}),children:[o.jsx(oe,{title:"Configurações"}),o.jsx("div",{className:"py-12",children:o.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[o.jsx("div",{className:"w-full lg:w-64 flex-shrink-0",children:o.jsx("nav",{className:"flex lg:flex-col gap-2 overflow-x-auto lg:overflow-visible pb-4 lg:pb-0 bg-white dark:bg-premium-card p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-white/5",children:re.map(r=>{const s=r.icon,a=i===r.id;return o.jsxs("button",{onClick:()=>P(r.id),className:`
                                                flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 whitespace-nowrap
                                                ${a?"bg-[#ff3d03] text-white shadow-lg shadow-[#ff3d03]/30 font-bold":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-white/5 font-medium"}
                                            `,children:[o.jsx(s,{className:`h-5 w-5 ${a?"text-white":"text-gray-400"}`}),r.label]},r.id)})})}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("form",{onSubmit:Q,encType:"multipart/form-data",children:[i==="general"&&o.jsx(ie,{data:d,setData:n,errors:w,logoPreview:T,bannerPreview:B,handleLogoUpload:z,handleBannerUpload:G,handleLogoRemove:I,handleBannerRemove:K}),i==="hours"&&o.jsx(se,{businessHours:y,setBusinessHours:A,setData:n}),i==="delivery"&&o.jsx(ae,{data:d,setData:n,errors:w,deliveryZones:R,zoneData:J,setZoneData:N,zoneProcessing:$,zoneErrors:q,submitZone:X,handleDeleteZone:Y,toggleZoneActive:ee,openCreateZoneModal:V,openEditZoneModal:W,showZoneModal:M,setShowZoneModal:m,editingZone:u}),i==="payment"&&o.jsx(ne,{paymentMethods:C}),i==="notifications"&&o.jsx(le,{notificationSettings:b,setNotificationSettings:F,setData:n}),i==="security"&&o.jsx(pe,{data:d,setData:n}),i==="system"&&o.jsx(me,{data:d,setData:n}),i==="printer"&&o.jsx(de,{data:d,setData:n}),i!=="payment"&&o.jsx("div",{className:"mt-8 flex justify-end",children:o.jsx("button",{type:"submit",disabled:S,className:"px-8 py-3 bg-[#ff3d03] text-white rounded-xl font-bold shadow-lg shadow-[#ff3d03]/20 hover:bg-[#e63700] transition-all disabled:opacity-50",children:S?"Salvando...":"Salvar Alterações"})})]})})]})})})]})}export{Lr as default};
