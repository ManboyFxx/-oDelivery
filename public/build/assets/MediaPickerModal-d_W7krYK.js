import{r as i,e as D,j as e,X as O}from"./app-CfsA_FAB.js";import{I as g}from"./image-D3jR8wWN.js";import{S as w}from"./search-B943a_2S.js";import{L as C}from"./loader-circle-CIOhxg8B.js";import{C as B}from"./check-DTmvofCE.js";import{T as $}from"./trash-2-CpWKNIhB.js";import{U as j}from"./upload-2yn_ByxP.js";function F(r){return r<1024?`${r} B`:r<1024*1024?`${(r/1024).toFixed(1)} KB`:`${(r/(1024*1024)).toFixed(1)} MB`}function J({open:r,onClose:n,onSelect:M,currentUrl:L}){const[m,h]=i.useState([]),[V,x]=i.useState(!1),[k,N]=i.useState(!1),[o,c]=i.useState(null),[v,b]=i.useState(""),[f,a]=i.useState("library"),[S,u]=i.useState(!1),d=i.useCallback(async()=>{x(!0);try{const s=await D.get("/api/media");h(s.data)}finally{x(!1)}},[]);i.useEffect(()=>{r&&(d(),c(null),b(""),a("library"))},[r,d]);const y=async s=>{if(s?.length){N(!0);try{for(const t of Array.from(s)){const l=new FormData;l.append("file",t),await D.post("/media",l,{headers:{"Content-Type":"multipart/form-data"}})}await d(),a("library")}finally{N(!1)}}},U=async(s,t)=>{t.stopPropagation(),confirm("Deletar esta imagem?")&&(await D.delete(`/media/${s}`),h(l=>l.filter(E=>E.id!==s)),o===s&&c(null))},P=()=>{const s=m.find(t=>t.id===o);s&&(M(s),n())},p=m.filter(s=>s.original_name.toLowerCase().includes(v.toLowerCase()));return r?e.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxDEV("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxDEV("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-white/10",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV(g,{className:"h-5 w-5 text-orange-500"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:102,columnNumber:25},this),e.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Banco de Imagens"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:103,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:101,columnNumber:21},this),e.jsxDEV("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 dark:hover:text-white transition-colors",children:e.jsxDEV(O,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:106,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:105,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:100,columnNumber:17},this),e.jsxDEV("div",{className:"flex border-b border-gray-200 dark:border-white/10 px-6",children:["library","upload"].map(s=>e.jsxDEV("button",{onClick:()=>a(s),className:`py-3 px-4 text-sm font-medium border-b-2 transition-colors ${f===s?"border-orange-500 text-orange-600 dark:text-orange-400":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:s==="library"?`Biblioteca (${m.length})`:"Upload"},s,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:113,columnNumber:25},this))},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:111,columnNumber:17},this),e.jsxDEV("div",{className:"flex-1 overflow-hidden flex flex-col",children:f==="library"?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"px-6 py-3 border-b border-gray-100 dark:border-white/5",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:134,columnNumber:37},this),e.jsxDEV("input",{value:v,onChange:s=>b(s.target.value),placeholder:"Buscar imagens...",className:"w-full pl-9 pr-4 py-2 text-sm bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 text-gray-900 dark:text-white"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:135,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:133,columnNumber:33},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:132,columnNumber:29},this),e.jsxDEV("div",{className:"flex-1 overflow-y-auto p-6",children:V?e.jsxDEV("div",{className:"flex items-center justify-center h-48",children:e.jsxDEV(C,{className:"h-8 w-8 animate-spin text-orange-500"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:148,columnNumber:41},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:147,columnNumber:37},this):p.length===0?e.jsxDEV("div",{className:"flex flex-col items-center justify-center h-48 text-gray-400",children:[e.jsxDEV(g,{className:"h-12 w-12 mb-3 opacity-30"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:152,columnNumber:41},this),e.jsxDEV("p",{className:"text-sm",children:"Nenhuma imagem encontrada"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:153,columnNumber:41},this),e.jsxDEV("button",{onClick:()=>a("upload"),className:"mt-3 text-sm text-orange-500 hover:underline",children:"Fazer upload"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:154,columnNumber:41},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:151,columnNumber:37},this):e.jsxDEV("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:p.map(s=>e.jsxDEV("div",{onClick:()=>c(s.id===o?null:s.id),className:`relative group cursor-pointer rounded-xl overflow-hidden aspect-square border-2 transition-all ${o===s.id?"border-orange-500 ring-2 ring-orange-500/30":"border-transparent hover:border-gray-300 dark:hover:border-white/20"}`,children:[e.jsxDEV("img",{src:s.url,alt:s.original_name,className:"w-full h-full object-cover"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:170,columnNumber:49},this),o===s.id&&e.jsxDEV("div",{className:"absolute inset-0 bg-orange-500/20 flex items-center justify-center",children:e.jsxDEV("div",{className:"bg-orange-500 rounded-full p-1",children:e.jsxDEV(B,{className:"h-3 w-3 text-white"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:179,columnNumber:61},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:178,columnNumber:57},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:177,columnNumber:53},this),e.jsxDEV("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-end pb-2 gap-1",children:[e.jsxDEV("p",{className:"text-white text-xs px-2 text-center leading-tight truncate w-full text-center",children:s.original_name},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:185,columnNumber:53},this),e.jsxDEV("p",{className:"text-white/60 text-xs",children:F(s.size)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:188,columnNumber:53},this),e.jsxDEV("button",{onClick:t=>U(s.id,t),className:"absolute top-2 right-2 p-1 bg-red-500 rounded-full text-white hover:bg-red-600 transition-colors",children:e.jsxDEV($,{className:"h-3 w-3"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:193,columnNumber:57},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:189,columnNumber:53},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:184,columnNumber:49},this)]},s.id,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:161,columnNumber:45},this))},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:159,columnNumber:37},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:145,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:130,columnNumber:25},this):e.jsxDEV("div",{className:"flex-1 flex items-center justify-center p-8",children:e.jsxDEV("div",{onDragOver:s=>{s.preventDefault(),u(!0)},onDragLeave:()=>u(!1),onDrop:s=>{s.preventDefault(),u(!1),y(s.dataTransfer.files)},className:`w-full max-w-md border-2 border-dashed rounded-2xl p-12 text-center transition-colors ${S?"border-orange-400 bg-orange-50 dark:bg-orange-900/10":"border-gray-300 dark:border-white/20 hover:border-orange-400"}`,children:k?e.jsxDEV("div",{className:"flex flex-col items-center gap-3",children:[e.jsxDEV(C,{className:"h-12 w-12 animate-spin text-orange-500"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:217,columnNumber:41},this),e.jsxDEV("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enviando imagens..."},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:218,columnNumber:41},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:216,columnNumber:37},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(j,{className:"h-12 w-12 mx-auto mb-4 text-gray-300 dark:text-gray-600"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:222,columnNumber:41},this),e.jsxDEV("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Arraste imagens aqui"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:223,columnNumber:41},this),e.jsxDEV("p",{className:"text-xs text-gray-400 mb-4",children:"ou clique para selecionar"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:226,columnNumber:41},this),e.jsxDEV("label",{className:"cursor-pointer inline-flex items-center gap-2 px-5 py-2.5 bg-orange-500 hover:bg-orange-600 text-white text-sm font-medium rounded-xl transition-colors",children:[e.jsxDEV(j,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:228,columnNumber:45},this),"Selecionar arquivos",e.jsxDEV("input",{type:"file",className:"hidden",accept:"image/*",multiple:!0,onChange:s=>y(s.target.files)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:230,columnNumber:45},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:227,columnNumber:41},this),e.jsxDEV("p",{className:"text-xs text-gray-400 mt-4",children:"PNG, JPG, GIF, WebP at√© 10MB"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:238,columnNumber:41},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:221,columnNumber:37},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:205,columnNumber:29},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:204,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:128,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center justify-between gap-3 px-6 py-4 border-t border-gray-200 dark:border-white/10",children:[e.jsxDEV("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:o?"1 imagem selecionada":"Selecione uma imagem da biblioteca"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:248,columnNumber:21},this),e.jsxDEV("div",{className:"flex gap-3",children:[e.jsxDEV("button",{onClick:n,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancelar"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:252,columnNumber:25},this),e.jsxDEV("button",{onClick:P,disabled:!o,className:"px-5 py-2 bg-orange-500 hover:bg-orange-600 disabled:opacity-40 disabled:cursor-not-allowed text-white text-sm font-medium rounded-xl transition-colors",children:"Usar imagem"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:258,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:251,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:247,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:98,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/MediaPickerModal.tsx",lineNumber:97,columnNumber:9},this):null}export{J as M};
