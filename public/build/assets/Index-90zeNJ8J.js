import{r as o,j as t,H as le,d as H}from"./app-C1W35bN8.js";import{u as ce,S as de,M as me}from"./useAudio-B8J1p6s-.js";import{t as g}from"./index-DiQteOZ_.js";import ue from"./HeroSection-D2pSvTuF.js";import pe from"./CategoryNav-DDOv0Xq6.js";import fe from"./ProductGrid-DDsNK8fQ.js";import he from"./CartSidebar-JzNEBA88.js";import xe from"./StoreInfoModal-BekM09IX.js";import ge from"./ProductModal-CGX9xXTM.js";import we from"./AuthModal-S788X2Ow.js";import be from"./CustomerAreaModal-Cl4z7Nvk.js";import ve from"./CheckoutModal-DvyWo2fC.js";import ye from"./MenuNavbar-w10Be1AJ.js";import{F as je}from"./flame-BMrtFpub.js";import{S as ke}from"./star-BFDb6wdx.js";import{P as Ne}from"./plus-qlv4qXvR.js";import{S as Se}from"./search-69N2sBlT.js";import"./instagram-wOUvL_PW.js";import"./message-circle-EToHJ96h.js";import"./map-pin-DtfGHsKS.js";import"./chevron-right-AkZ17gAD.js";import"./ProductCard-DtN5EP2r.js";import"./shopping-bag-XFNCjWS1.js";import"./pen-rV7vua2W.js";import"./trash-2-BwKNgynT.js";import"./minus-B_MlqxVO.js";import"./clock-BLHrFU4D.js";import"./share-2-D_9ihoXj.js";import"./AddressForm-BaObf7hj.js";import"./TextInput-B3MC5Hqn.js";import"./InputLabel-_3zYNCf1.js";import"./PrimaryButton-Dfu03V_D.js";import"./SecondaryButton-CnAAWwcA.js";import"./loader-circle-FTggP1TZ.js";import"./bell-CO-5OhK2.js";import"./gift-C4IvDoVR.js";import"./trophy-CHLTVOeI.js";import"./log-out-fRNXPPjn.js";import"./house-DqE23nS7.js";import"./check-EaeR0OPd.js";import"./history-DxsE8xsK.js";import"./copy-WTNcejrC.js";import"./Modal-DWxZAUTx.js";import"./keyboard-BK6vGCbM.js";import"./use-sync-refs-Bxzx7kHd.js";import"./portal-oEj3dqf0.js";import"./with-selector-Qxn-_NZa.js";import"./hidden-DHpd9LWD.js";import"./transition-BCMx7zz8.js";import"./sparkles-BLAKS9QT.js";import"./arrow-left-DePXraiJ.js";import"./circle-check-big-Dn8tLiNB.js";import"./wallet-BEn7z5JZ.js";import"./ticket-c-9-bVna.js";import"./credit-card-CXDrhBli.js";import"./banknote-UpS50FIg.js";import"./switch-psfwI8yE.js";import"./use-resolve-button-type-R6zPIUWg.js";import"./store-DNOXz79u.js";import"./user-CTYCMMBZ.js";function D(a,n){a=a.replace(/^#/,"");let l=parseInt(a.substring(0,2),16),c=parseInt(a.substring(2,4),16),m=parseInt(a.substring(4,6),16);l=Math.floor(l*(1+n/100)),c=Math.floor(c*(1+n/100)),m=Math.floor(m*(1+n/100)),l=Math.min(255,Math.max(0,l)),c=Math.min(255,Math.max(0,c)),m=Math.min(255,Math.max(0,m));const O=l.toString(16).padStart(2,"0"),u=c.toString(16).padStart(2,"0"),j=m.toString(16).padStart(2,"0");return`#${O}${u}${j}`}function At({store:a,categories:n,slug:l,authCustomer:c,activePromotion:m,availableCoupons:O}){const[u,j]=o.useState("all"),[k,V]=o.useState(""),[d,p]=o.useState([]),[U,E]=o.useState(null),[_,w]=o.useState(!1),[A,P]=o.useState(null),[B,L]=o.useState(null),[N,f]=o.useState(!1),[$,S]=o.useState(!1),[C,b]=o.useState(!1),[v,h]=o.useState(!1);o.useEffect(()=>{if(typeof window<"u"){const r=new URLSearchParams(window.location.search).get("ref");r&&localStorage.setItem("referral_code",r)}},[]);const[s,q]=o.useState(c),[J,R]=o.useState([]),[y,Q]=o.useState(()=>{const e=localStorage.getItem("menu_theme");return e?e==="dark":a.theme_mode==="dark"?!0:a.theme_mode==="light"?!1:window.matchMedia("(prefers-color-scheme: dark)").matches}),G=()=>{Q(e=>{const r=!e;return localStorage.setItem("menu_theme",r?"dark":"light"),r})},Y=async()=>{if(s)try{const e=await H.get("/customer/addresses");R(e.data)}catch(e){console.error("Error loading addresses:",e)}};o.useEffect(()=>{s?Y():R([])},[s]);const{play:K,initializeAudio:T}=ce();o.useEffect(()=>{const e=()=>T();return window.addEventListener("click",e,{once:!0}),window.addEventListener("touchstart",e,{once:!0}),()=>{window.removeEventListener("click",e),window.removeEventListener("touchstart",e)}},[T]),o.useEffect(()=>{const e=localStorage.getItem("cart");if(e)try{p(JSON.parse(e))}catch(r){console.error("Error parsing cart",r)}},[]),o.useEffect(()=>{localStorage.setItem("cart",JSON.stringify(d))},[d]),o.useEffect(()=>{const e=window.document.documentElement;y?e.classList.add("dark"):e.classList.remove("dark")},[y]),o.useEffect(()=>{const e=()=>{};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[n]);const W=e=>{if(j(e),e!=="all"){const r=document.getElementById(e);if(r){const i=r.getBoundingClientRect().top+window.scrollY-120;window.scrollTo({top:i,behavior:"smooth"})}}else window.scrollTo({top:0,behavior:"smooth"})},M=e=>{E(e),L(null),P(null),w(!0)},X=e=>{A!==null?(p(r=>r.map((x,i)=>i===A?e:x)),g.success("Item atualizado com sucesso!")):(p(r=>[...r,e]),g.success("Adicionado ao carrinho!"),K("success")),w(!1)},Z=e=>{const r=d[e];E(r.product),L(r),P(e),w(!0),f(!1)},ee=e=>{p(r=>r.filter((x,i)=>i!==e)),g.info("Item removido do carrinho.")},te=()=>{if(!s){g.info("Para finalizar, indentifique-se primeiro."),b(!0),f(!1);return}I(!0),f(!1)},[z,I]=o.useState(!1),re=e=>{q(e)},oe=async()=>{try{await H.post("/customer/logout"),q(null),g.info("Voc√™ saiu da conta."),h(!1)}catch(e){console.error(e)}},ae=d.reduce((e,r)=>e+r.subtotal,0),F=d.reduce((e,r)=>e+r.quantity,0),se=(e,r)=>{r<1||p(x=>x.map((i,ie)=>{if(ie===e){const ne=i.subtotal/i.quantity;return{...i,quantity:r,subtotal:ne*r}}return i}))};return t.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-premium-dark text-gray-900 dark:text-gray-100 font-sans selection:bg-orange-100 selection:text-orange-900 pb-40 md:pb-40 transition-colors duration-300",children:[t.jsx(le,{title:a.name,children:t.jsx("style",{children:`
                    :root {
                        --primary-color: ${a.theme_color||"#ff3d03"};
                        --primary-hover: ${D(a.theme_color||"#ff3d03",-10)};
                        --primary-active: ${D(a.theme_color||"#ff3d03",-20)};
                    }
                `})}),t.jsx(ue,{store:a,customer:s,onOpenAuth:()=>b(!0),onOpenProfile:()=>h(!0),onOpenCart:()=>f(!0),onOpenInfo:()=>S(!0),cartCount:F}),!k&&u==="all"&&n.some(e=>e.products.some(r=>r.is_featured))&&t.jsx("section",{className:"max-w-7xl mx-auto px-4 md:px-8 py-8",children:t.jsxs("div",{className:"mb-10",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"h-12 w-12 rounded-2xl bg-gradient-to-br from-orange-500 to-red-500 text-white flex items-center justify-center rotate-3 shadow-xl",children:t.jsx(je,{className:"h-6 w-6"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl md:text-3xl font-black text-gray-900 dark:text-white tracking-tight",children:"Destaques da Casa"}),t.jsx("p",{className:"text-[10px] md:text-xs font-bold text-orange-500 uppercase tracking-[0.2em] mt-1",children:"Os favoritos dos clientes"})]})]}),t.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-3 md:gap-6 mt-6",children:n.flatMap(e=>e.products).filter(e=>e.is_featured).map(e=>t.jsxs("div",{onClick:()=>M(e),className:"group bg-gray-100 dark:bg-white/5 rounded-[24px] border border-gray-200 dark:border-white/5 shadow-sm hover:shadow-xl hover:border-primary/30 dark:hover:border-primary/30 transition-all duration-300 cursor-pointer relative overflow-hidden flex flex-col h-full p-3 md:p-4 gap-4",children:[t.jsx("div",{className:"absolute top-3 left-3 z-10",children:t.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-widest shadow-xl shadow-orange-500/50 flex items-center gap-1",children:[t.jsx(ke,{className:"h-3 w-3 fill-current"})," Destaque"]})}),t.jsx("div",{className:"shrink-0 relative w-full aspect-square rounded-[20px] overflow-hidden bg-gray-50 dark:bg-white/5",children:e.image_url?t.jsx("img",{src:e.image_url,alt:e.name,className:"h-full w-full object-cover group-hover:scale-110 transition-transform duration-700"}):t.jsx("div",{className:"h-full w-full flex items-center justify-center text-4xl",children:"üçï"})}),t.jsxs("div",{className:"flex flex-col flex-1 justify-between h-full",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-base md:text-lg text-gray-900 dark:text-white leading-tight mb-1 transition-colors duration-300 line-clamp-2",children:e.name}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 transition-colors duration-300 leading-relaxed line-clamp-2",children:e.description})]}),t.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[t.jsx("div",{className:"flex flex-col",children:e.promotional_price&&e.promotional_price<e.price?t.jsxs(t.Fragment,{children:[t.jsxs("span",{className:"text-xs text-gray-400 line-through",children:["R$ ",Number(e.price).toFixed(2).replace(".",",")]}),t.jsxs("span",{className:"text-base md:text-lg font-black text-green-500",children:["R$ ",Number(e.promotional_price).toFixed(2).replace(".",",")]})]}):t.jsxs("span",{className:"text-base md:text-lg font-black text-gray-900 dark:text-white",children:["R$ ",Number(e.price).toFixed(2).replace(".",",")]})}),t.jsx("button",{className:"h-8 w-8 md:h-9 md:w-9 rounded-full bg-gradient-to-br from-orange-500 to-red-500 text-white flex items-center justify-center hover:scale-110 active:scale-95 transition-transform shadow-lg shadow-primary/40",onClick:r=>{r.stopPropagation(),M(e)},children:t.jsx(Ne,{className:"h-4 w-4 md:h-5 md:w-5"})})]})]})]},e.id))})]})}),t.jsx("header",{className:"sticky top-0 z-40 bg-white/80 dark:bg-premium-dark/80 backdrop-blur-md shadow-sm border-b border-gray-100 dark:border-white/5 transition-colors duration-300",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-4 flex items-center justify-center gap-6",children:[t.jsx("div",{className:"flex-1 max-w-2xl",children:t.jsxs("div",{className:"relative group",children:[t.jsx(Se,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-black transition-colors"}),t.jsx("input",{type:"text",placeholder:"O que vamos pedir agora?",value:k,onChange:e=>V(e.target.value),className:"w-full bg-gray-50/50 dark:bg-white/5 border border-transparent rounded-xl py-2.5 pl-11 pr-4 focus:ring-0 focus:border-gray-200 dark:focus:border-white/10 focus:bg-white dark:focus:bg-white/10 transition-all outline-none font-medium text-sm text-gray-900 dark:text-white placeholder:text-gray-950 dark:placeholder:text-gray-400"})]})}),t.jsx("button",{onClick:G,"aria-label":y?"Ativar modo claro":"Ativar modo escuro",className:"h-10 w-10 rounded-xl bg-gray-100 dark:bg-white/10 flex items-center justify-center text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-white/20 active:scale-90 transition-all shrink-0",children:y?t.jsx(de,{className:"h-4 w-4"}):t.jsx(me,{className:"h-4 w-4"})})]})}),t.jsx(pe,{categories:n,activeCategory:u,onSelectCategory:W}),t.jsx("main",{children:t.jsx("div",{className:"flex flex-col md:flex-row max-w-7xl mx-auto items-start gap-6",children:t.jsx("div",{className:"flex-1 w-full",children:t.jsx(fe,{categories:n.map(e=>({...e,products:e.products.filter(r=>r.name.toLowerCase().includes(k.toLowerCase())&&(u==="all"||e.id===u))})).filter(e=>e.products.length>0),onAdd:M,viewMode:a.menu_view_mode||"grid"})})})}),t.jsx(he,{isOpen:N,onClose:()=>f(!1),cart:d,onUpdateQuantity:se,onEdit:Z,onRemove:ee,onCheckout:te}),t.jsx(xe,{isOpen:$,onClose:()=>S(!1),store:a}),_&&t.jsx(ge,{product:U,isOpen:_,onClose:()=>w(!1),onAddToCart:X,initialValues:B}),C&&t.jsx(we,{isOpen:C,onClose:()=>b(!1),onLogin:re,slug:l}),v&&t.jsx(be,{isOpen:v,onClose:()=>h(!1),customer:s,onLogout:oe,store:a}),z&&t.jsx(ve,{show:z,onClose:()=>I(!1),cart:d,customer:s,store:a,total:ae,addresses:J,onSuccess:()=>{p([]),I(!1)}}),s&&!N&&!v&&t.jsx("div",{className:"fixed top-4 right-4 z-40 hidden md:block",children:t.jsxs("button",{onClick:()=>h(!0),className:"bg-white px-4 py-2 rounded-full shadow-lg border border-gray-100 flex items-center gap-2 hover:bg-gray-50 transition-colors",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-xs uppercase",children:s.name.substring(0,2)}),t.jsx("span",{className:"font-bold text-gray-700 text-sm",children:s.name.split(" ")[0]})]})}),t.jsx(ye,{customer:s,cartCount:F,onHome:()=>window.scrollTo({top:0,behavior:"smooth"}),onAccount:()=>{s?h(!0):b(!0)},onStore:()=>S(!0),onCart:()=>f(!0),activeTab:N?"cart":v||C?"account":$?"store":"home"})]})}export{At as default};
