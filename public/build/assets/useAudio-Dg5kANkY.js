import{r}from"./app-DSzzEaYJ.js";const l={"new-order":"/sounds/new-order.mp3",notification:"/sounds/notification.mp3",success:"/sounds/success.mp3",error:"/sounds/error.mp3",alert:"/sounds/alert.mp3","order-updated":"/sounds/order-updated.mp3",ready:"/sounds/pedido-pronto.mp3"},p=()=>{const u=r.useRef({}),s=r.useRef(!1),t=r.useRef([]),c=r.useCallback(()=>{if(!s.current)for(Object.entries(l).forEach(([e,o])=>{const n=new Audio(o);n.preload="auto",n.crossOrigin="anonymous",u.current[e]=n}),s.current=!0;t.current.length>0;){const e=t.current.shift();e&&i(e)}},[]);r.useEffect(()=>{const e=()=>{c()};return window.addEventListener("click",e,{once:!0}),window.addEventListener("touchstart",e,{once:!0}),()=>{window.removeEventListener("click",e),window.removeEventListener("touchstart",e)}},[c]);const i=r.useCallback(async e=>{const o=u.current[e];if(!o){console.warn(`Audio element not found for: ${e}`);return}try{o.currentTime=0;const n=o.play();n!==void 0&&n.then(()=>{console.log(`Playing sound: ${e}`)}).catch(d=>{console.warn(`Failed to play ${e}:`,d.message)})}catch(n){console.warn(`Error playing sound ${e}:`,n)}},[]),a=r.useCallback(e=>{if(console.log(`[useAudio] play() called for: ${e}, initialized: ${s.current}`),!s.current){console.warn(`[useAudio] Audio not initialized yet, queuing: ${e}`),t.current.includes(e)||t.current.push(e);return}i(e)},[i]);return r.useEffect(()=>()=>{Object.values(u.current).forEach(e=>{e.pause(),e.src=""})},[]),{play:a,initializeAudio:c}};export{p as u};
