import{r as g,u as w,j as e,H as k,a as h}from"./app-DStU8MwD.js";import{A as S}from"./AuthenticatedLayout-DbMMfPc0.js";import{M as P}from"./Modal-DTlkYVpv.js";import{I as r}from"./InputLabel-Bd7kPWfd.js";import{T as o}from"./TextInput-eH8abxMg.js";import{I as n}from"./InputError--1euxn-w.js";import{P as z}from"./PrimaryButton-BGPXm-XG.js";import{S as D}from"./SecondaryButton-SeRsFzXR.js";import{P as E}from"./plus-BKUIj5vD.js";import{P as I}from"./percent-BBf1C9Ga.js";import{D as T}from"./dollar-sign-BZpTB1Mz.js";import{C as A}from"./circle-check-big-2jZeH2Kn.js";import{C as M}from"./circle-x-BZ107hLO.js";import{C as O}from"./calendar-AkkFsgEM.js";import{S as B}from"./square-pen-VVNYlebm.js";import{T as F}from"./trash-2-BqMSKMt8.js";import"./monitor-BxyGoWP4.js";import"./shopping-bag-DWef1FNa.js";import"./package-DTP_tjtl.js";import"./image-DoN3fn7u.js";import"./layout-dashboard-lVxcZVl0.js";import"./credit-card-B7I-2Gye.js";import"./users-yPlFTsXt.js";import"./trophy-BlNa_V_6.js";import"./ticket-DQoQd_m4.js";import"./store-DuSO3jdq.js";import"./key-SqM6ParG.js";import"./shield-check-CRBnQq9v.js";import"./log-out-j4Bx4tDQ.js";import"./transition-DKZ_I0YA.js";import"./use-sync-refs-DFFshV1K.js";import"./truck-BNo8_dDu.js";import"./switch-Db9cnu65.js";import"./use-resolve-button-type-tIJiKY6f.js";import"./keyboard-B40p_ba_.js";import"./hidden-DR4F-w76.js";import"./menu-B1dGMPu8.js";import"./portal-yErZUvIx.js";import"./with-selector-DKWJKT3r.js";import"./chevron-down-C5vhnEBS.js";import"./clock-Dh7Of57R.js";import"./circle-play-CI0RrttL.js";import"./menu-DBOcVmce.js";import"./search-DEuGphhN.js";import"./sun-Bzc8mG1J.js";import"./bell-CX96QJqb.js";import"./eye-QpiWbMKF.js";import"./arrow-left-BJHQYbU1.js";import"./usePushNotifications-DPgYwf5r.js";import"./zap-CKk3AS2t.js";import"./star-BnEWWDQh.js";import"./chevron-right-B_2chNzF.js";import"./lock-CIamgwxM.js";function Fe({coupons:c}){const[f,x]=g.useState(!1),[i,m]=g.useState(null),{data:a,setData:s,post:j,put:v,processing:b,errors:d,reset:p,clearErrors:y}=w({code:"",discount_type:"percentage",discount_value:"",max_uses:"",valid_until:"",plan_restriction:"",is_active:!0}),u=t=>{y(),t?(m(t),s({code:t.code,discount_type:t.discount_type,discount_value:t.discount_value.toString(),max_uses:t.max_uses?t.max_uses.toString():"",valid_until:t.valid_until?t.valid_until.split("T")[0]:"",plan_restriction:t.plan_restriction||"",is_active:t.is_active})):(m(null),p()),x(!0)},l=()=>{x(!1),p()},N=t=>{t.preventDefault(),i?v(route("admin.plan-coupons.update",i.id),{onSuccess:l}):j(route("admin.plan-coupons.store"),{onSuccess:l})},_=t=>{h.post(route("admin.plan-coupons.toggle",t.id))},C=t=>{confirm("Tem certeza que deseja excluir este cupom? Esta ação não pode ser desfeita.")&&h.delete(route("admin.plan-coupons.destroy",t.id))};return e.jsxs(S,{children:[e.jsx(k,{title:"Gerenciar Cupons de Planos"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-gray-900 dark:text-white tracking-tight",children:"Cupons de Planos"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:"Gerencie descontos para assinaturas"})]}),e.jsxs("button",{onClick:()=>u(),className:"flex items-center gap-2 px-4 py-2 bg-[#ff3d03] text-white rounded-xl font-bold text-sm shadow-lg shadow-[#ff3d03]/20 hover:bg-[#e63700] transition-colors",children:[e.jsx(E,{className:"w-4 h-4"}),"Novo Cupom"]})]}),e.jsx("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[32px] border border-gray-100 dark:border-white/5 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-100 dark:border-white/5 bg-gray-50 dark:bg-white/5",children:[e.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-gray-400 uppercase",children:"Código"}),e.jsx("th",{className:"text-left py-4 px-4 text-xs font-bold text-gray-400 uppercase",children:"Desconto"}),e.jsx("th",{className:"text-left py-4 px-4 text-xs font-bold text-gray-400 uppercase",children:"Uso"}),e.jsx("th",{className:"text-left py-4 px-4 text-xs font-bold text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"text-right py-4 px-6 text-xs font-bold text-gray-400 uppercase",children:"Ações"})]})}),e.jsx("tbody",{children:c.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"py-8 text-center text-gray-500 text-sm",children:"Nenhum cupom encontrado."})}):c.data.map(t=>e.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-white/5 transition-colors border-b border-gray-100 dark:border-white/5 last:border-0",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-mono font-bold text-gray-900 dark:text-white",children:t.code}),t.plan_restriction&&e.jsxs("span",{className:"text-xs text-blue-500",children:["Apenas ",t.plan_restriction.toUpperCase()]}),e.jsxs("span",{className:"text-[10px] text-gray-400 flex items-center gap-0.5 mt-0.5",title:"Sincronizado com Stripe",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#635BFF]"}),"Stripe"]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-1 font-bold text-green-600 dark:text-green-400",children:[t.discount_type==="percentage"?e.jsx(I,{size:14}):e.jsx(T,{size:14}),t.discount_value,t.discount_type==="percentage"?"%":""]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.current_uses," / ",t.max_uses||"∞"]})}),e.jsxs("td",{className:"py-4 px-4",children:[e.jsxs("button",{onClick:()=>_(t),className:`px-2.5 py-1 rounded-lg text-xs font-bold flex items-center gap-1 transition-colors ${t.is_active?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[t.is_active?e.jsx(A,{size:12}):e.jsx(M,{size:12}),t.is_active?"Ativo":"Inativo"]}),t.valid_until&&e.jsxs("div",{className:"text-xs text-gray-400 mt-1 flex items-center gap-1",children:[e.jsx(O,{size:10}),"Até ",new Date(t.valid_until).toLocaleDateString()]})]}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>u(t),className:"p-2 text-blue-500 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(B,{size:16})}),t.current_uses===0&&e.jsx("button",{onClick:()=>C(t),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(F,{size:16})})]})})]},t.id))})]})})}),e.jsx(P,{show:f,onClose:l,children:e.jsxs("form",{onSubmit:N,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:i?"Editar Cupom":"Novo Cupom"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Código do Cupom"}),e.jsx(o,{value:a.code,onChange:t=>s("code",t.target.value.toUpperCase()),className:"w-full uppercase font-mono",placeholder:"EX: PRO30",disabled:!!i}),e.jsx(n,{message:d.code,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Tipo de Desconto"}),e.jsxs("select",{value:a.discount_type,onChange:t=>s("discount_type",t.target.value),className:"w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-[#ff3d03] focus:ring-[#ff3d03] rounded-xl shadow-sm",children:[e.jsx("option",{value:"percentage",children:"Porcentagem (%)"}),e.jsx("option",{value:"fixed",children:"Valor Fixo (R$)"})]})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Valor do Desconto"}),e.jsx(o,{type:"number",value:a.discount_value,onChange:t=>s("discount_value",t.target.value),className:"w-full",placeholder:"EX: 30"}),e.jsx(n,{message:d.discount_value,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Limite de Uso (Opcional)"}),e.jsx(o,{type:"number",value:a.max_uses,onChange:t=>s("max_uses",t.target.value),className:"w-full",placeholder:"Infinito"})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Validade (Opcional)"}),e.jsx(o,{type:"date",value:a.valid_until,onChange:t=>s("valid_until",t.target.value),className:"w-full"}),e.jsx(n,{message:d.valid_until,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Restrito ao Plano (Opcional)"}),e.jsxs("select",{value:a.plan_restriction,onChange:t=>s("plan_restriction",t.target.value),className:"w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-[#ff3d03] focus:ring-[#ff3d03] rounded-xl shadow-sm",children:[e.jsx("option",{value:"",children:"Todos os Planos"}),e.jsx("option",{value:"pro",children:"Pro"}),e.jsx("option",{value:"custom",children:"Personalizado"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(D,{onClick:l,children:"Cancelar"}),e.jsx(z,{disabled:b,children:i?"Atualizar":"Criar"})]})]})})]})]})}export{Fe as default};
