import{u as p,r as h,j as e,X as y}from"./app-Dgan24MQ.js";import{M as f}from"./Modal-DurnTLYj.js";import{t as c}from"./index-C_SlFFpK.js";import{T as v}from"./ticket-BmBu0xhY.js";import{P as j}from"./percent-Ddp_NlFy.js";import{D as x}from"./dollar-sign-l526bmQs.js";import{S as _}from"./save-Dm5rK5lG.js";import"./keyboard-u1ub4xyz.js";import"./use-sync-refs-C1-it5tV.js";import"./portal-DX3dffHd.js";import"./with-selector-DgaZdEoe.js";import"./hidden-D85_TOZN.js";import"./transition-afWBDntO.js";function q({show:l,onClose:d,coupon:a}){const{data:s,setData:o,post:g,put:u,processing:i,errors:t,reset:n,clearErrors:m}=p({code:"",discount_type:"fixed",discount_value:"",is_active:!0,valid_until:"",max_uses:"",min_order_value:""});h.useEffect(()=>{a?o({code:a.code,discount_type:a.discount_type,discount_value:a.discount_value.toString(),is_active:a.is_active,valid_until:a.valid_until||"",max_uses:a.max_uses?.toString()||"",min_order_value:a.min_order_value?.toString()||""}):n(),m()},[a,l]);const b=r=>{r.preventDefault(),a?u(route("coupons.update",a.id),{onSuccess:()=>{c.success("Cupom atualizado com sucesso!"),d()}}):g(route("coupons.store"),{onSuccess:()=>{c.success("Cupom criado com sucesso!"),d(),n()}})};return e.jsx(f,{show:l,onClose:d,maxWidth:"xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-gradient-to-br from-orange-400 to-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(v,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white",children:a?"Editar Cupom":"Criar Novo Cupom"})]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-gray-400",children:e.jsx(y,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Código do Cupom *"}),e.jsx("input",{type:"text",value:s.code,onChange:r=>o("code",r.target.value.toUpperCase()),placeholder:"Ex: PROMO20",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg font-mono text-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0}),t.code&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-bold",children:t.code})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Desconto *"}),e.jsxs("select",{value:s.discount_type,onChange:r=>o("discount_type",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:text-white font-bold",children:[e.jsx("option",{value:"fixed",children:"Valor Fixo (R$)"}),e.jsx("option",{value:"percent",children:"Percentual (%)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Valor do Desconto *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:s.discount_value,onChange:r=>o("discount_value",r.target.value),placeholder:"0",step:"0.01",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:text-white font-black",required:!0}),e.jsx("div",{className:"absolute right-4 top-3 text-gray-500",children:s.discount_type==="percent"?e.jsx(j,{className:"h-5 w-5"}):e.jsx(x,{className:"h-5 w-5"})})]}),t.discount_value&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-bold",children:t.discount_value})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Valor Mínimo do Pedido (R$)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:s.min_order_value,onChange:r=>o("min_order_value",r.target.value),placeholder:"0",step:"0.01",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),e.jsx("div",{className:"absolute right-4 top-3 text-gray-500",children:e.jsx(x,{className:"h-5 w-5"})})]}),t.min_order_value&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-bold",children:t.min_order_value})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Válido Até"}),e.jsx("input",{type:"date",value:s.valid_until,onChange:r=>o("valid_until",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),t.valid_until&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-bold",children:t.valid_until})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Limite de Uso"}),e.jsx("input",{type:"number",value:s.max_uses,onChange:r=>o("max_uses",r.target.value),placeholder:"Ilimitado",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),t.max_uses&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-bold",children:t.max_uses})]})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 dark:bg-gray-900/50 p-4 rounded-xl border border-gray-100 dark:border-gray-800",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:s.is_active,onChange:r=>o("is_active",r.target.checked),className:"w-5 h-5 rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:"Cupom disponível para uso imediato"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:d,className:"flex-1 px-6 py-3 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 font-bold rounded-xl hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:i,className:"flex-1 px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-bold rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-orange-500/20",children:[i?e.jsx("div",{className:"h-5 w-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(_,{className:"h-5 w-5"}),a?"Salvar Alterações":"Criar Cupom"]})]})]})]})})}export{q as default};
