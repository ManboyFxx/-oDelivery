import{r as i,j as e,a as h,X as w}from"./app-jVj0MUby.js";import{A as E}from"./AuthenticatedLayout-DILqxGh6.js";import{S as b}from"./smartphone-CS8n_6uv.js";import{Q as A}from"./qr-code-C5v2JCW0.js";import{T as W}from"./trash-2-3xoVgvGH.js";import{a as P,W as O}from"./wifi-BDW9x-5L.js";import{R as U}from"./refresh-cw-Bs-F4u38.js";import"./monitor-CDfosv9O.js";import"./shopping-bag--c7EXGcB.js";import"./package-YOE0k2cE.js";import"./image-DN4L3ANS.js";import"./layout-dashboard-q_RTmy7M.js";import"./credit-card-CEJG0Wre.js";import"./users-C2STsN-N.js";import"./trophy-BURTc5tv.js";import"./ticket-nTh13sMq.js";import"./store-6djcP0nF.js";import"./dollar-sign-DlTTqXWJ.js";import"./key-Br9ZKSZp.js";import"./shield-check-BGbBvQk6.js";import"./log-out-q9_Z5-4M.js";import"./transition-BD0_vfPX.js";import"./use-sync-refs-cy7_OiVa.js";import"./Modal-CVA1-0mx.js";import"./keyboard-B3ncYl-v.js";import"./portal-CBFo9pwj.js";import"./with-selector-Bg0nSsFM.js";import"./hidden-B_SzDmWB.js";import"./truck-CyjIsZlk.js";import"./switch-DPe3-PHO.js";import"./use-resolve-button-type-Bmg9J456.js";import"./menu-D1hyQMWs.js";import"./chevron-down-DnQty2Hw.js";import"./clock-PibLPQfO.js";import"./circle-play-CoGBVjpo.js";import"./menu-ZDTpXh_O.js";import"./search-t7_bi_Kd.js";import"./sun-BaWP0qkt.js";import"./bell-Blt-ltak.js";import"./eye-DBTWzjDf.js";import"./arrow-left--Ul9xegC.js";import"./usePushNotifications-BGqmjhDw.js";import"./zap-CEmSQDUL.js";import"./star-B1NZkOvF.js";import"./chevron-right-D5ZoqAiZ.js";import"./lock-Bz5EW-_n.js";function Ie({instances:v}){const[r,u]=i.useState(v),[n,p]=i.useState(""),[g,y]=i.useState(null),[x,l]=i.useState(null),[m,c]=i.useState(!1),[D,a]=i.useState(null),N=async()=>{if(n.trim()){c(!0),a(null);try{h.post(route("whatsapp.instances.store"),{instance_name:n},{onSuccess:()=>{p(""),setTimeout(()=>window.location.reload(),500)},onError:s=>{a(s.error||"Erro ao criar instância")}})}finally{c(!1)}}},f=async s=>{c(!0),a(null);try{const t=await fetch(route("whatsapp.instances.qrcode",s.id)),o=await t.json();t.ok?(l(o.qr_code),y(s)):a(o.error||"QR Code não disponível")}catch(t){a("Erro ao carregar QR Code"),console.error("Erro:",t)}finally{c(!1)}},S=async s=>{try{const t=await fetch(route("whatsapp.instances.status",s.id)),o=await t.json();t.ok&&u(r.map(d=>d.id===s.id?{...d,status:o.status,phone_number:o.phone_number}:d))}catch(t){console.error("Erro ao verificar status:",t)}},j=s=>{confirm(`Deseja realmente remover a instância "${s.instance_name}"?`)&&h.delete(route("whatsapp.instances.destroy",s.id),{onSuccess:()=>{u(r.filter(t=>t.id!==s.id))}})};i.useEffect(()=>{const s=setInterval(()=>{r.filter(t=>t.status==="connecting").forEach(S)},5e3);return()=>clearInterval(s)},[r]);const V=s=>{switch(s){case"connected":return"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400";case"connecting":return"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400";default:return"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400"}},C=s=>{switch(s){case"connected":return e.jsxDEV(O,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:122,columnNumber:24},this);case"connecting":return e.jsxDEV(U,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:124,columnNumber:24},this);default:return e.jsxDEV(P,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:126,columnNumber:24},this)}},I=s=>{switch(s){case"connected":return"Conectado";case"connecting":return"Conectando";default:return"Desconectado"}};return e.jsxDEV(E,{children:e.jsxDEV("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[e.jsxDEV("div",{className:"mb-8",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Gerenciar Instâncias WhatsApp"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:146,columnNumber:21},this),e.jsxDEV("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Configure e gerencie suas conexões WhatsApp Business via Evolution API"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:149,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:145,columnNumber:17},this),D&&e.jsxDEV("div",{className:"mb-6 p-4 bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400 rounded-lg",children:D},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:156,columnNumber:21},this),e.jsxDEV("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-6 mb-8",children:[e.jsxDEV("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:"Nova Instância"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:163,columnNumber:21},this),e.jsxDEV("div",{className:"flex gap-4 flex-col sm:flex-row",children:[e.jsxDEV("input",{type:"text",value:n,onChange:s=>p(s.target.value),placeholder:"Nome da instância (ex: loja-centro)",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-green-500",onKeyPress:s=>s.key==="Enter"&&N(),disabled:m},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:167,columnNumber:25},this),e.jsxDEV("button",{onClick:N,disabled:!n.trim()||m,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"Criando...":"Criar Instância"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:176,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:166,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:162,columnNumber:17},this),r.length===0?e.jsxDEV("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-12 text-center",children:[e.jsxDEV(b,{className:"h-16 w-16 text-gray-400 dark:text-gray-600 mx-auto mb-4"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:189,columnNumber:25},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Nenhuma instância criada"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:190,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-600 dark:text-gray-400",children:"Crie sua primeira instância WhatsApp para começar a enviar mensagens"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:193,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:188,columnNumber:21},this):e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(s=>e.jsxDEV("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxDEV(b,{className:"h-8 w-8 text-green-600"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:207,columnNumber:41},this),e.jsxDEV("div",{className:"min-w-0 flex-1",children:[e.jsxDEV("h3",{className:"font-bold text-gray-900 dark:text-white truncate",children:s.instance_name},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:209,columnNumber:45},this),s.phone_number&&e.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.phone_number},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:213,columnNumber:49},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:208,columnNumber:41},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:206,columnNumber:37},this),e.jsxDEV("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-sm font-bold whitespace-nowrap ${V(s.status)}`,children:[C(s.status),I(s.status)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:221,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:205,columnNumber:33},this),s.last_connected_at&&e.jsxDEV("p",{className:"text-xs text-gray-500 dark:text-gray-500 mb-4",children:["Última conexão: ",new Date(s.last_connected_at).toLocaleDateString("pt-BR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:229,columnNumber:37},this),e.jsxDEV("div",{className:"flex gap-2",children:[s.status!=="connected"&&e.jsxDEV("button",{onClick:()=>f(s),disabled:m,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsxDEV(A,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:248,columnNumber:45},this),"Ver QR Code"]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:243,columnNumber:41},this),s.status==="connected"&&e.jsxDEV("button",{onClick:()=>{confirm("Desconectar esta instância?")&&h.post(route("whatsapp.instances.disconnect",s.id),{},{onSuccess:()=>{u(r.map(t=>t.id===s.id?{...t,status:"disconnected",qr_code:null}:t))}})},className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:"Desconectar"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:254,columnNumber:41},this),e.jsxDEV("button",{onClick:()=>j(s),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:e.jsxDEV(W,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:278,columnNumber:41},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:274,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:241,columnNumber:33},this)]},s.id,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:200,columnNumber:29},this))},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:198,columnNumber:21},this),g&&x&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>l(null),children:e.jsxDEV("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 max-w-md w-full",onClick:s=>s.stopPropagation(),children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Conectar via QR Code"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:298,columnNumber:33},this),e.jsxDEV("button",{onClick:()=>l(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsxDEV(w,{className:"h-6 w-6"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:305,columnNumber:37},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:301,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:297,columnNumber:29},this),e.jsxDEV("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:["Instância: ",e.jsxDEV("span",{className:"font-semibold text-gray-900 dark:text-white",children:g.instance_name},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:311,columnNumber:44},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:310,columnNumber:29},this),e.jsxDEV("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"Abra o WhatsApp no seu celular e escaneie este código para conectar a instância."},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:315,columnNumber:29},this),e.jsxDEV("div",{className:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg mb-4 flex items-center justify-center",children:e.jsxDEV("img",{src:x,alt:"QR Code",className:"w-full h-auto"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:321,columnNumber:33},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:320,columnNumber:29},this),e.jsxDEV("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4",children:e.jsxDEV("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:"ℹ️ O status será atualizado automaticamente assim que você escanear o código. Isso pode levar alguns segundos."},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:330,columnNumber:33},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:329,columnNumber:29},this),e.jsxDEV("button",{onClick:()=>l(null),className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Fechar"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:336,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:292,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:288,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:143,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Settings/WhatsAppInstances.tsx",lineNumber:142,columnNumber:9},this)}export{Ie as default};
