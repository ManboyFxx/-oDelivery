import{r as i,u as N,j as t,H as re,a as k}from"./app-B_J8lkvq.js";import{A as te}from"./AuthenticatedLayout-DKdP690n.js";import oe from"./GeneralSettings-DfHkKXXq.js";import ie from"./BusinessHoursSettings-D4HnDjf_.js";import se from"./DeliverySettings-JQd-R_l2.js";import ae from"./PaymentSettings-BNXHUW0Z.js";import ne from"./NotificationSettings-BqigMGaZ.js";import le from"./SystemSettings-1MLV85eI.js";import me from"./PrinterSettings-Y5Ugav98.js";import de from"./SecuritySettings-C_Xxm40Q.js";import{S as ce}from"./store-azgh8etq.js";import{C as pe}from"./clock-DD5LZAZg.js";import{T as ue}from"./truck-CuKP95K_.js";import{C as fe}from"./credit-card-hB9Iy1G8.js";import{B as _e}from"./bell-DhFf-dhR.js";import{S as ge}from"./shield-B-sW70cS.js";import{P as he}from"./palette-DorX2oXr.js";import{P as be}from"./printer-BEy5I-aA.js";import{C as ve}from"./circle-check-big-CMbbDAdv.js";import{K as xe}from"./transition-DR1ycciu.js";import"./shopping-bag-DaPSf6TI.js";import"./package-CeHhWqUy.js";import"./layout-dashboard-DDvXwa6l.js";import"./trophy-CpSHVSLI.js";import"./chart-column-DlQMyJ49.js";import"./ticket-DBNRMPVC.js";import"./dollar-sign-DExvMb2d.js";import"./key-Wmv6-h3t.js";import"./shield-check-2o4NXgtW.js";import"./log-out-BCw83gpS.js";import"./Modal-C-bZLru0.js";import"./keyboard-C8TFH4Q7.js";import"./use-sync-refs-D78moVXV.js";import"./portal-CNpUkHpF.js";import"./with-selector-FY2Gi7hl.js";import"./hidden-DWZmHSJq.js";import"./switch-C3fnJxal.js";import"./use-resolve-button-type-LJuoFKDT.js";import"./menu-BcHp92a-.js";import"./chevron-down-NvgkGDYJ.js";import"./menu-COef93TY.js";import"./search-BGAmxcu_.js";import"./eye-C1y5PipQ.js";import"./arrow-left-DhEioSnZ.js";import"./phone-Crhk-o9-.js";import"./mail-CXIvN6su.js";import"./map-pin-BoRzD9rk.js";import"./globe-BsiG1Afk.js";import"./instagram-xBARMpdC.js";import"./trash-2-DC9jLvpP.js";import"./upload-Q9Ztm3-h.js";import"./WeeklySchedule-BGULtKgt.js";import"./SecondaryButton-DwxEYMC-.js";import"./circle-alert-Cynd1NLd.js";import"./plus-B3HQxRgD.js";import"./square-pen-V3IbRAaL.js";import"./banknote-C9X8qYDX.js";import"./qr-code-D90Qk6s_.js";import"./volume-2-C_QgjZ4W.js";import"./refresh-cw-BcPuBb2g.js";import"./PrimaryButton-yomEzznH.js";import"./check-CyZQ-pP0.js";import"./copy-oN96LBmY.js";import"./smartphone-D2ZDo9Pz.js";import"./lock-Bjad0dER.js";function Rr({auth:Z,settings:e,deliveryZones:d,motoboys:ye,paymentMethods:C,flash:we}){const[s,D]=i.useState("general"),[P,f]=i.useState(!1),[T,_]=i.useState(e?.logo_url?`/storage/${e.logo_url}`:null),[B,g]=i.useState(e?.banner_url?`/storage/${e.banner_url}`:null),[h,E]=i.useState(()=>e?.business_hours?typeof e.business_hours=="string"?JSON.parse(e.business_hours):e.business_hours:{monday:{is_open:!0,open_time:"18:00",close_time:"23:00"},tuesday:{is_open:!0,open_time:"18:00",close_time:"23:00"},wednesday:{is_open:!0,open_time:"18:00",close_time:"23:00"},thursday:{is_open:!0,open_time:"18:00",close_time:"23:00"},friday:{is_open:!0,open_time:"18:00",close_time:"23:59"},saturday:{is_open:!0,open_time:"18:00",close_time:"23:59"},sunday:{is_open:!0,open_time:"18:00",close_time:"23:00"}}),[b,A]=i.useState(()=>{const r={browser_notifications:!0,sound_enabled:!0,order_created:!0,order_status_updated:!0,stock_low_warning:!0};return e?.notification_settings?typeof e.notification_settings=="string"?{...r,...JSON.parse(e.notification_settings)}:{...r,...e.notification_settings}:r}),[R,F]=i.useState(d),[H,l]=i.useState(!1),[c,v]=i.useState(null),{data:m,setData:o,post:M,processing:x,errors:y,recentlySuccessful:w}=N({store_name:e?.store_name||"",phone:e?.phone||"",whatsapp:e?.whatsapp||"",email:e?.email||"",address:e?.address||"",description:e?.description||"",instagram:e?.instagram||"",facebook:e?.facebook||"",website:e?.website||"",logo:null,banner:null,remove_logo:!1,remove_banner:!1,business_hours:JSON.stringify(h),notification_settings:JSON.stringify(b),delivery_radius_km:e?.delivery_radius_km||5,fixed_delivery_fee:e?.fixed_delivery_fee||0,min_order_delivery:e?.min_order_delivery||0,free_delivery_min:e?.free_delivery_min||"",estimated_delivery_time:e?.estimated_delivery_time||40,default_motoboy_id:e?.default_motoboy_id||"",theme_color:e?.theme_color||"#ff3d03",printer_paper_width:e?.printer_paper_width||80,auto_print_on_confirm:e?.auto_print_on_confirm||!1,print_copies:e?.print_copies||1,enable_password_login:e?.enable_password_login??!0,enable_otp_verification:e?.enable_otp_verification??!1,enable_quick_login:e?.enable_quick_login??!0,enable_checkout_security:e?.enable_checkout_security??!0}),{data:L,setData:S,post:J,put:O,delete:Se,processing:U,errors:$,reset:p,clearErrors:j}=N({neighborhood:"",delivery_fee:"",estimated_time_min:"",is_active:!0});i.useEffect(()=>{if(w){f(!0);const r=setTimeout(()=>f(!1),2e3);return()=>clearTimeout(r)}},[w]);const q=r=>{const a=r.target.files?.[0];if(a){o("logo",a),o("remove_logo",!1);const n=new FileReader;n.onload=u=>_(u.target?.result),n.readAsDataURL(a)}},z=r=>{const a=r.target.files?.[0];if(a){o("banner",a),o("remove_banner",!1);const n=new FileReader;n.onload=u=>g(u.target?.result),n.readAsDataURL(a)}},G=()=>{o("logo",null),o("remove_logo",!0),_(null)},I=()=>{o("banner",null),o("remove_banner",!0),g(null)},K=r=>{r.preventDefault(),M(route("settings.update"),{forceFormData:!0,preserveScroll:!0})},Q=()=>{v(null),p(),j(),l(!0)},V=r=>{v(r),S({neighborhood:r.neighborhood,delivery_fee:r.delivery_fee,estimated_time_min:r.estimated_time_min,is_active:!!r.is_active}),j(),l(!0)},W=r=>{r.preventDefault(),c?O(route("settings.zones.update",c.id),{onSuccess:()=>{l(!1),p()}}):J(route("settings.zones.store"),{onSuccess:()=>{l(!1),p()}})},X=r=>{confirm("Tem certeza que deseja excluir esta zona de entrega?")&&k.delete(route("settings.zones.destroy",r),{preserveScroll:!0})},Y=r=>{k.put(route("settings.zones.update",r.id),{...r,is_active:!r.is_active},{preserveScroll:!0})};i.useEffect(()=>{F(d)},[d]);const ee=[{id:"general",label:"Geral",icon:ce},{id:"hours",label:"Horários",icon:pe},{id:"delivery",label:"Delivery",icon:ue},{id:"payment",label:"Pagamento",icon:fe},{id:"notifications",label:"Notificações",icon:_e},{id:"security",label:"Segurança",icon:ge},{id:"system",label:"Sistema",icon:he},{id:"printer",label:"Impressão",icon:be}];return t.jsxs(te,{user:Z.user,header:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Configurações"}),t.jsx(xe,{show:P,enter:"transition ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 px-4 py-2 rounded-lg",children:[t.jsx(ve,{className:"h-5 w-5"}),t.jsx("span",{className:"font-medium",children:"Configurações salvas!"})]})})]}),children:[t.jsx(re,{title:"Configurações"}),t.jsx("div",{className:"py-12",children:t.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[t.jsx("div",{className:"w-full lg:w-64 flex-shrink-0",children:t.jsx("nav",{className:"flex lg:flex-col gap-2 overflow-x-auto lg:overflow-visible pb-4 lg:pb-0 bg-white dark:bg-premium-card p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-white/5",children:ee.map(r=>{const a=r.icon,n=s===r.id;return t.jsxs("button",{onClick:()=>D(r.id),className:`
                                                flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 whitespace-nowrap
                                                ${n?"bg-[#ff3d03] text-white shadow-lg shadow-[#ff3d03]/30 font-bold":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-white/5 font-medium"}
                                            `,children:[t.jsx(a,{className:`h-5 w-5 ${n?"text-white":"text-gray-400"}`}),r.label]},r.id)})})}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsxs("form",{onSubmit:K,encType:"multipart/form-data",children:[s==="general"&&t.jsx(oe,{data:m,setData:o,errors:y,logoPreview:T,bannerPreview:B,handleLogoUpload:q,handleBannerUpload:z,handleLogoRemove:G,handleBannerRemove:I}),s==="hours"&&t.jsx(ie,{businessHours:h,setBusinessHours:E,setData:o}),s==="delivery"&&t.jsx(se,{data:m,setData:o,errors:y,deliveryZones:R,zoneData:L,setZoneData:S,zoneProcessing:U,zoneErrors:$,submitZone:W,handleDeleteZone:X,toggleZoneActive:Y,openCreateZoneModal:Q,openEditZoneModal:V,showZoneModal:H,setShowZoneModal:l,editingZone:c}),s==="payment"&&t.jsx(ae,{paymentMethods:C}),s==="notifications"&&t.jsx(ne,{notificationSettings:b,setNotificationSettings:A,setData:o}),s==="security"&&t.jsx(de,{data:m,setData:o}),s==="system"&&t.jsx(le,{data:m,setData:o}),s==="printer"&&t.jsx(me,{data:m,setData:o}),s!=="payment"&&t.jsx("div",{className:"mt-8 flex justify-end",children:t.jsx("button",{type:"submit",disabled:x,className:"px-8 py-3 bg-[#ff3d03] text-white rounded-xl font-bold shadow-lg shadow-[#ff3d03]/20 hover:bg-[#e63700] transition-all disabled:opacity-50",children:x?"Salvando...":"Salvar Alterações"})})]})})]})})})]})}export{Rr as default};
