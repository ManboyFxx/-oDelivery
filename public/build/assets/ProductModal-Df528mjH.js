import{r as x,j as e,X as T,f as V}from"./app-BsdxgBYY.js";import{t as p}from"./index-BMjN4BSB.js";import{S as U}from"./shopping-bag-DHupEgp6.js";import{M as k}from"./minus-C_LQXMel.js";import{P as j}from"./plus-CAPz3Hx3.js";function A({product:r,isOpen:b,onClose:N,onAddToCart:S,initialValues:m}){const[c,d]=x.useState(1),[C,v]=x.useState(""),[h,D]=x.useState({});if(x.useEffect(()=>{if(!(!r||!b))if(m){d(m.quantity),v(m.notes);const s={};m.selectedComplements.forEach(t=>{s[t.groupId]||(s[t.groupId]={}),s[t.groupId][t.optionId]=t.quantity||1}),D(s)}else d(1),v(""),D({})},[r,m,b]),!r||!b)return null;const y=(s,t,l,o,a)=>{D(n=>{const i=n[s]||{},u=i[t]||0,f=Math.max(0,Math.min(u+l,o));if(Object.values(i).reduce((w,O)=>w+O,0)-u+f>a)return p.error(`Máximo de ${a} opções permitidas.`),n;const g={...i};return f===0?delete g[t]:g[t]=f,{...n,[s]:g}})},M=s=>{const t=h[s]||{};return Object.values(t).reduce((l,o)=>l+o,0)},P=()=>{let s=Number(r.promotional_price&&Number(r.promotional_price)>0?r.promotional_price:r.price);return r.complement_groups?.forEach(t=>{const l=h[t.id]||{};Object.entries(l).forEach(([o,a])=>{const n=t.options.find(i=>i.id===o);n&&(s+=n.price*a)})}),s*c},E=()=>{if(r.complement_groups)for(const t of r.complement_groups){const l=M(t.id);if(t.is_required&&l===0){p.error(`"${t.name}" é obrigatório.`);return}if(l>0&&l<t.min_selections){p.error(`Selecione pelo menos ${t.min_selections} em "${t.name}".`);return}}const s=[];r.complement_groups?.forEach(t=>{const l=h[t.id]||{};Object.entries(l).forEach(([o,a])=>{const n=t.options.find(i=>i.id===o);if(n&&a>0)for(let i=0;i<a;i++)s.push({groupId:t.id,optionId:n.id,name:n.name,price:n.price,quantity:1})})}),S({product:r,quantity:c,notes:C,selectedComplements:s,subtotal:P()}),N()};return e.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center pointer-events-none",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm pointer-events-auto transition-opacity",onClick:N},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:142,columnNumber:13},this),e.jsxDEV("div",{className:"bg-white dark:bg-premium-dark w-full md:max-w-2xl h-full md:h-auto md:max-h-[90vh] md:rounded-3xl shadow-2xl overflow-hidden flex flex-col pointer-events-auto animate-in slide-in-from-bottom md:slide-in-from-bottom-10 duration-300 transition-colors duration-300",children:[e.jsxDEV("div",{className:"h-48 md:h-64 relative shrink-0",children:[r.image_url?e.jsxDEV("img",{src:r.image_url,className:"w-full h-full object-cover",alt:r.name},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:152,columnNumber:25},this):e.jsxDEV("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center text-gray-300",children:e.jsxDEV(U,{className:"h-16 w-16"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:155,columnNumber:29},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:154,columnNumber:25},this),e.jsxDEV("button",{onClick:N,className:"absolute top-4 right-4 bg-black/50 hover:bg-black/70 p-2 rounded-full backdrop-blur-md transition-all group",children:e.jsxDEV(T,{className:"h-5 w-5 text-white group-hover:scale-110 transition-transform"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:162,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:158,columnNumber:21},this),e.jsxDEV("div",{className:"absolute inset-x-0 bottom-0 h-12 bg-gradient-to-t from-black/10 to-transparent"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:165,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:150,columnNumber:17},this),e.jsxDEV("div",{className:"flex-1 overflow-y-auto px-6 py-6 relative bg-white dark:bg-premium-dark transition-colors duration-300",children:[e.jsxDEV("div",{className:"mb-4",children:[e.jsxDEV("h2",{className:"text-2xl md:text-3xl font-black text-gray-900 dark:text-white leading-tight mb-2 transition-colors duration-300",children:r.name},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:171,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed transition-colors duration-300",children:r.description},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:172,columnNumber:25},this),e.jsxDEV("span",{className:"text-2xl font-black text-primary",children:["R$ ",Number(r.promotional_price||r.price).toFixed(2).replace(".",",")]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:173,columnNumber:29},this),r.promotional_price&&e.jsxDEV("span",{className:"ml-3 text-sm text-gray-400 line-through",children:["R$ ",Number(r.price).toFixed(2).replace(".",",")]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:177,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:170,columnNumber:21},this),r.complement_groups?.map(s=>{const t=M(s.id),l=(!s.is_required||t>=s.min_selections)&&t<=s.max_selections;return e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-3 sticky top-0 bg-white dark:bg-premium-dark py-2 z-10 border-b border-gray-100 dark:border-white/5 transition-colors duration-300",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-bold text-gray-900 dark:text-white text-lg flex items-center gap-2 transition-colors duration-300",children:[s.name,s.is_required&&e.jsxDEV("span",{className:"text-primary text-xs font-black uppercase bg-primary/10 px-2 py-0.5 rounded-full",children:"Obrigatório"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:195,columnNumber:67},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:193,columnNumber:41},this),e.jsxDEV("p",{className:"text-xs text-gray-500 dark:text-gray-400 transition-colors duration-300",children:[s.min_selections>0?`Mín: ${s.min_selections}`:"",s.max_selections<100?` • Máx: ${s.max_selections}`:""]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:197,columnNumber:41},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:192,columnNumber:37},this),e.jsxDEV("div",{className:V("text-xs font-bold px-2 py-1 rounded-full transition-colors duration-300",l?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-white/5 text-gray-500 dark:text-gray-400"),children:[t,"/",s.max_selections]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:202,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:191,columnNumber:33},this),e.jsxDEV("div",{className:"space-y-3",children:s.options.map(o=>{const a=h[s.id]?.[o.id]||0,n=o.max_quantity||1,i=o.stock!==null&&o.stock!==void 0&&o.stock<=0,u=!i&&a<n&&t<s.max_selections;return e.jsxDEV("div",{className:V("flex items-center justify-between p-3 rounded-xl border transition-all duration-300",a>0?"border-primary bg-primary/5":"border-gray-100 dark:border-white/5",!i&&"cursor-pointer hover:border-gray-200 dark:hover:border-white/10",i&&"opacity-60 bg-gray-50 dark:bg-white/5 grayscale pointer-events-none"),children:[e.jsxDEV("div",{className:"flex-1",onClick:()=>u&&y(s.id,o.id,1,n,s.max_selections),children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"font-medium text-gray-900 dark:text-white transition-colors duration-300",children:o.name},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:226,columnNumber:57},this),i&&e.jsxDEV("span",{className:"text-[10px] font-black uppercase bg-red-100 dark:bg-red-500/20 text-red-600 dark:text-red-400 px-2 py-0.5 rounded-full",children:"Esgotado"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:228,columnNumber:61},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:225,columnNumber:53},this),o.price>0&&e.jsxDEV("div",{className:"text-sm text-gray-500 dark:text-gray-400 transition-colors duration-300",children:["+ R$ ",o.price.toFixed(2).replace(".",",")]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:234,columnNumber:57},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:224,columnNumber:49},this),a>0||u?e.jsxDEV("div",{className:"flex items-center gap-3 bg-white dark:bg-premium-card rounded-lg p-1 shadow-sm border border-gray-100 dark:border-white/5 transition-colors duration-300",children:[a>0&&e.jsxDEV("button",{onClick:()=>y(s.id,o.id,-1,n,s.max_selections),className:"p-1 hover:bg-gray-100 dark:hover:bg-white/10 rounded text-gray-600 dark:text-gray-400 transition-colors",children:e.jsxDEV(k,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:247,columnNumber:65},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:243,columnNumber:61},this),a>0&&e.jsxDEV("span",{className:"font-bold text-sm min-w-[1rem] text-center text-gray-900 dark:text-white transition-colors duration-300",children:a},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:250,columnNumber:69},this),e.jsxDEV("button",{onClick:()=>y(s.id,o.id,1,n,s.max_selections),disabled:!u,className:"p-1 hover:bg-gray-100 dark:hover:bg-white/10 rounded text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:e.jsxDEV(j,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:256,columnNumber:61},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:251,columnNumber:57},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:241,columnNumber:53},this):e.jsxDEV("div",{className:"h-8 w-8 rounded-full border border-gray-200 dark:border-white/10 flex items-center justify-center text-gray-400 dark:text-gray-500 transition-colors duration-300",children:e.jsxDEV(j,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:261,columnNumber:57},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:260,columnNumber:53},this)]},o.id,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:218,columnNumber:45},this)})},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:210,columnNumber:33},this)]},s.id,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:190,columnNumber:29},this)}),e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("label",{className:"block font-bold text-gray-900 dark:text-white mb-2 transition-colors duration-300",children:"Observações"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:274,columnNumber:25},this),e.jsxDEV("textarea",{value:C,onChange:s=>v(s.target.value),placeholder:"Ex: Sem cebola, capricha no molho...",className:"w-full p-4 bg-gray-50 dark:bg-white/5 border-none rounded-xl focus:ring-2 focus:ring-primary resize-none text-sm text-gray-900 dark:text-white placeholder:text-gray-400 transition-colors duration-300",rows:3},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:275,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:273,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:169,columnNumber:17},this),e.jsxDEV("div",{className:"p-4 md:p-6 border-t border-gray-100 dark:border-white/5 bg-white dark:bg-premium-dark md:rounded-b-3xl shrink-0 relative z-20 pb-safe transition-colors duration-300",children:e.jsxDEV("div",{className:"flex gap-4",children:[e.jsxDEV("div",{className:"flex items-center gap-3 bg-gray-100 dark:bg-white/5 rounded-xl px-2 transition-colors duration-300",children:[e.jsxDEV("button",{onClick:()=>d(Math.max(1,c-1)),className:"h-10 w-10 flex items-center justify-center text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white transition-colors",children:e.jsxDEV(k,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:293,columnNumber:33},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:289,columnNumber:29},this),e.jsxDEV("span",{className:"font-black text-xl w-8 text-center text-gray-900 dark:text-white transition-colors duration-300",children:c},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:295,columnNumber:29},this),e.jsxDEV("button",{onClick:()=>d(c+1),className:"h-10 w-10 flex items-center justify-center text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white transition-colors",children:e.jsxDEV(j,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:300,columnNumber:33},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:296,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:288,columnNumber:25},this),e.jsxDEV("button",{onClick:E,style:{backgroundColor:"var(--primary-color)"},className:"flex-1 text-white font-bold py-4 rounded-xl shadow-lg shadow-primary/30 hover:brightness-90 transition-all active:scale-[0.98] flex items-center justify-between px-6",children:[e.jsxDEV("span",{children:m?"Atualizar Pedido":"Adicionar"},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:308,columnNumber:29},this),e.jsxDEV("span",{children:["R$ ",P().toFixed(2).replace(".",",")]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:309,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:303,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:287,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:286,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:148,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Pages/Tenant/Menu/Components/ProductModal.tsx",lineNumber:140,columnNumber:9},this)}export{A as default};
