import{c as Ie,r as d,j as e,e as c,u as ue,H as Le,X as v,a as L}from"./app-cmDn-ScS.js";import{A as Ve,U as ee}from"./AuthenticatedLayout-B0kZBw41.js";import{M as te}from"./Modal-Sh_XDp3_.js";import{I as se}from"./InputLabel-CMFi5QJo.js";import{T as fe}from"./TextInput-BF2AA_N-.js";import{P as Ue}from"./PrimaryButton-DXaL0-Hd.js";import{U as je}from"./user-CoX3wr4g.js";import{S as we}from"./search-BkQeIgdy.js";import{C as re}from"./check-D9hl0_Uz.js";import{S as y}from"./shopping-cart-Bv9X3vh4.js";import{L as V}from"./layout-grid-CYesW7DK.js";import{I as ae}from"./image-7WoxDlDu.js";import{P as k}from"./plus-DYYyYX85.js";import{M as U}from"./minus-BI3hxpKV.js";import{T as Be}from"./trash-2-D22XP5zf.js";import{B as pe}from"./banknote-BczAYXhh.js";import{C as Ge}from"./credit-card-OmDi8ddi.js";import{Q as He}from"./qr-code-BcoxO7T-.js";import{C as We}from"./circle-alert-C7XNV0iI.js";import"./shopping-bag-HL2bdqNk.js";import"./package-CcUPpoOH.js";import"./menu-D-TwlwJG.js";import"./use-resolve-button-type-DuTxu8YL.js";import"./keyboard-B1dAZWpV.js";import"./use-sync-refs-BiKwmHZ9.js";import"./portal-C9QA1GZF.js";import"./with-selector-mgSl_Jlt.js";import"./transition-BL9swOSS.js";import"./trophy-B_koKXyF.js";import"./chart-column-BXKl7CI6.js";import"./ticket-Bfa0MC-p.js";import"./shield-check-C-44Ypc8.js";import"./log-out-DJbLHuUV.js";import"./truck-DvYom0uY.js";import"./switch-C8DhdbdW.js";import"./hidden-BIwEDHIj.js";import"./chevron-down-DysrQlU5.js";import"./clock-DZoNQGyV.js";import"./sparkles-CL-wBgm9.js";import"./arrow-right-CuZLCI4b.js";const Xe=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Je=Ie("chevrons-up-down",Xe);function ye({customers:C,value:b,onChange:M}){const[T,n]=d.useState(!1),[h,j]=d.useState(""),$=d.useRef(null);d.useEffect(()=>{const i=B=>{$.current&&!$.current.contains(B.target)&&n(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[]);const p=h===""?C:C.filter(i=>i.name.toLowerCase().includes(h.toLowerCase())||i.phone.includes(h));return e.jsxs("div",{className:"relative",ref:$,children:[e.jsxs("div",{className:"w-full flex items-center justify-between rounded-lg border border-gray-300 bg-white py-2 pl-3 pr-3 text-sm focus-within:ring-2 focus-within:ring-yellow-500 focus-within:border-yellow-500 cursor-pointer dark:bg-[#2c2d30] dark:border-gray-700 dark:text-white",onClick:()=>n(!T),children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[e.jsx(je,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:c("truncate",!b&&"text-gray-400"),children:b?b.name:"Selecionar cliente..."})]}),e.jsx(Je,{className:"h-4 w-4 text-gray-400"})]}),T&&e.jsxs("div",{className:"absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm dark:bg-[#2c2d30] dark:ring-gray-700",children:[e.jsx("div",{className:"sticky top-0 bg-white p-2 border-b dark:bg-[#2c2d30] dark:border-gray-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"absolute left-2 top-1/2 h-3 w-3 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",className:"w-full rounded-md border border-gray-200 bg-gray-50 py-1 pl-7 pr-2 text-xs focus:border-yellow-500 focus:ring-yellow-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white",placeholder:"Buscar nome ou telefone...",value:h,onChange:i=>j(i.target.value),autoFocus:!0})]})}),p.length===0&&e.jsx("div",{className:"relative cursor-default select-none py-2 px-4 text-gray-700 dark:text-gray-400",children:"Nenhum cliente encontrado."}),p.map(i=>e.jsxs("div",{className:c("relative cursor-pointer select-none py-2 pl-3 pr-9 hover:bg-yellow-50 dark:hover:bg-yellow-900/10",b?.id===i.id?"text-yellow-600 bg-yellow-50 dark:text-yellow-500 dark:bg-yellow-900/10":"text-gray-900 dark:text-gray-200"),onClick:()=>{M(i),n(!1),j("")},children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"block truncate font-medium",children:i.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:i.phone}),i.loyalty_points!==void 0&&e.jsxs("span",{className:"flex items-center gap-0.5 text-yellow-600 dark:text-yellow-500 font-bold bg-yellow-100 dark:bg-yellow-900/30 px-1 rounded",children:[i.loyalty_points," pts"]})]})]}),b?.id===i.id&&e.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center pr-4 text-yellow-600",children:e.jsx(re,{className:"h-4 w-4"})})]},i.id)),b&&e.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 py-2 px-3 text-center text-xs text-red-500 font-medium hover:bg-red-50 dark:hover:bg-red-900/10 cursor-pointer",onClick:()=>{M(null),n(!1)},children:"Remover seleção"})]})]})}function Qt({categories:C,allProducts:b,tables:M=[],customers:T=[]}){const[n,h]=d.useState([]),[j,$]=d.useState(""),[p,i]=d.useState("all"),[B,G]=d.useState(!1),[Ne,F]=d.useState(!1),[H,P]=d.useState("sales"),[g,W]=d.useState(null),[x,le]=d.useState(null),[q,O]=d.useState(1),[de,X]=d.useState(""),[E,J]=d.useState({}),[z,K]=d.useState(null),[f,R]=d.useState(null),[ne,ve]=d.useState("cash"),[ke,D]=d.useState(!1),{data:ie,setData:oe,post:Ce,processing:_e,reset:Se}=ue({number:"",capacity:"4"}),Me=t=>{t.preventDefault(),Ce(route("tables.store"),{onSuccess:()=>{F(!1),Se()}})},{data:r,setData:w,post:Te,processing:ce,reset:$e,errors:Ke}=ue({items:[],customer_name:"",customer_id:"",payment_method:"cash",order_mode:"pickup",total:0}),[_,A]=d.useState(null),Fe=t=>{le(t),O(1),X(""),J({})},xe=()=>{le(null),O(1),X(""),J({})},qe=t=>{if(t.complement_groups&&t.complement_groups.length>0){Fe(t);return}h(s=>s.find(a=>a.id===t.id&&!a.selectedComplements)?s.map(a=>a.id===t.id&&!a.selectedComplements?{...a,quantity:a.quantity+1}:a):[...s,{...t,quantity:1}])},Re=()=>{if(!x)return;const t=[];Object.entries(E).forEach(([s,l])=>{Object.entries(l).forEach(([a,o])=>{const u=x.complement_groups?.find(S=>S.id===s)?.options.find(S=>S.id===a);u&&o>0&&t.push({groupId:s,optionId:a,name:u.name,price:u.price,quantity:o})})}),h(s=>[...s,{...x,quantity:q,notes:de,selectedComplements:t.length>0?t:void 0}]),xe()},me=(t,s,l,a,o)=>{J(m=>{const u=m[t]||{},S=u[s]||0,Y=Math.max(0,Math.min(S+l,a));if(Object.values(u).reduce((Ae,Qe)=>Ae+Qe,0)-S+Y>o)return m;const Z={...u};return Y===0?delete Z[s]:Z[s]=Y,{...m,[t]:Z}})},he=t=>{const s=E[t]||{};return Object.values(s).reduce((l,a)=>l+a,0)},Pe=()=>{if(!x?.complement_groups)return{valid:!0,message:""};for(const t of x.complement_groups){const s=he(t.id);if(t.is_required&&s===0)return{valid:!1,message:`"${t.name}" é obrigatório. Selecione pelo menos ${t.min_selections} opção(ões).`};if(s>0&&s<t.min_selections)return{valid:!1,message:`Selecione pelo menos ${t.min_selections} opção(ões) em "${t.name}".`};if(s>t.max_selections)return{valid:!1,message:`Selecione no máximo ${t.max_selections} opção(ões) em "${t.name}".`}}return{valid:!0,message:""}},Oe=()=>{if(!x)return 0;let t=Number(x.price);return x.complement_groups?.forEach(s=>{const l=E[s.id]||{};Object.entries(l).forEach(([a,o])=>{const m=s.options.find(u=>u.id===a);m&&(t+=m.price*o)})}),t*q},ge=t=>{h(s=>s.filter(l=>l.id!==t))},Q=(t,s)=>{h(l=>l.map(a=>{if(a.id===t){const o=Math.max(1,a.quantity+s);return{...a,quantity:o}}return a}))},N=d.useMemo(()=>n.reduce((t,s)=>{let l=Number(s.price)*s.quantity;if(s.selectedComplements){const a=s.selectedComplements.reduce((o,m)=>o+m.price*m.quantity,0);l+=a*s.quantity}return t+l},0),[n]),Ee=d.useMemo(()=>{let t=p==="all"?b:C.find(s=>s.id===p)?.products||[];if(j){const s=j.toLowerCase();t=t.filter(l=>l.name.toLowerCase().includes(s))}return t},[b,C,p,j]),be=()=>{n.length!==0&&(w({...r,items:n.map(t=>({id:t.id,quantity:t.quantity})),total:N}),G(!0))},I=t=>{if(t.preventDefault(),g){L.post(route("tables.addItems",g.id),{items:n.map(s=>({id:s.id,quantity:s.quantity}))},{onSuccess:()=>{h([]),W(null),P("tables")}});return}Te(route("pdv.store"),{onSuccess:()=>{G(!1),h([]),$e(),A(null)}})},ze=t=>{t.preventDefault(),z&&L.post(route("tables.open",z.id),{customer_id:_?.id,customer_name:_?.name},{onSuccess:()=>{K(null),A(null)}})},De=()=>{f&&confirm(`Fechar conta da mesa ${f.number}?`)&&L.post(route("tables.close",f.id),{payment_method:ne},{onSuccess:()=>R(null)})};return e.jsxs(Ve,{children:[e.jsx(Le,{title:"PDV"}),e.jsxs("div",{className:"flex flex-col h-[calc(100vh-65px)] overflow-hidden bg-gray-50 dark:bg-[#0f1012]",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] border-b border-gray-100 dark:border-white/5 px-4 py-3 flex items-center justify-between shrink-0 shadow-sm z-20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h1",{className:"text-xl font-black text-gray-900 dark:text-white tracking-tight hidden md:block",children:["PDV ",e.jsx("span",{className:"text-[#ff3d03]",children:"."})]}),e.jsxs("div",{className:"flex bg-gray-100 dark:bg-black/20 p-1 rounded-xl",children:[e.jsxs("button",{onClick:()=>P("sales"),className:c("px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-wide flex items-center gap-2 transition-all",H==="sales"?"bg-white dark:bg-[#ff3d03] text-gray-900 dark:text-white shadow-sm ring-1 ring-black/5":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),children:[e.jsx(y,{className:"h-4 w-4"}),"Caixa"]}),e.jsxs("button",{onClick:()=>P("tables"),className:c("px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-wide flex items-center gap-2 transition-all",H==="tables"?"bg-white dark:bg-[#ff3d03] text-gray-900 dark:text-white shadow-sm ring-1 ring-black/5":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),children:[e.jsx(V,{className:"h-4 w-4"}),"Mesas"]})]})]}),e.jsx("div",{className:"flex items-center gap-2"})]}),H==="sales"?e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 flex flex-col border-r border-gray-200 dark:border-white/5 bg-gray-50 dark:bg-[#0f1012]",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-[#1a1b1e] border-b border-gray-100 dark:border-white/5 space-y-4 shadow-sm z-10",children:[e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar produto por nome ou código...",value:j,onChange:t=>$(t.target.value),className:"w-full h-12 rounded-2xl border-none bg-gray-100 dark:bg-black/20 py-3 pl-12 text-gray-900 placeholder:text-gray-500 focus:ring-2 focus:ring-[#ff3d03]/20 dark:text-white transition-all shadow-inner"})]}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[e.jsx("button",{onClick:()=>i("all"),className:c("whitespace-nowrap rounded-xl px-5 py-2.5 text-xs font-bold uppercase tracking-wide transition-all shadow-sm",p==="all"?"bg-[#ff3d03] text-white shadow-[#ff3d03]/20":"bg-gray-100 dark:bg-white/5 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10"),children:"Todos"}),C.map(t=>e.jsx("button",{onClick:()=>i(t.id),className:c("whitespace-nowrap rounded-xl px-5 py-2.5 text-xs font-bold uppercase tracking-wide transition-all shadow-sm",p===t.id?"bg-[#ff3d03] text-white shadow-[#ff3d03]/20":"bg-gray-100 dark:bg-white/5 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10"),children:t.name},t.id))]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Ee.map(t=>e.jsxs("div",{onClick:()=>qe(t),className:"cursor-pointer group relative flex flex-col overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1e] shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-gray-100 dark:border-white/5",children:[e.jsxs("div",{className:"aspect-[4/3] w-full bg-gray-100 dark:bg-white/5 relative overflow-hidden",children:[t.image_url?e.jsx("img",{src:t.image_url,alt:t.name,className:"h-full w-full object-cover group-hover:scale-105 transition-transform duration-500"}):e.jsx("div",{className:"flex h-full items-center justify-center text-gray-300 dark:text-white/10",children:e.jsx(ae,{className:"h-8 w-8"})}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 p-3 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex justify-end",children:e.jsx("div",{className:"bg-[#ff3d03] text-white p-1.5 rounded-full shadow-lg",children:e.jsx(k,{className:"h-4 w-4"})})})]}),e.jsxs("div",{className:"p-3 flex flex-col flex-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-900 line-clamp-2 dark:text-white leading-tight mb-2 min-h-[2.5rem]",children:t.name}),e.jsxs("div",{className:"mt-auto pt-2 border-t border-gray-50 dark:border-white/5 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-black text-gray-900 dark:text-white",children:["R$ ",Number(t.price).toFixed(2).replace(".",",")]}),t.complement_groups&&t.complement_groups.length>0&&e.jsx("div",{className:"text-[10px] font-bold text-gray-400 bg-gray-50 dark:bg-white/5 px-2 py-0.5 rounded-md",children:"Opções"})]})]})]},t.id))})})]}),e.jsxs("div",{className:c("hidden lg:flex w-[400px] flex-col bg-white border-l border-gray-200 dark:bg-[#1a1b1e] dark:border-white/5 z-30 shadow-2xl transition-all relative",g&&"border-2 border-blue-500/50"),children:[e.jsxs("div",{className:"p-5 border-b border-gray-100 dark:border-white/5 flex items-center justify-between bg-white dark:bg-[#1a1b1e]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-[#ff3d03]/10 flex items-center justify-center text-[#ff3d03]",children:e.jsx(y,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-base text-gray-900 dark:text-white leading-tight",children:g?`Mesa ${g.number}`:"Nova Venda"}),e.jsxs("p",{className:"text-xs text-gray-400 font-medium",children:[n.length," itens no pedido"]})]})]}),g&&e.jsx("button",{onClick:()=>{W(null),h([])},className:"text-xs text-red-500 hover:text-red-600 font-bold bg-red-50 px-3 py-1.5 rounded-lg transition-colors",children:"Sair da Mesa"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50 dark:bg-[#0f1012] custom-scrollbar",children:n.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 space-y-4 opacity-60",children:[e.jsx(y,{className:"h-16 w-16 text-gray-300 dark:text-gray-700"}),e.jsx("p",{className:"text-sm font-medium",children:"Seu carrinho está vazio"})]}):n.map(t=>e.jsxs("div",{className:"relative group bg-white dark:bg-[#1a1b1e] p-3 rounded-2xl border border-gray-100 dark:border-white/5 hover:border-[#ff3d03]/30 transition-colors shadow-sm",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"h-14 w-14 rounded-xl bg-gray-100 dark:bg-white/5 flex-shrink-0 overflow-hidden",children:t.image_url?e.jsx("img",{src:t.image_url,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-300",children:e.jsx(ae,{className:"h-6 w-6"})})}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white truncate pr-6",children:t.name}),e.jsx("button",{onClick:()=>ge(t.id),className:"absolute top-3 right-3 text-gray-400 hover:text-red-500 p-1 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(v,{className:"h-3.5 w-3.5"})})]}),e.jsxs("div",{className:"flex justify-between items-end mt-1",children:[e.jsxs("p",{className:"text-xs font-medium text-[#ff3d03]",children:["R$ ",Number(t.price).toFixed(2).replace(".",",")]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-50 dark:bg-white/5 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>Q(t.id,-1),className:"h-6 w-6 flex items-center justify-center rounded-md hover:bg-white dark:hover:bg-white/10 text-gray-600 dark:text-gray-300 shadow-sm transition-all",children:e.jsx(U,{className:"h-3 w-3"})}),e.jsx("span",{className:"text-xs font-bold w-6 text-center tabular-nums dark:text-white",children:t.quantity}),e.jsx("button",{onClick:()=>Q(t.id,1),className:"h-6 w-6 flex items-center justify-center rounded-md hover:bg-white dark:hover:bg-white/10 text-gray-600 dark:text-gray-300 shadow-sm transition-all",children:e.jsx(k,{className:"h-3 w-3"})})]})]})]})]}),t.notes&&e.jsxs("div",{className:"mt-2 text-[10px] text-gray-500 bg-gray-50 dark:bg-black/20 p-1.5 rounded border border-dashed border-gray-200 dark:border-white/10",children:["Note: ",t.notes]})]},t.id))}),e.jsxs("div",{className:"p-5 border-t border-gray-100 dark:border-white/5 bg-white dark:bg-[#1a1b1e] space-y-4 shadow-[0_-10px_40px_rgba(0,0,0,0.05)]",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"Subtotal"}),e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:["R$ ",N.toFixed(2).replace(".",",")]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-black text-gray-900 dark:text-white",children:"Total"}),e.jsxs("span",{className:"text-2xl font-black text-[#ff3d03]",children:["R$ ",N.toFixed(2).replace(".",",")]})]})]}),e.jsxs("button",{onClick:g?I:be,disabled:n.length===0,className:"w-full h-14 flex items-center justify-center gap-2 bg-[#ff3d03] hover:bg-[#e63700] text-white font-bold text-base uppercase tracking-wide rounded-2xl shadow-lg shadow-[#ff3d03]/25 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none transition-all active:scale-[0.98]",children:[e.jsx(re,{className:"h-5 w-5"}),g?"Enviar p/ Mesa":"Receber / Finalizar"]})]})]}),e.jsxs("button",{onClick:()=>D(!0),className:"lg:hidden fixed bottom-6 right-6 z-40 h-16 w-16 bg-[#ff3d03] hover:bg-[#e63700] text-white rounded-full shadow-2xl shadow-[#ff3d03]/40 flex items-center justify-center transition-all active:scale-95",children:[e.jsx(y,{className:"h-6 w-6"}),n.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 h-6 w-6 bg-white text-[#ff3d03] rounded-full flex items-center justify-center text-xs font-black border-2 border-[#ff3d03]",children:n.length})]}),ke&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-50 animate-fade-in",onClick:()=>D(!1)}),e.jsxs("div",{className:"lg:hidden fixed inset-y-0 right-0 w-full max-w-md bg-white dark:bg-[#1a1b1e] z-50 shadow-2xl flex flex-col animate-slide-left",children:[e.jsxs("div",{className:"p-5 border-b border-gray-100 dark:border-white/5 flex items-center justify-between bg-white dark:bg-[#1a1b1e]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-[#ff3d03]/10 flex items-center justify-center text-[#ff3d03]",children:e.jsx(y,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-base text-gray-900 dark:text-white leading-tight",children:g?`Mesa ${g.number}`:"Nova Venda"}),e.jsxs("p",{className:"text-xs text-gray-400 font-medium",children:[n.length," itens no pedido"]})]})]}),e.jsx("button",{onClick:()=>D(!1),className:"h-10 w-10 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-white/5 text-gray-400",children:e.jsx(v,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50 dark:bg-[#0f1012]",children:n.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 space-y-4 opacity-60",children:[e.jsx(y,{className:"h-16 w-16 text-gray-300 dark:text-gray-700"}),e.jsx("p",{className:"text-sm font-medium",children:"Seu carrinho está vazio"})]}):n.map(t=>e.jsxs("div",{className:"relative group bg-white dark:bg-[#1a1b1e] p-3 rounded-2xl border border-gray-100 dark:border-white/5 hover:border-[#ff3d03]/30 transition-colors shadow-sm",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"h-14 w-14 rounded-xl bg-gray-100 dark:bg-white/5 flex-shrink-0 overflow-hidden",children:t.image_url?e.jsx("img",{src:t.image_url,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-300",children:e.jsx(ae,{className:"h-6 w-6"})})}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white truncate pr-6",children:t.name}),e.jsx("button",{onClick:()=>ge(t.id),className:"absolute top-3 right-3 text-gray-400 hover:text-red-500 p-1 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(v,{className:"h-3.5 w-3.5"})})]}),e.jsxs("div",{className:"flex justify-between items-end mt-1",children:[e.jsxs("p",{className:"text-xs font-medium text-[#ff3d03]",children:["R$ ",Number(t.price).toFixed(2).replace(".",",")]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-50 dark:bg-white/5 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>Q(t.id,-1),className:"h-6 w-6 flex items-center justify-center rounded-md hover:bg-white dark:hover:bg-white/10 text-gray-600 dark:text-gray-300 shadow-sm transition-all",children:e.jsx(U,{className:"h-3 w-3"})}),e.jsx("span",{className:"text-xs font-bold w-6 text-center tabular-nums dark:text-white",children:t.quantity}),e.jsx("button",{onClick:()=>Q(t.id,1),className:"h-6 w-6 flex items-center justify-center rounded-md hover:bg-white dark:hover:bg-white/10 text-gray-600 dark:text-gray-300 shadow-sm transition-all",children:e.jsx(k,{className:"h-3 w-3"})})]})]})]})]}),t.notes&&e.jsxs("div",{className:"mt-2 text-[10px] text-gray-500 bg-gray-50 dark:bg-black/20 p-1.5 rounded border border-dashed border-gray-200 dark:border-white/10",children:["Note: ",t.notes]})]},t.id))}),e.jsxs("div",{className:"p-5 border-t border-gray-100 dark:border-white/5 bg-white dark:bg-[#1a1b1e] space-y-4 shadow-[0_-10px_40px_rgba(0,0,0,0.05)]",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"Subtotal"}),e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:["R$ ",N.toFixed(2).replace(".",",")]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-black text-gray-900 dark:text-white",children:"Total"}),e.jsxs("span",{className:"text-2xl font-black text-[#ff3d03]",children:["R$ ",N.toFixed(2).replace(".",",")]})]})]}),e.jsxs("button",{onClick:()=>{D(!1),g?I():be()},disabled:n.length===0,className:"w-full h-14 flex items-center justify-center gap-2 bg-[#ff3d03] hover:bg-[#e63700] text-white font-bold text-base uppercase tracking-wide rounded-2xl shadow-lg shadow-[#ff3d03]/25 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none transition-all active:scale-[0.98]",children:[e.jsx(re,{className:"h-5 w-5"}),g?"Enviar p/ Mesa":"Receber / Finalizar"]})]})]})]})]}):e.jsxs("div",{className:"flex-1 overflow-y-auto p-8 bg-gray-50 dark:bg-[#0f1012]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white tracking-tight",children:"Mapa de Mesas"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Gerencie a ocupação e pedidos das mesas."})]}),e.jsxs("button",{onClick:()=>F(!0),className:"bg-gray-900 dark:bg-white text-white dark:text-gray-900 px-5 py-2.5 rounded-xl text-sm font-bold flex items-center gap-2 hover:opacity-90 shadow-lg",children:[e.jsx(k,{className:"h-4 w-4"})," Nova Mesa"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:[M.map(t=>e.jsxs("div",{className:`relative p-8 rounded-[24px] border flex flex-col items-center justify-center min-h-[180px] transition-all duration-300 group shadow-sm hover:shadow-2xl ${t.status==="free"?"bg-light-card dark:bg-[#1a1b1e] border-gray-100 dark:border-white/5 hover:border-green-400/50":"bg-red-50 dark:bg-red-900/10 border-red-100 dark:border-red-900/20 hover:border-red-400/50"}`,children:[e.jsxs("button",{onClick:()=>{t.status==="free"?K(t):R(t)},className:`absolute top-4 right-4 flex items-center gap-1.5 text-[10px] font-black tracking-widest uppercase px-3 py-1.5 rounded-full cursor-pointer hover:scale-105 transition-all shadow-sm ${t.status==="free"?"bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-400"}`,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t.status==="free"?"bg-green-500":"bg-red-500"}`}),t.status==="free"?"LIVRE":"OCUPADA"]}),e.jsx("span",{className:"text-5xl font-black text-white dark:text-white mb-3",children:t.number}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 dark:text-gray-500 text-sm font-medium bg-gray-50 dark:bg-black/20 px-3 py-1 rounded-lg",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsxs("span",{children:[t.capacity," lugares"]})]}),e.jsx("div",{className:"absolute inset-x-0 bottom-4 flex justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("button",{onClick:()=>{confirm("Excluir mesa?")&&L.delete(route("tables.destroy",t.id))},className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors",title:"Excluir Mesa",children:e.jsx(Be,{className:"h-4 w-4"})})})]},t.id)),M.length===0&&e.jsxs("div",{className:"col-span-full py-20 flex flex-col items-center justify-center text-gray-400 dark:text-gray-600 border-2 border-dashed border-gray-200 dark:border-gray-800 rounded-3xl",children:[e.jsx(V,{className:"h-12 w-12 mb-4 opacity-20"}),e.jsx("p",{className:"font-medium",children:"Nenhuma mesa cadastrada."}),e.jsx("p",{className:"text-sm mt-1",children:"Adicione uma nova mesa para começar a gerenciar o salão."})]})]})]})]}),B&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-end sm:justify-center p-0 sm:p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] h-full sm:h-auto sm:rounded-[2rem] w-full max-w-lg shadow-2xl overflow-hidden flex flex-col animate-slide-up",children:[e.jsxs("div",{className:"px-8 py-6 border-b border-gray-100 dark:border-white/5 flex justify-between items-center bg-white dark:bg-[#1a1b1e]",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-gray-900 dark:text-white tracking-tight",children:"Finalizar Pedido"}),e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Confirme os detalhes do pagamento"})]}),e.jsx("button",{onClick:()=>G(!1),className:"h-10 w-10 bg-gray-50 dark:bg-white/5 rounded-full flex items-center justify-center text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:e.jsx(v,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:I,className:"p-8 space-y-8 overflow-y-auto custom-scrollbar flex-1",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Tipo de Pedido"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{id:"pickup",label:"Retirada",icon:y},{id:"table",label:"Mesa",icon:V},{id:"delivery",label:"Entregas",icon:ee}].map(t=>e.jsx("button",{type:"button",onClick:()=>w("order_mode",t.id),className:c("py-3 px-2 rounded-xl text-sm font-bold flex flex-col items-center gap-2 transition-all border-2",r.order_mode===t.id?"border-[#ff3d03] bg-[#ff3d03]/5 text-[#ff3d03]":"border-gray-100 dark:border-white/5 bg-gray-50 dark:bg-white/5 text-gray-500 hover:border-gray-300 dark:hover:border-white/20"),children:t.label},t.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Cliente / Fidelidade"}),e.jsx(ye,{customers:T,value:_,onChange:t=>{A(t),w(s=>({...s,customer_id:t?.id||null,customer_name:t?.name||""}))}}),_&&e.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl border border-yellow-100 dark:border-yellow-900/30 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-bold text-yellow-800 dark:text-yellow-500",children:"Saldo Fidelidade"}),e.jsxs("span",{className:"text-lg font-black text-yellow-600 dark:text-yellow-400",children:[_.loyalty_points||0," pts"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Método de Pagamento"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{type:"button",onClick:()=>w("payment_method","cash"),className:c("w-full flex items-center gap-4 p-4 rounded-2xl border-2 transition-all",r.payment_method==="cash"?"border-green-500 bg-green-50/50 dark:bg-green-900/10":"border-gray-100 dark:border-white/5 hover:bg-gray-50 dark:hover:bg-white/5"),children:[e.jsx("div",{className:c("h-10 w-10 rounded-full flex items-center justify-center",r.payment_method==="cash"?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"),children:e.jsx(pe,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("span",{className:c("block font-bold",r.payment_method==="cash"?"text-green-900 dark:text-white":"text-gray-700 dark:text-gray-300"),children:"Dinheiro"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Pagamento em espécie"})]}),r.payment_method==="cash"&&e.jsx("div",{className:"h-4 w-4 bg-green-500 rounded-full border-2 border-white ring-2 ring-green-200"})]}),e.jsxs("button",{type:"button",onClick:()=>w("payment_method","credit_card"),className:c("w-full flex items-center gap-4 p-4 rounded-2xl border-2 transition-all",r.payment_method==="credit_card"?"border-blue-500 bg-blue-50/50 dark:bg-blue-900/10":"border-gray-100 dark:border-white/5 hover:bg-gray-50 dark:hover:bg-white/5"),children:[e.jsx("div",{className:c("h-10 w-10 rounded-full flex items-center justify-center",r.payment_method==="credit_card"?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-400"),children:e.jsx(Ge,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("span",{className:c("block font-bold",r.payment_method==="credit_card"?"text-blue-900 dark:text-white":"text-gray-700 dark:text-gray-300"),children:"Cartão"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Crédito ou Débito"})]}),r.payment_method==="credit_card"&&e.jsx("div",{className:"h-4 w-4 bg-blue-500 rounded-full border-2 border-white ring-2 ring-blue-200"})]}),e.jsxs("button",{type:"button",onClick:()=>w("payment_method","pix"),className:c("w-full flex items-center gap-4 p-4 rounded-2xl border-2 transition-all",r.payment_method==="pix"?"border-teal-500 bg-teal-50/50 dark:bg-teal-900/10":"border-gray-100 dark:border-white/5 hover:bg-gray-50 dark:hover:bg-white/5"),children:[e.jsx("div",{className:c("h-10 w-10 rounded-full flex items-center justify-center",r.payment_method==="pix"?"bg-teal-100 text-teal-600":"bg-gray-100 text-gray-400"),children:e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("span",{className:c("block font-bold",r.payment_method==="pix"?"text-teal-900 dark:text-white":"text-gray-700 dark:text-gray-300"),children:"Pix"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Pagamento instantâneo"})]}),r.payment_method==="pix"&&e.jsx("div",{className:"h-4 w-4 bg-teal-500 rounded-full border-2 border-white ring-2 ring-teal-200"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Resumo do Pedido"}),e.jsx("div",{className:"bg-gray-50 dark:bg-black/20 rounded-2xl p-4 space-y-2 max-h-40 overflow-y-auto",children:n.map((t,s)=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:[t.quantity,"x ",b.find(l=>l.id===t.id)?.name]}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-bold",children:["R$ ",(parseFloat(b.find(l=>l.id===t.id)?.price||"0")*t.quantity).toFixed(2)]})]},s))})]}),r.order_mode==="delivery"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Endereço de Entrega *"}),e.jsx("textarea",{value:r.customer_name||"",onChange:t=>w("customer_name",t.target.value),className:"w-full px-4 py-3 border border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-[#ff3d03] focus:border-transparent bg-white dark:bg-premium-dark text-gray-900 dark:text-white resize-none",rows:3,placeholder:"Rua, número, bairro, complemento...",required:r.order_mode==="delivery"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"⚠️ Endereço obrigatório para entregas"})]}),e.jsxs("div",{className:"flex justify-between items-end pt-4 border-t border-gray-100 dark:border-white/5",children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"Total a pagar"}),e.jsxs("span",{className:"text-3xl font-black text-gray-900 dark:text-white",children:["R$ ",N.toFixed(2).replace(".",",")]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-white/5 bg-gray-50 dark:bg-black/20 space-y-3",children:[r.order_mode==="delivery"&&!r.customer_name&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl",children:[e.jsx(We,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-xs font-medium text-yellow-800 dark:text-yellow-500",children:"Preencha o endereço de entrega"})]}),e.jsx("button",{onClick:t=>I(t),disabled:ce||r.order_mode==="delivery"&&!r.customer_name,className:"w-full rounded-2xl bg-[#ff3d03] py-4 text-base font-bold uppercase tracking-wide text-white shadow-xl shadow-[#ff3d03]/20 hover:bg-[#e63700] hover:scale-[1.02] disabled:opacity-50 disabled:scale-100 disabled:cursor-not-allowed transition-all",children:ce?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processando..."]}):`✓ Confirmar ${r.order_mode==="delivery"?"Entrega":r.order_mode==="pickup"?"Retirada":"Mesa"} - R$ ${N.toFixed(2)}`})]})]})}),e.jsx(te,{show:Ne,onClose:()=>F(!1),maxWidth:"sm",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white tracking-tight",children:"Nova Mesa"}),e.jsx("button",{onClick:()=>F(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(v,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:Me,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(se,{value:"Número da Mesa",className:"mb-2"}),e.jsx(fe,{type:"number",className:"w-full text-lg font-bold text-center h-14 rounded-xl",value:ie.number,onChange:t=>oe("number",t.target.value),placeholder:"Ex: 10",required:!0})]}),e.jsxs("div",{children:[e.jsx(se,{value:"Capacidade",className:"mb-2"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center text-gray-500",children:e.jsx(ee,{className:"h-6 w-6"})}),e.jsx(fe,{type:"number",className:"flex-1 text-lg font-bold h-12 rounded-xl",value:ie.capacity,onChange:t=>oe("capacity",t.target.value),min:"1",required:!0})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-gray-100 dark:border-white/5",children:[e.jsx("button",{type:"button",onClick:()=>F(!1),className:"px-5 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-100 transition-colors",children:"Cancelar"}),e.jsx(Ue,{disabled:_e,className:"bg-[#ff3d03] border-transparent rounded-xl px-6 py-3 shadow-lg hover:bg-[#e63700]",children:"Salvar Mesa"})]})]})]})}),e.jsx(te,{show:!!z,onClose:()=>K(null),maxWidth:"sm",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"h-16 w-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(V,{className:"h-8 w-8"})}),e.jsxs("h2",{className:"text-2xl font-black text-gray-900 dark:text-white",children:["Abrir Mesa ",z?.number]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Inicie um novo atendimento para esta mesa."})]}),e.jsxs("form",{onSubmit:ze,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(se,{value:"Nome do Cliente (Opcional)",className:"mb-2"}),e.jsx(ye,{customers:T,value:_,onChange:A})]}),e.jsx("button",{className:"w-full rounded-2xl bg-green-600 py-4 text-white font-bold text-base uppercase tracking-wide shadow-lg hover:bg-green-700 transition-all",children:"Iniciar Atendimento"})]})]})}),e.jsx(te,{show:!!f,onClose:()=>R(null),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Mesa ",f?.number]}),e.jsx("button",{onClick:()=>R(null),children:e.jsx(v,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg mb-4 max-h-60 overflow-y-auto",children:[e.jsx("h3",{className:"font-bold text-sm mb-2 text-gray-500",children:"CONSUMO ATUAL"}),f?.current_order?.items?.map((t,s)=>e.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-100 last:border-0 dark:border-gray-700 text-sm",children:[e.jsxs("span",{children:[t.quantity,"x ",t.product_name]}),e.jsxs("span",{children:["R$ ",Number(t.subtotal).toFixed(2)]})]},s)),e.jsxs("div",{className:"flex justify-between font-bold mt-2 pt-2 border-t border-gray-200",children:[e.jsx("span",{children:"Total Parcial"}),e.jsxs("span",{children:["R$ ",Number(f?.current_order?.total||0).toFixed(2)]})]}),f?.current_order?.customer&&e.jsxs("div",{className:"mt-2 text-xs text-green-600 font-medium flex items-center gap-1",children:[e.jsx(je,{className:"h-3 w-3"})," ",f.current_order.customer.name]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>{W(f),R(null),P("sales"),h([])},className:"flex items-center justify-center gap-2 bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700",children:[e.jsx(k,{className:"h-4 w-4"})," Adicionar Itens"]}),e.jsxs("button",{onClick:De,className:"flex items-center justify-center gap-2 bg-green-600 text-white font-bold py-3 rounded-lg hover:bg-green-700",children:[e.jsx(pe,{className:"h-4 w-4"})," Fechar Conta"]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-xs uppercase font-bold text-gray-500",children:"Forma de Pagamento (Fechar)"}),e.jsxs("select",{value:ne,onChange:t=>ve(t.target.value),className:"w-full mt-1 rounded-md border-gray-300 dark:bg-gray-700 dark:border-gray-600",children:[e.jsx("option",{value:"cash",children:"Dinheiro"}),e.jsx("option",{value:"credit_card",children:"Cartão de Crédito"}),e.jsx("option",{value:"debit_card",children:"Cartão de Débito"}),e.jsx("option",{value:"pix",children:"Pix"})]})]})]})}),x&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"sticky top-0 bg-white dark:bg-[#1a1b1e] px-6 py-4 border-b border-gray-200 dark:border-gray-800 flex justify-between items-center z-10",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:x.name}),e.jsx("button",{onClick:xe,className:"text-gray-400 hover:text-gray-600",children:e.jsx(v,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["R$ ",Number(x.price).toFixed(2).replace(".",",")]}),x.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:x.description})]}),x.complement_groups&&x.complement_groups.length>0&&e.jsx("div",{className:"space-y-4",children:x.complement_groups.map(t=>{const s=he(t.id),l=!t.is_required||s>=t.min_selections;return e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white",children:[t.name,t.is_required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded ${l?"bg-green-50 text-green-700":"bg-orange-50 text-orange-700"}`,children:[s,"/",t.max_selections]}),t.min_selections>0&&e.jsxs("span",{className:"text-xs text-gray-500",children:["Mín: ",t.min_selections]})]})]}),e.jsx("div",{className:"space-y-2",children:t.options.map(a=>{const o=E[t.id]?.[a.id]||0,m=a.max_quantity||999,u=o<m&&s<t.max_selections;return e.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-xl transition-colors ${o>0?"bg-orange-50 border-[#ff3d03]":"bg-white hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:a.name}),m<999&&e.jsxs("span",{className:"text-xs text-gray-400",children:["(máx: ",m,")"]})]}),a.price>0&&e.jsxs("span",{className:"text-sm text-gray-600",children:["+R$ ",a.price.toFixed(2).replace(".",","),o>1&&` × ${o} = R$ ${(a.price*o).toFixed(2).replace(".",",")}`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>me(t.id,a.id,-1,m,t.max_selections),disabled:o===0,className:"h-8 w-8 rounded-lg bg-gray-200 text-gray-700 flex items-center justify-center disabled:opacity-30 disabled:cursor-not-allowed hover:bg-gray-300 transition-colors",children:e.jsx(U,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-8 text-center font-bold text-gray-900",children:o}),e.jsx("button",{onClick:()=>me(t.id,a.id,1,m,t.max_selections),disabled:!u,className:"h-8 w-8 rounded-lg bg-[#ff3d03] text-white flex items-center justify-center disabled:opacity-30 disabled:cursor-not-allowed hover:bg-[#e63700] transition-colors",children:e.jsx(k,{className:"h-4 w-4"})})]})]},a.id)})})]},t.id)})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Observações (opcional)"}),e.jsx("textarea",{value:de,onChange:t=>X(t.target.value),placeholder:"Ex: Sem cebola, bem passado...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff3d03] focus:border-transparent dark:bg-gray-800 dark:border-gray-700 dark:text-white resize-none",rows:2})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>O(Math.max(1,q-1)),className:"h-10 w-10 rounded-lg bg-gray-200 text-gray-700 flex items-center justify-center hover:bg-gray-300 transition-colors",children:e.jsx(U,{className:"h-5 w-5"})}),e.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white w-12 text-center",children:q}),e.jsx("button",{onClick:()=>O(q+1),className:"h-10 w-10 rounded-lg bg-[#ff3d03] text-white flex items-center justify-center hover:bg-[#e63700] transition-colors",children:e.jsx(k,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",Oe().toFixed(2).replace(".",",")]})]})]}),e.jsxs("button",{onClick:()=>{const t=Pe();if(!t.valid){alert(t.message);return}Re()},className:"w-full flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-xl shadow-lg transition-all active:scale-[0.98]",children:[e.jsx(y,{className:"h-5 w-5"}),"Adicionar ao Carrinho"]})]})]})})]})}export{Qt as default};
