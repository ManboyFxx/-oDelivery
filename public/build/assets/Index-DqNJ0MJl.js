import{a6 as P,d as y,j as e,aW as u,W as S,ao as A,a2 as L,aX as _,t as E,a0 as w,L as M,V as O,a5 as $,x as T,aY as z,H as B,az as V,aA as U,w as W,aZ as H,aG as X,A as Y,a_ as q,F as G}from"./vendor-react-BYm2vN5O.js";import{A as I}from"./AuthenticatedLayout-CC45zQvs.js";import{M as K}from"./Modal-BU8I6Kmo.js";import{ab as N,S as v,b0 as k,bX as C,bY as Z,H as g,a2 as j}from"./vendor-others-BqROYnIz.js";import{P as J}from"./PrimaryButton-C8-r8q-u.js";import Q from"./TopProductsChart-BBhjrQzK.js";import ee from"./PaymentMethodsChart-Bq8zx_A9.js";import{R as ae,A as re,c as te,X as se,Y as de,T as oe,d as le}from"./vendor-charts-Cz84nZpW.js";import"./vendor-utils-DuuP9eDp.js";import"./app-Dqn1zKfB.js";import"./vendor-animation-DqfYcVFE.js";function ne(){const{url:d}=P(),o=new URLSearchParams(window.location.search),n=o.get("start_date")?new Date(o.get("start_date")):N(new Date),c=o.get("end_date")?new Date(o.get("end_date")):v(new Date),[t,x]=y.useState({from:n,to:c}),h=[{label:"Hoje",getValue:()=>({from:new Date,to:new Date})},{label:"Últimos 7 dias",getValue:()=>({from:C(new Date,6),to:new Date})},{label:"Últimos 30 dias",getValue:()=>({from:C(new Date,29),to:new Date})},{label:"Este Mês",getValue:()=>({from:N(new Date),to:v(new Date)})}],p=r=>{if(!r?.from)return;const s=g(r.from,"yyyy-MM-dd"),l=r.to?g(r.to,"yyyy-MM-dd"):s;E.get(window.location.pathname,{...Object.fromEntries(o),start_date:s,end_date:l},{preserveState:!0,preserveScroll:!0})},b=r=>{const s=r();x(s),p(s)},i=()=>{if(!t?.from)return"Selecionar Data";const r=h.find(s=>{const l=s.getValue();return j(l.from,t.from)&&j(l.to,t.to)});return r?r.label:t.to&&!j(t.from,t.to)?`${g(t.from,"dd/MM")} - ${g(t.to,"dd/MM")}`:g(t.from,"dd MMM")};return e.jsx(u,{className:"relative",children:({open:r,close:s})=>e.jsxs(e.Fragment,{children:[e.jsxs(u.Button,{className:k("flex items-center gap-2 px-4 py-2 bg-white dark:bg-[#1a1b1e] rounded-xl font-bold text-sm shadow-sm transition-all border",r?"ring-2 ring-[#ff3d03] border-transparent":"border-gray-100 dark:border-white/5 hover:bg-gray-50 dark:hover:bg-white/5","text-gray-700 dark:text-gray-300"),children:[e.jsx(S,{className:"h-4 w-4 text-[#ff3d03]"}),e.jsx("span",{children:i()}),e.jsx(A,{className:k("h-3 w-3 transition-transform",r&&"rotate-180")})]}),e.jsx(L,{as:y.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:e.jsx(u.Panel,{className:"absolute z-50 mt-2 w-[340px] md:w-[600px] bg-white dark:bg-[#1a1b1e] rounded-xl shadow-xl border border-gray-100 dark:border-white/10 overflow-hidden right-0",style:{maxWidth:"calc(100vw - 32px)"},children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("div",{className:"p-2 md:w-40 border-b md:border-b-0 md:border-r border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-black/20 flex flex-row md:flex-col gap-1 overflow-x-auto md:overflow-visible",children:h.map(l=>e.jsx("button",{onClick:()=>{b(l.getValue),s()},className:"px-3 py-2 text-sm font-medium rounded-lg hover:bg-white dark:hover:bg-white/5 hover:shadow-sm text-left truncate transition-all text-gray-600 dark:text-gray-400 whitespace-nowrap",children:l.label},l.label))}),e.jsxs("div",{className:"p-4 flex-1",children:[e.jsx(_,{mode:"range",defaultMonth:t?.from,selected:t,onSelect:x,locale:Z,numberOfMonths:1,modifiersClassNames:{selected:"bg-[#ff3d03] text-white",today:"font-bold text-[#ff3d03]"},styles:{head_cell:{width:"40px",color:"#6b7280"},cell:{width:"40px"},day:{margin:"auto",borderRadius:"8px"},nav_button:{color:"#ff3d03"}}}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t border-gray-100 dark:border-white/5",children:[e.jsx("button",{onClick:()=>s(),className:"px-4 py-2 text-sm font-bold text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"Cancelar"}),e.jsx("button",{onClick:()=>{p(t),s()},className:"px-4 py-2 bg-[#ff3d03] hover:bg-[#e63700] text-white text-sm font-bold rounded-lg shadow-lg shadow-[#ff3d03]/20",children:"Aplicar Filtro"})]})]})]})})})]})})}function D({title:d="Funcionalidade Premium",description:o="Disponível no plano PRO.",children:n,isLocked:c}){return c?e.jsxs("div",{className:"relative group overflow-hidden rounded-xl border border-gray-200",children:[e.jsx("div",{className:"filter blur-sm select-none pointer-events-none opacity-40 transition-all duration-300",children:n}),e.jsx("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center bg-white/60 dark:bg-gray-900/60 transition-opacity",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-xl text-center max-w-sm border border-gray-100 dark:border-gray-700 transform scale-100 transition-transform",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4 text-gray-500 dark:text-gray-400",children:e.jsx(w,{className:"w-6 h-6"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:d}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:o}),e.jsx(M,{href:route("subscription.plans"),children:e.jsx(J,{className:"w-full justify-center bg-gray-900 hover:bg-gray-800",children:"Fazer Upgrade"})})]})})]}):e.jsx(e.Fragment,{children:n})}function je({metrics:d,chart_data:o,transactions:n,top_products:c=[],payment_methods_stats:t=[],current_plan:x,is_trial:h,filters:p}){const[b,i]=y.useState(!1),[r,s]=y.useState(!1),f=!(x==="pro"||x==="custom"||h),m=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),R=[{title:"Faturamento Total",value:d.total_revenue,change:`+${d.growth}%`,trend:d.growth>=0?"up":"down",icon:O,primary:!0,formatter:m},{title:"Ticket Médio",value:d.average_ticket,change:"+2.4%",trend:"up",icon:$,primary:!1,formatter:m},{title:"Pedidos Realizados",value:d.orders_count,change:"+15.2%",trend:"up",icon:T,primary:!1,formatter:a=>a},{title:"Lucro Líquido (Est.)",value:d.total_revenue*.85,change:"+12.1%",trend:"up",icon:z,primary:!1,formatter:m}];return e.jsxs(I,{header:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Relatórios Financeiros"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Acompanhe o desempenho do seu negócio"})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[f?e.jsxs("div",{className:"flex items-center gap-2 bg-yellow-100 text-yellow-800 px-3 py-2 rounded-lg text-sm border border-yellow-200",title:"Upgrade para selecionar datas",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{children:"Últimos 7 dias"}),e.jsx(M,{href:route("subscription.plans"),className:"font-bold underline ml-1",children:"Upgrade"})]}):e.jsx(ne,{}),e.jsxs("button",{onClick:()=>i(!0),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-sm shadow-sm transition-colors border border-gray-100 dark:border-white/5 ${r?"bg-white dark:bg-[#1a1b1e] text-gray-700 dark:text-gray-300 hover:bg-gray-50":"bg-[#ff3d03] text-white hover:bg-[#e63700] hover:scale-105 shadow-[#ff3d03]/20 shadow-lg"}`,children:[r?e.jsx(w,{className:"h-4 w-4"}):e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:r?"Fechar Caixa":"Abrir Caixa"})]}),e.jsxs("button",{className:"bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 px-3 py-2 rounded-lg flex items-center gap-2 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Exportar"})]})]})]}),children:[e.jsx(B,{title:"Financeiro"}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:R.map((a,F)=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${a.primary?"bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:e.jsx(a.icon,{className:"w-6 h-6"})}),e.jsxs("div",{className:`flex items-center gap-1 text-sm font-medium ${a.trend==="up"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[a.change,a.trend==="up"?e.jsx(V,{className:"w-4 h-4"}):e.jsx(U,{className:"w-4 h-4"})]})]}),e.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium mb-1",children:a.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.formatter(a.value)})]},F))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-gray-400"}),"Evolução de Faturamento"]})}),e.jsx("div",{className:"h-72 w-full",children:e.jsx(ae,{width:"100%",height:"100%",children:e.jsxs(re,{data:o,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#ff3d03",stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:"#ff3d03",stopOpacity:0})]})}),e.jsx(te,{strokeDasharray:"3 3",vertical:!1,stroke:"#E5E7EB"}),e.jsx(se,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fill:"#6B7280",fontSize:12},dy:10}),e.jsx(de,{axisLine:!1,tickLine:!1,tick:{fill:"#6B7280",fontSize:12},tickFormatter:a=>`R$ ${a}`}),e.jsx(oe,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:a=>[m(a),"Faturamento"]}),e.jsx(le,{type:"monotone",dataKey:"value",stroke:"#ff3d03",strokeWidth:3,fillOpacity:1,fill:"url(#colorRevenue)"})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5 text-gray-400"}),"Métodos de Pagamento"]}),e.jsx(D,{isLocked:f,title:"Análise de Pagamentos",description:"Entenda como seus clientes preferem pagar.",children:e.jsx(ee,{data:t})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-gray-400"}),"Produtos Mais Vendidos"]}),e.jsx(D,{isLocked:f,title:"Produtos Top Sellers",description:"Descubra o que mais sai na sua cozinha.",children:e.jsx(Q,{data:c})})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center",children:e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Y,{className:"w-5 h-5 text-gray-400"}),"Transações Recentes"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 text-gray-500 font-medium border-b border-gray-100 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"ID"}),e.jsx("th",{className:"px-6 py-4",children:"Cliente"}),e.jsx("th",{className:"px-6 py-4",children:"Data"}),e.jsx("th",{className:"px-6 py-4",children:"Método"}),e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Valor"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:[n.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 font-mono text-gray-500",children:["#",a.id]}),e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:a.customer}),e.jsx("td",{className:"px-6 py-4 text-gray-500",children:a.date}),e.jsx("td",{className:"px-6 py-4 text-gray-500 flex items-center gap-2",children:a.payment_method}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize
                                                        ${a.status==="completed"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":""}
                                                        ${a.status==="pending"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":""}
                                                        ${a.status==="refunded"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":""}
                                                    `,children:a.status==="completed"?"Concluído":a.status==="pending"?"Pendente":"Estornado"})}),e.jsx("td",{className:"px-6 py-4 text-right font-medium text-gray-900 dark:text-white",children:m(a.amount)})]},a.id)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:"Nenhuma transação encontrada neste período."})})]})]})})]})]})]})}),e.jsx(K,{show:b,onClose:()=>i(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:r?"Fechar Caixa":"Abrir Caixa"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Esta funcionalidade está em desenvolvimento."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>i(!1),className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{onClick:()=>{s(!r),i(!1)},className:"bg-[#ff3d03] text-white px-4 py-2 rounded-lg hover:bg-[#e63700]",children:"Confirmar"})]})]})})]})}export{je as default};
