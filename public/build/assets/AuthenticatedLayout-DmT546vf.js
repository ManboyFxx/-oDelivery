import{a6 as A,d as c,aB as J,x as R,ax as Q,aC as X,aD as E,a3 as Y,aE as I,a5 as Z,U as ee,aF as te,av as se,aG as F,aq as re,ab as $,v as _,F as ae,aH as ne,K as oe,aI as ie,j as e,X as G,L as M,aJ as le,a2 as U,aK as de,aL as ce,aM as C,ao as B,_ as P,aN as xe,aO as z,t as T,aP as ue,G as me,aQ as he,aR as pe,aS as ge,ag as q,ac as K,T as fe}from"./vendor-react-BRbeZxQj.js";import{b0 as j}from"./vendor-others-CI9KCNiO.js";import{M as be}from"./Modal-j3wD4Y2Q.js";import{u as V,a as je}from"./app-w_IWnRYJ.js";function ve({isOpen:t,onClose:s}){const{url:l,props:d}=A(),o=d.auth.user,[u,a]=c.useState(!1),m=c.useRef(null);c.useEffect(()=>{const x=m.current;if(!x)return;const h=sessionStorage.getItem("sidebar-scroll-position");h&&(x.scrollTop=parseInt(h,10));const p=()=>{sessionStorage.setItem("sidebar-scroll-position",x.scrollTop.toString())};return x.addEventListener("scroll",p),()=>x.removeEventListener("scroll",p)},[]);const r=x=>l.startsWith(x);c.useEffect(()=>{a(!1),s?.()},[l]);const g=()=>{a(!1),s?.()},v=[{title:"Operação",items:[{name:"PDV / Caixa",href:route("pdv.index"),route:"pdv.index",icon:J,current:r("/pdv")},{name:"Pedidos",href:route("orders.index"),route:"orders.index",icon:R,current:r("/orders")},{name:"Cozinha (KDS)",href:route("kitchen.index"),route:"kitchen.index",icon:Q,current:r("/kitchen")},{name:"Estoque",href:route("stock.index"),route:"stock.index",icon:X,current:r("/estoque")}]},{title:"Cardápio",items:[{name:"Gestão de Cardápio",href:route("menu.index"),route:"menu.index",icon:E,current:r("/cardapio")},{name:"Produtos",href:route("products.index"),route:"products.index",icon:Y,current:r("/products")}]}],k=[{title:"Visão Geral",items:[{name:"Dashboard",href:route("dashboard"),route:"dashboard",icon:I,current:r("/dashboard")},{name:"Minha Assinatura",href:route("subscription.index"),route:"subscription.index",icon:Z,current:r("/subscription")}]},{title:"Gestão",items:[{name:"Clientes",href:route("customers.index"),route:"customers.index",icon:ee,current:r("/customers")},{name:"Equipe",href:route("employees.index"),route:"employees.index",icon:te,current:r("/employees")},{name:"Fidelidade",href:route("loyalty.index"),route:"loyalty.index",icon:se,current:r("/fidelidade")},{name:"Financeiro",href:route("financial.index"),route:"financial.index",icon:F,current:r("/financeiro")}]},{title:"Marketing",items:[{name:"Cupons",href:route("coupons.index"),route:"coupons.index",icon:re,current:r("/coupons")},{name:"WhatsApp",href:route("whatsapp.index"),route:"whatsapp.index",icon:$,current:r("/whatsapp")}]},{title:"Configurações",items:[{name:"Loja",href:route("settings.index"),route:"settings.index",icon:_,current:r("/settings")}]},{title:"Sistema",items:[{name:"Apps & Downloads",href:route("system.downloads"),route:"system.downloads",icon:ae,current:r("/sistema/downloads")}]}],f={title:"Ajuda",items:[{name:"Suporte",href:route("support.index"),route:"support.index",icon:ne,current:r("/suporte")}]},w=o.role==="admin"?[...v,...k,f]:[...v,f],n=[{title:"Administração",items:[{name:"Dashboard",href:route("admin.dashboard"),route:"admin.dashboard",icon:I,current:r("/admin/dashboard")},{name:"Tenants",href:route("admin.tenants.index"),route:"admin.tenants.index",icon:_,current:r("/admin/tenants")}]},{title:"Sistema",items:[{name:"API Keys",href:route("admin.api-keys.index"),route:"admin.api-keys.index",icon:oe,current:r("/admin/api-keys")},{name:"WhatsApp Master",href:route("admin.whatsapp.index"),route:"admin.whatsapp.index",icon:$,current:r("/admin/whatsapp")&&!r("/admin/whatsapp/templates")},{name:"Templates Padrão",href:route("admin.whatsapp.templates.index"),route:"admin.whatsapp.templates.index",icon:E,current:r("/admin/whatsapp/templates")},{name:"Logs de Segurança",href:route("admin.logs.security"),route:"admin.logs.security",icon:ie,current:r("/admin/logs")}]}],b=o.role==="super_admin"?n:w,i=d.tenant?.limits;return e.jsxs(e.Fragment,{children:[(t||u)&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black/60 backdrop-blur-sm lg:hidden transition-opacity",onClick:()=>{a(!1),s?.()}}),e.jsxs("aside",{className:j("fixed inset-y-0 left-0 z-50 flex h-screen w-72 flex-col justify-between border-r border-white/5 bg-[#0a0a0a] selection:bg-orange-500/20 transition-transform duration-300 ease-out",t||u?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[e.jsxs("div",{className:"flex-none pt-8 pb-6 px-6 bg-[#0a0a0a]",children:[e.jsx("div",{className:"flex items-center gap-4 px-2",children:e.jsxs("div",{className:"flex flex-col w-full gap-1",children:[e.jsx("img",{src:"/images/logo.png",alt:"ÓoDelivery",className:"h-14 w-auto object-contain mx-auto mb-2"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-[10px] font-black text-white/40 uppercase tracking-[0.2em]",children:"Painel Gestor"})})]})}),e.jsx("button",{onClick:()=>{a(!1),s?.()},className:"lg:hidden absolute top-4 right-4 p-2 rounded-lg hover:bg-white/10 text-white/60 hover:text-white transition-colors",children:e.jsx(G,{className:"h-5 w-5"})})]}),e.jsx("div",{ref:m,className:"flex-1 overflow-y-auto px-4 py-2 scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent hover:scrollbar-thumb-white/20",children:e.jsx("nav",{className:"flex flex-col gap-6 pb-6",children:b.map((x,h)=>e.jsxs("div",{children:[x.title&&e.jsx("h3",{className:j("mb-2 px-4 text-[10px] font-black uppercase tracking-widest",x.title==="Sistema"?"text-cyan-500/80":"text-white/30"),children:x.title}),e.jsx("div",{className:"space-y-1",children:x.items.map(p=>{const S=p.name==="Apps & Downloads";return e.jsxs(M,{href:p.href,onClick:g,className:j("group relative flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-bold transition-all duration-200",p.current?S?"bg-cyan-500/10 text-cyan-400":"bg-[#ff3d03]/10 text-[#ff3d03]":"text-gray-400 hover:bg-white/5 hover:text-white"),children:[p.current&&e.jsx("div",{className:j("absolute left-0 top-1/2 -translate-y-1/2 h-8 w-1 rounded-r-full",S?"bg-cyan-400":"bg-[#ff3d03]")}),e.jsx(p.icon,{className:j("h-5 w-5 transition-transform duration-200 group-hover:scale-110",p.current?S?"text-cyan-400":"text-[#ff3d03]":"text-gray-500 group-hover:text-white")}),e.jsx("span",{className:"relative z-10 font-bold tracking-wide",children:p.name}),!p.current&&e.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]},p.name)})})]},h))})}),i&&i.products&&i.orders&&e.jsxs("div",{className:"mx-4 mb-2 p-4 rounded-2xl bg-white/5 border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 opacity-60",children:[e.jsx(F,{size:14,className:"text-white"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-white",children:"Consumo do Plano"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-gray-400 mb-1",children:[e.jsx("span",{children:"Produtos"}),e.jsxs("span",{children:[i.products.used," / ",i.products.max??"∞"]})]}),i.products.max?e.jsx("div",{className:"h-1.5 w-full bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:j("h-full rounded-full transition-all duration-500",i.products.used/i.products.max>.9?"bg-red-500":"bg-[#ff3d03]"),style:{width:`${Math.min(i.products.used/i.products.max*100,100)}%`}})}):e.jsx("span",{className:"text-[10px] text-green-400 font-bold",children:"Ilimitado"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-gray-400 mb-1",children:[e.jsx("span",{children:"Pedidos (Mês)"}),e.jsxs("span",{children:[i.orders.used," / ",i.orders.max??"∞"]})]}),i.orders.max?e.jsx("div",{className:"h-1.5 w-full bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:j("h-full rounded-full transition-all duration-500",i.orders.used/i.orders.max>.9?"bg-red-500":"bg-blue-500"),style:{width:`${Math.min(i.orders.used/i.orders.max*100,100)}%`}})}):e.jsx("span",{className:"text-[10px] text-green-400 font-bold",children:"Ilimitado"})]})]}),e.jsxs("div",{className:"flex-none p-4 bg-[#0a0a0a] border-t border-white/5",children:[e.jsxs(M,{href:route("logout"),onClick:g,method:"post",as:"button",className:"group flex w-full items-center gap-3 rounded-2xl px-4 py-3 text-sm font-bold text-gray-400 hover:bg-red-500/10 hover:text-red-500 transition-all duration-200",children:[e.jsx(le,{className:"h-5 w-5 transition-transform group-hover:-translate-x-1"}),e.jsx("span",{children:"Sair do Sistema"})]}),e.jsxs("div",{className:"mt-4 px-2 flex justify-between items-center opacity-30 hover:opacity-100 transition-opacity",children:[e.jsx("span",{className:"text-[10px] font-medium text-white",children:"v4.0.0 Pro"}),e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-green-500 animate-pulse"})]})]})]})]})}const L=c.createContext({open:!1,setOpen:()=>{},toggleOpen:()=>{}}),N=({children:t})=>{const[s,l]=c.useState(!1),d=()=>{l(o=>!o)};return e.jsx(L.Provider,{value:{open:s,setOpen:l,toggleOpen:d},children:e.jsx("div",{className:"relative",children:t})})},we=({children:t})=>{const{open:s,setOpen:l,toggleOpen:d}=c.useContext(L);return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:d,children:t}),s&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)})]})},ye=({align:t="right",width:s="48",contentClasses:l="py-1 bg-white dark:bg-gray-700",children:d})=>{const{open:o,setOpen:u}=c.useContext(L);let a="origin-top";t==="left"?a="ltr:origin-top-left rtl:origin-top-right start-0":t==="right"&&(a="ltr:origin-top-right rtl:origin-top-left end-0");let m="";return s==="48"&&(m="w-48"),e.jsx(e.Fragment,{children:e.jsx(U,{show:o,enter:"transition ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsx("div",{className:`absolute z-50 mt-2 rounded-md shadow-lg ${a} ${m}`,onClick:()=>u(!1),children:e.jsx("div",{className:"rounded-md ring-1 ring-black ring-opacity-5 "+l,children:d})})})})},Ne=({className:t="",children:s,...l})=>e.jsx(M,{...l,className:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none dark:text-gray-300 dark:hover:bg-gray-800 dark:focus:bg-gray-800 "+t,children:s});N.Trigger=we;N.Content=ye;N.Link=Ne;function ke(){const{tenant:t}=A().props;if(!t)return null;const{store_status:s}=t;if(console.log("DEBUG Store Status:",s),!s)return null;const[l,d]=c.useState(!1),[o,u]=c.useState(""),a=s.is_open,m=s.is_delivery_paused,r=!!s.paused_until,g=s.status_override,v=n=>{T.post(route("settings.update"),{status_override:n},{preserveScroll:!0,preserveState:!0})},k=n=>{T.post(route("settings.update"),{is_delivery_paused:n},{preserveScroll:!0,preserveState:!0})},f=n=>{let b=null;if(n){const i=new Date;i.setMinutes(i.getMinutes()+n),b=i.toISOString()}T.post(route("settings.update"),{paused_until:b},{preserveScroll:!0,preserveState:!0,onSuccess:()=>d(!1)})},w=n=>new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsxs("div",{className:`hidden md:flex items-center gap-2 px-3 py-1.5 rounded-full border transition-colors ${m?"bg-amber-50 border-amber-200 dark:bg-amber-900/20 dark:border-amber-800":"bg-white border-transparent dark:bg-white/5"}`,children:[e.jsx(de,{className:`w-4 h-4 ${m?"text-amber-500":"text-gray-400"}`}),e.jsx("span",{className:`text-xs font-medium ${m?"text-amber-700 dark:text-amber-400":"text-gray-600 dark:text-gray-400"}`,children:"Delivery"}),e.jsx(ce,{checked:!m,onChange:n=>k(!n),className:`${m?"bg-gray-300 dark:bg-gray-600":"bg-green-500"} relative inline-flex h-5 w-9 items-center rounded-full transition-colors`,children:e.jsx("span",{className:`${m?"translate-x-1":"translate-x-5"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]}),e.jsxs("div",{className:"flex items-center bg-white dark:bg-white/5 rounded-full p-1 border border-gray-100 dark:border-white/10 shadow-sm",children:[e.jsxs(C,{as:"div",className:"relative",children:[e.jsxs(C.Button,{className:`flex items-center gap-2 px-3 py-1.5 rounded-full font-bold text-sm transition-colors ${a?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 hover:bg-green-200":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 hover:bg-red-200"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-green-500":"bg-red-500"} animate-pulse`}),a?"Aberta":"Fechada",e.jsx(B,{className:"w-3 h-3 opacity-50"})]}),e.jsx(U,{as:c.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:e.jsxs(C.Items,{className:"absolute left-0 mt-2 w-56 origin-top-left bg-white dark:bg-gray-800 rounded-xl shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden divide-y divide-gray-100 dark:divide-white/5 disabled:opacity-50",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-white/5",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Modo de Operação"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${g===null?"bg-blue-500":"bg-gray-300"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:g==="open"?"Forçar Aberto":g==="closed"?"Forçar Fechado":"Automático"})]})]}),e.jsxs("div",{className:"p-1",children:[e.jsx(C.Item,{children:({active:n})=>e.jsxs("button",{onClick:()=>v(null),className:`${n?"bg-gray-100 dark:bg-white/5":""} flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm text-gray-700 dark:text-gray-200`,children:[e.jsx(P,{className:"w-4 h-4 text-blue-500"}),"Automático (Horários)",g===null&&e.jsx(_,{className:"w-3 h-3 ml-auto text-blue-500"})]})}),e.jsx(C.Item,{children:({active:n})=>e.jsxs("button",{onClick:()=>v("open"),className:`${n?"bg-green-50 dark:bg-green-900/10":""} flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm text-green-700 dark:text-green-400`,children:[e.jsx(xe,{className:"w-4 h-4"}),"Abrir Loja (Forçar)",g==="open"&&e.jsx(_,{className:"w-3 h-3 ml-auto text-green-500"})]})}),e.jsx(C.Item,{children:({active:n})=>e.jsxs("button",{onClick:()=>v("closed"),className:`${n?"bg-red-50 dark:bg-red-900/10":""} flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm text-red-700 dark:text-red-400`,children:[e.jsx(z,{className:"w-4 h-4"}),"Fechar Loja (Forçar)",g==="closed"&&e.jsx(_,{className:"w-3 h-3 ml-auto text-red-500"})]})})]})]})})]}),e.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-white/10 mx-1"}),r?e.jsxs("button",{onClick:()=>f(null),className:"flex items-center gap-2 px-3 py-1.5 text-xs font-bold text-amber-700 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/20 rounded-full transition-colors",title:"Clique para cancelar pausa",children:[e.jsx(P,{className:"w-4 h-4"}),"Até ",w(s.paused_until),e.jsx("span",{className:"hidden md:inline text-amber-600 dark:text-amber-500 ml-1",children:"✖"})]}):e.jsx("button",{onClick:()=>d(!0),className:"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full transition-colors",title:"Pausar Loja",children:e.jsx(z,{className:"w-5 h-5"})})]}),e.jsx(be,{show:l,onClose:()=>d(!1),maxWidth:"sm",children:e.jsxs("div",{className:"p-6 bg-white dark:bg-[#1a1b1e]",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5 text-amber-500"}),"Pausar Loja"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Por quanto tempo deseja pausar os pedidos? A loja ficará fechada temporariamente."}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsx("button",{onClick:()=>f(15),className:"bg-gray-100 dark:bg-white/5 hover:bg-amber-50 hover:text-amber-600 dark:hover:bg-amber-900/20 dark:hover:text-amber-400 border border-transparent hover:border-amber-200 rounded-xl py-3 text-sm font-bold transition-all",children:"15 min"}),e.jsx("button",{onClick:()=>f(30),className:"bg-gray-100 dark:bg-white/5 hover:bg-amber-50 hover:text-amber-600 dark:hover:bg-amber-900/20 dark:hover:text-amber-400 border border-transparent hover:border-amber-200 rounded-xl py-3 text-sm font-bold transition-all",children:"30 min"}),e.jsx("button",{onClick:()=>f(60),className:"bg-gray-100 dark:bg-white/5 hover:bg-amber-50 hover:text-amber-600 dark:hover:bg-amber-900/20 dark:hover:text-amber-400 border border-transparent hover:border-amber-200 rounded-xl py-3 text-sm font-bold transition-all",children:"1h"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"Outro (min)",value:o,onChange:n=>u(n.target.value),onKeyDown:n=>n.key==="Enter"&&o&&f(parseInt(o)),className:"flex-1 px-4 py-2 border border-gray-200 dark:border-white/10 rounded-xl bg-transparent text-sm focus:ring-2 focus:ring-amber-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>o&&f(parseInt(o)),className:"px-4 py-2 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-xl font-bold text-sm",children:"Aplicar"})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 text-sm font-medium",children:"Cancelar"})})]})})]})}function Ce({user:t,onMenuClick:s,hasUnread:l=!1,onRead:d}){const[o,u]=c.useState(()=>typeof window<"u"?localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches:!1),a=()=>{o?(document.documentElement.classList.remove("dark"),localStorage.theme="light",u(!1)):(document.documentElement.classList.add("dark"),localStorage.theme="dark",u(!0))};return e.jsxs("header",{className:"flex h-20 items-center justify-between bg-white px-4 md:px-8 dark:bg-[#0f1012] transition-colors border-b border-gray-100 dark:border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("button",{onClick:s,className:"lg:hidden p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400 transition-colors","aria-label":"Abrir menu",children:e.jsx(ue,{className:"h-6 w-6"})}),e.jsxs("div",{className:"relative hidden sm:block group",children:[e.jsx(me,{className:"absolute left-4 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400 group-focus-within:text-[#ff3d03] transition-colors"}),e.jsx("input",{type:"text",placeholder:"Pesquisar...",className:"h-11 w-64 rounded-2xl border-none bg-gray-100 pl-11 text-sm font-medium outline-none focus:ring-2 focus:ring-[#ff3d03]/20 dark:bg-[#1a1b1e] dark:text-gray-100 placeholder-gray-500 transition-all"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[e.jsx(ke,{}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:a,className:"rounded-xl p-2.5 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800 transition-colors",children:o?e.jsx(he,{className:"h-5 w-5"}):e.jsx(pe,{className:"h-5 w-5"})}),e.jsxs("button",{onClick:d,className:"relative rounded-xl p-2.5 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800 transition-colors group",children:[e.jsx(ge,{className:`h-5 w-5 ${l?"text-[#ff3d03] animate-bounce":""}`}),l&&e.jsx("span",{className:"absolute right-2.5 top-2.5 h-2.5 w-2.5 rounded-full bg-[#ff3d03] ring-2 ring-white dark:ring-[#0f1012] animate-pulse shadow-[0_0_8px_rgba(255,61,3,0.6)]"})]})]}),e.jsx("div",{className:"h-8 w-px bg-gray-200 dark:bg-gray-800 mx-1"}),e.jsxs(N,{children:[e.jsx(N.Trigger,{children:e.jsxs("button",{className:"flex items-center gap-3 text-left pl-2 pr-1 py-1 rounded-2xl hover:bg-gray-50 dark:hover:bg-white/5 transition-colors group",children:[e.jsx("div",{className:"h-9 w-9 bg-gradient-to-br from-[#ff3d03] to-[#d63302] text-white rounded-xl flex items-center justify-center font-black text-sm shadow-lg shadow-[#ff3d03]/20 group-hover:scale-105 transition-transform",children:t?.name?.substring(0,2).toUpperCase()||"AD"}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("p",{className:"text-xs font-bold text-gray-800 dark:text-white leading-tight group-hover:text-[#ff3d03] transition-colors",children:t?.name||"Administrador"}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-400 uppercase tracking-wide font-medium",children:[t?.role==="super_admin"?"Super Admin":t?.role==="admin"?"Proprietário":t?.role==="employee"?"Funcionário":"Entregador",e.jsx(B,{className:"h-3 w-3"})]})]})]})}),e.jsx(N.Content,{children:e.jsx(N.Link,{href:route("logout"),method:"post",as:"button",children:"Sair"})})]})]})]})}function Se({daysRemaining:t,planName:s="Básico",onClose:l}){const[d,o]=c.useState(!1);c.useEffect(()=>{const a=localStorage.getItem("trial_modal_dismissed_at"),m=new Date().toDateString();if(a!==m&&t<=3&&t>0){const r=setTimeout(()=>o(!0),2e3);return()=>clearTimeout(r)}},[t]);const u=()=>{o(!1),localStorage.setItem("trial_modal_dismissed_at",new Date().toDateString()),l?.()};return d?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:u}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-in fade-in zoom-in duration-300",children:[e.jsx("button",{onClick:u,className:"absolute top-4 right-4 p-1 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(G,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(P,{className:"w-8 h-8 text-[#ff3d03]"})})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:["Seu período de teste termina em ",t," ",t===1?"dia":"dias","!"]}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Você está aproveitando recursos do plano ",s,". Para continuar com acesso completo, escolha um plano."]})]}),e.jsx("div",{className:"bg-gradient-to-r from-[#ff3d03]/10 to-orange-100 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"w-5 h-5 text-[#ff3d03]"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-gray-900",children:"Oferta especial: 20% OFF no primeiro mês!"}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Use o código: ",e.jsx("span",{className:"font-mono font-bold",children:"TRIAL20"})]})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:u,className:"flex-1 py-3 px-4 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-xl transition-all text-sm",children:"Lembrar depois"}),e.jsxs(M,{href:route("subscription.upgrade"),className:"flex-1 py-3 px-4 bg-[#ff3d03] hover:bg-[#e63700] text-white font-bold rounded-xl transition-all text-sm flex items-center justify-center gap-2",children:["Ver Planos",e.jsx(K,{className:"w-4 h-4"})]})]})]})]}):null}function _e({daysRemaining:t,planName:s="Pro"}){if(t>30)return null;const l=t<=1,d=t<=3&&t>1,o=l?{bg:"bg-red-600",icon:fe,text:"text-white",button:"bg-white text-red-600 hover:bg-red-50"}:d?{bg:"bg-orange-500",icon:P,text:"text-white",button:"bg-white text-orange-600 hover:bg-orange-50"}:{bg:"bg-blue-600",icon:q,text:"text-white",button:"bg-white text-blue-600 hover:bg-blue-50"},u=o.icon;return e.jsx("div",{className:j("w-full px-4 py-3 shadow-md relative z-40 transition-colors duration-300",o.bg,o.text),children:e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 text-center sm:text-left",children:[e.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg shrink-0 hidden sm:block",children:e.jsx(u,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-base leading-tight",children:t<=0?"Seu período de teste acabou!":`Você tem ${t} dias de teste no plano ${s}.`}),e.jsx("p",{className:"opacity-90 text-xs sm:text-sm",children:t<=0?"Faça o upgrade agora para continuar vendendo sem interrupções.":"Aproveite todos os recursos liberados para configurar sua loja."})]})]}),e.jsxs(M,{href:route("subscription.index"),className:j("whitespace-nowrap px-5 py-2 rounded-lg font-bold text-xs sm:text-sm shadow-sm transition-all flex items-center gap-2 group",o.button),children:[t<=0?"Reativar Agora":"Assinar com Desconto",e.jsx(K,{className:"w-4 h-4 transition-transform group-hover:translate-x-1"})]})]})})}function Pe(){const{tenant:t}=A().props,{updateSettings:s}=V();return c.useEffect(()=>{t?.notification_settings&&s&&s(t.notification_settings)},[t,s]),null}function Te({user:t,header:s,children:l,tenant:d}){const{auth:o,tenant:u}=A().props,a=d||u,m=o.user,[r,g]=c.useState(!1),[v,k]=c.useState(!1),{success:f,error:w,info:n}=V(),{play:b,initializeAudio:i}=je(),{flash:x,toast:h}=A().props,p=c.useRef(null);c.useEffect(()=>{const y=()=>i();return window.addEventListener("click",y,{once:!0}),window.addEventListener("touchstart",y,{once:!0}),()=>{window.removeEventListener("click",y),window.removeEventListener("touchstart",y)}},[i]),c.useEffect(()=>{JSON.stringify(x)!==JSON.stringify(p.current)&&(x?.success&&f("Sucesso",x.success),x?.error&&w("Erro",x.error),h&&(h.type==="success"?f(h.title||"Sucesso",h.message):h.type==="error"?w(h.title||"Erro",h.message):n(h.title||"Info",h.message)),p.current=x)},[x,h,f,w,n]),c.useEffect(()=>{if(!a)return;const y=async()=>{try{const D=await fetch(route("api.orders.status-check"));if(!D.ok)return;const O=await D.json();O.hasNewOrders&&(b("new-order"),f("Novo Pedido!","Chegou um novo pedido!"),g(!0)),O.hasReadyOrders&&(b("ready"),n("Pedido Pronto!","Um pedido está pronto."),g(!0)),O.hasCanceledOrders&&(b("error"),w("Pedido Cancelado","Um pedido foi cancelado."),g(!0))}catch(D){console.error("Polling error",D)}};y();const H=setInterval(y,15e3);return()=>clearInterval(H)},[a?.id]);const S=a?.is_trial_expiring_soon&&(a?.trial_days_remaining??0)>0,W=a?.trial_days_remaining!==void 0&&a?.trial_days_remaining!==null;return e.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-premium-dark transition-colors",children:[e.jsx(Pe,{}),e.jsx(ve,{isOpen:v,onClose:()=>k(!1)}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden lg:pl-72 transition-all duration-300",children:[e.jsx(Ce,{user:t||m,onMenuClick:()=>k(!0),hasUnread:r,onRead:()=>g(!1)}),W&&e.jsx("div",{className:"sticky top-0 z-30",children:e.jsx(_e,{daysRemaining:a.trial_days_remaining,planName:a.plan_display_name})}),s&&e.jsx("header",{className:"bg-white dark:bg-premium-card shadow",children:e.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:s})}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 lg:p-8",children:e.jsx("div",{className:"max-w-[1600px] mx-auto w-full",children:l})})]}),S&&e.jsx(Se,{daysRemaining:a?.trial_days_remaining??0,planName:a?.plan_display_name})]})}export{Te as A};
