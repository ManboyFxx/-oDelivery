import{r as l,j as e,H as B,e as x,X as F,a as d}from"./app-DbPWLEQz.js";import{A as I}from"./AuthenticatedLayout-Dks_vcgM.js";import{P as Z}from"./plus-fIdjanZo.js";import{S as z}from"./search-DCnAb7aP.js";import{G as j}from"./grip-vertical-DDNRXd8J.js";import{C as H}from"./copy-DHVe42PH.js";import{P as L}from"./pen-Cnr8LU5J.js";import{T as v}from"./trash-2-De1fTJhq.js";import{C as R}from"./chevron-up-DmmfC514.js";import{C as T}from"./chevron-down-DsLcFt0A.js";import"./monitor-Cn7RiXhp.js";import"./shopping-bag-X5OyDO5n.js";import"./package-BoeND7Xk.js";import"./image-BXIRfbPU.js";import"./layout-dashboard-9BlQdCEh.js";import"./credit-card-eq2zZePW.js";import"./users-Da7bwuRb.js";import"./trophy-giYxlz_m.js";import"./ticket-DZADkc1G.js";import"./store-xDwxUMXW.js";import"./dollar-sign-axyloPHj.js";import"./key-BmQ0wdbL.js";import"./shield-check-Cs5LKv5H.js";import"./log-out-DKUiWj6w.js";import"./transition-DsAP_ylf.js";import"./use-sync-refs-DmsoagOF.js";import"./Modal-DXiZdhLA.js";import"./keyboard-DuHvJwgB.js";import"./portal-D4W2IGS0.js";import"./with-selector-o_2PE-6E.js";import"./hidden-BMuDQJ4j.js";import"./truck-NJXhfwgR.js";import"./switch-DX0liJHV.js";import"./use-resolve-button-type-CEmk7fhE.js";import"./menu-CipS6wKn.js";import"./clock-S-42N5z_.js";import"./circle-play-CIcDIZBj.js";import"./menu-DyhUAhI6.js";import"./sun-tgyWBYtU.js";import"./bell-BDtw9j92.js";import"./eye-CRm1aZoK.js";import"./arrow-left-DxvvzU6N.js";import"./usePushNotifications-Bw5K8vt_.js";import"./zap-pJsdy0H3.js";import"./star-Dj0UldL-.js";import"./chevron-right-CBRKy-mZ.js";import"./lock-NMhhQP24.js";function Ie({groups:N,ingredients:y}){const[p,w]=l.useState(""),[u,_]=l.useState(!1),[f,C]=l.useState([]),[k,o]=l.useState(!1),[n,h]=l.useState(null),[a,i]=l.useState({name:"",is_required:!1,min_selections:0,max_selections:1,options:[{name:"",price:0,is_available:!0,ingredient_id:null}]}),g=N.filter(s=>s.name.toLowerCase().includes(p.toLowerCase())),S=s=>{C(t=>t.includes(s)?t.filter(r=>r!==s):[...t,s])},G=()=>{h(null),i({name:"",is_required:!1,min_selections:0,max_selections:1,options:[{name:"",price:0,is_available:!0,ingredient_id:null}]}),o(!0)},E=s=>{h(s),i({name:s.name,is_required:s.is_required,min_selections:s.min_selections,max_selections:s.max_selections,options:s.options.map(t=>({id:t.id,name:t.name,price:t.price,is_available:t.is_available,ingredient_id:t.ingredient_id||null}))}),o(!0)},q=s=>{s.preventDefault(),n?d.put(`/complement-groups/${n.id}`,a,{onSuccess:()=>o(!1)}):d.post("/complement-groups",a,{onSuccess:()=>o(!1)})},A=s=>{confirm("Deseja realmente excluir este grupo de complementos?")&&d.delete(`/complement-groups/${s}`)},O=s=>{d.post(`/complement-groups/${s}/duplicate`)},D=()=>{i(s=>({...s,options:[...s.options,{name:"",price:0,is_available:!0,ingredient_id:null}]}))},M=s=>{i(t=>({...t,options:t.options.filter((r,c)=>c!==s)}))},m=(s,t,r)=>{i(c=>({...c,options:c.options.map((b,$)=>$===s?{...b,[t]:r}:b)}))},P=(s,t,r)=>{};return e.jsxs(I,{children:[e.jsx(B,{title:"Grupos de Complementos"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Grupos de Complementos"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Gerencie os complementos e adicionais dos seus produtos"})]}),e.jsxs("button",{onClick:G,className:"flex items-center gap-2 bg-[#ff8c00] hover:bg-[#e67e00] text-white font-bold px-6 py-3 rounded-xl transition-colors",children:[e.jsx(Z,{className:"h-5 w-5"}),"Novo Grupo"]})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(z,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar grupo ou opção...",value:p,onChange:s=>w(s.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#ff8c00] focus:border-transparent"})]}),e.jsx("button",{onClick:()=>_(!u),className:x("px-6 py-3 border rounded-xl font-medium transition-colors",u?"bg-[#ff8c00] text-white border-[#ff8c00]":"bg-white text-gray-700 border-gray-200 hover:border-[#ff8c00]"),children:"Ordenar A-Z"})]}),e.jsx("div",{className:"space-y-4",children:g.length===0?e.jsx("div",{className:"text-center py-12 bg-white rounded-xl border border-gray-200",children:e.jsx("p",{className:"text-gray-400",children:"Nenhum grupo encontrado"})}):g.map(s=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 flex items-center gap-4",children:[e.jsx("button",{className:"text-gray-400 hover:text-gray-600 cursor-move",children:e.jsx(j,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:s.name}),s.is_required&&e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full",children:"Obrigatório"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[s.options_count," opções • Min: ",s.min_selections," • Max: ",s.max_selections]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>O(s.id),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Duplicar",children:e.jsx(H,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>E(s),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(L,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>A(s.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir",children:e.jsx(v,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>S(s.id),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",children:f.includes(s.id)?e.jsx(R,{className:"h-5 w-5"}):e.jsx(T,{className:"h-5 w-5"})})]})]}),f.includes(s.id)&&e.jsx("div",{className:"border-t border-gray-200 bg-gray-50",children:s.options.map(t=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-gray-200 last:border-0 bg-white",children:[e.jsx("button",{className:"text-gray-300 hover:text-gray-500 cursor-move",children:e.jsx(j,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>P(s.id,t.id,t.is_available),className:x("relative w-12 h-6 rounded-full transition-colors",t.is_available?"bg-[#ff8c00]":"bg-gray-200"),children:e.jsx("div",{className:x("absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform",t.is_available&&"translate-x-6")})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium text-gray-700",children:t.name})}),e.jsx("div",{className:"text-sm text-gray-500",children:t.price===0?e.jsx("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs font-medium",children:"Grátis"}):e.jsxs("span",{className:"font-medium",children:["R$ ",t.price.toFixed(2)]})})]},t.id))})]},s.id))}),k&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>o(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:n?"Editar Grupo":"Novo Grupo de Complementos"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(F,{className:"h-6 w-6"})})]})}),e.jsxs("form",{onSubmit:q,className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Grupo *"}),e.jsx("input",{type:"text",value:a.name,onChange:s=>i({...a,name:s.target.value}),placeholder:"Ex: Escolha a Borda, Adicionais, Bebidas",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#ff8c00] focus:border-transparent",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mín. Seleções"}),e.jsx("input",{type:"number",min:"0",value:a.min_selections,onChange:s=>i({...a,min_selections:parseInt(s.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#ff8c00] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Máx. Seleções"}),e.jsx("input",{type:"number",min:"1",value:a.max_selections,onChange:s=>i({...a,max_selections:parseInt(s.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#ff8c00] focus:border-transparent"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.is_required,onChange:s=>i({...a,is_required:s.target.checked}),className:"h-5 w-5 text-[#ff8c00] rounded focus:ring-[#ff8c00]"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Obrigatório"})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Opções *"}),e.jsx("button",{type:"button",onClick:D,className:"text-sm text-[#ff8c00] hover:text-[#e67e00] font-medium",children:"+ Adicionar Opção"})]}),e.jsx("div",{className:"space-y-3",children:a.options.map((s,t)=>e.jsxs("div",{className:"flex gap-3 items-start p-3 border border-gray-200 rounded-xl",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-3",children:[e.jsx("input",{type:"text",value:s.name,onChange:r=>m(t,"name",r.target.value),placeholder:"Nome da opção",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff8c00] focus:border-transparent",required:!0}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:s.price,onChange:r=>m(t,"price",parseFloat(r.target.value)),placeholder:"Preço",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff8c00] focus:border-transparent",required:!0}),e.jsxs("select",{value:s.ingredient_id||"",onChange:r=>m(t,"ingredient_id",r.target.value||null),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff8c00] focus:border-transparent",children:[e.jsx("option",{value:"",children:"Sem ingrediente"}),y.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),a.options.length>1&&e.jsx("button",{type:"button",onClick:()=>M(t),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:e.jsx(v,{className:"h-4 w-4"})})]},t))})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"flex-1 bg-gray-100 text-gray-700 font-bold py-3 rounded-xl hover:bg-gray-200 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 bg-[#ff8c00] text-white font-bold py-3 rounded-xl hover:bg-[#e67e00] transition-colors",children:n?"Atualizar":"Criar Grupo"})]})]})]})})]})]})}export{Ie as default};
