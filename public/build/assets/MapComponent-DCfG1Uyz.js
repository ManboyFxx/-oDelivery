import{r as o,j as E}from"./app-CxA3AdnX.js";function v({currentLocation:r,destinationLocation:n,trajectoryCoordinates:t=[],zoom:R=15,apiKey:m,height:b="400px",showTrajectory:g=!1}){const l=o.useRef(null),s=o.useRef(null),i=o.useRef([]),a=o.useRef(null);o.useEffect(()=>{if(!(!l.current||!m))if(window.google?.maps)d();else{const e=document.createElement("script");return e.src=`https://maps.googleapis.com/maps/api/js?key=${m}&libraries=maps`,e.async=!0,e.defer=!0,e.onload=()=>{d()},e.onerror=()=>{console.error("Erro ao carregar Google Maps")},document.head.appendChild(e),()=>{}}},[m]);const d=()=>{if(!l.current||!window.google?.maps)return;const f=r||n||{lat:-23.5505,lng:-46.6333};s.current=new window.google.maps.Map(l.current,{zoom:R,center:f,mapTypeControl:!1,fullscreenControl:!0,streetViewControl:!1}),g&&t.length>0&&w(),r&&p(r,"Você está aqui","/images/icons/motoboy-marker.png"),n&&p(n,"Destino","/images/icons/destination-marker.png"),r&&n&&c()},p=(e,f,x)=>{if(!s.current)return;const h={position:e,map:s.current,title:f,animation:window.google.maps.Animation.DROP};x&&(h.icon={url:x,scaledSize:new window.google.maps.Size(32,32),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(16,32)});const u=new window.google.maps.Marker(h),k=new window.google.maps.InfoWindow({content:`<div style="padding: 8px;">
                <strong>${f}</strong>
                <p style="font-size: 0.85em; margin: 4px 0 0;">
                    ${e.lat.toFixed(4)}, ${e.lng.toFixed(4)}
                </p>
            </div>`});return u.addListener("click",()=>{i.current.forEach(M=>{M.infoWindow&&M.infoWindow.close()}),k.open(s.current,u)}),i.current.push({marker:u,infoWindow:k}),u},w=()=>{!s.current||t.length<2||(a.current&&a.current.setMap(null),a.current=new window.google.maps.Polyline({path:t,geodesic:!0,strokeColor:"#FF3D03",strokeOpacity:.8,strokeWeight:3,map:s.current}))},c=()=>{if(!s.current||!r||!n)return;const e=new window.google.maps.LatLngBounds;e.extend(r),e.extend(n),s.current.fitBounds(e)};return o.useEffect(()=>{s.current&&(i.current.forEach(e=>{e.marker.setMap(null)}),i.current=[],r&&p(r,"Você está aqui","/images/icons/motoboy-marker.png"),n&&p(n,"Destino","/images/icons/destination-marker.png"),r&&n?c():r?s.current.setCenter(r):n&&s.current.setCenter(n))},[r,n]),o.useEffect(()=>{g&&t.length>0&&w()},[t,g]),E.jsxDEV("div",{ref:l,style:{width:"100%",height:b,borderRadius:"12px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"}},void 0,!1,{fileName:"C:/Users/Vertinho/Documents/Sistemas/OoDelivery/-oDelivery/resources/js/Components/Motoboy/MapComponent.tsx",lineNumber:212,columnNumber:9},this)}export{v as M};
