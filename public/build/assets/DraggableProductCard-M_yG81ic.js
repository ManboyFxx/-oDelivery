import{r as l,j as e,X as k,a as j}from"./app-Dgan24MQ.js";import{u as v}from"./sortable.esm-B_LoDnr4.js";import{C as w}from"./core.esm-AZL3Zoll.js";import{P as y}from"./pencil-DDeyhH_E.js";import{C as N}from"./check-p0_lSAEb.js";import{C}from"./Checkbox-CgBQYgrt.js";import{G as S}from"./grip-vertical-D5UVDwJ4.js";import{I as E}from"./image-Ddej5_FC.js";import{T as D}from"./trash-2-BNvIyUKs.js";import{t as _}from"./switch-D1a6F8co.js";import"./use-resolve-button-type-Fr2eI3ah.js";import"./keyboard-u1ub4xyz.js";import"./use-sync-refs-C1-it5tV.js";import"./hidden-D85_TOZN.js";function z({value:t,productId:a,field:s,onSuccess:b,className:f="",formatValue:h}){const[n,i]=l.useState(!1),[u,c]=l.useState(t.toString()),[d,g]=l.useState(!1),o=l.useRef(null);l.useEffect(()=>{n&&o.current&&(o.current.focus(),o.current.select())},[n]);const m=()=>{if(u===t.toString()){i(!1);return}g(!0),j.patch(route("products.quick-update",a),{[s]:u},{preserveScroll:!0,onSuccess:()=>{i(!1),g(!1),b?.()},onError:()=>{c(t.toString()),i(!1),g(!1)}})},x=()=>{c(t.toString()),i(!1)},p=r=>{r.key==="Enter"?m():r.key==="Escape"&&x()};return n?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{ref:o,type:s==="price"?"number":"text",step:s==="price"?"0.01":void 0,value:u,onChange:r=>c(r.target.value),onKeyDown:p,onBlur:m,disabled:d,className:"w-24 px-2 py-1 text-sm border border-[#ff3d03] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#ff3d03]/20 bg-white dark:bg-gray-800"}),e.jsx("button",{onClick:m,disabled:d,className:"p-1 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors",children:e.jsx(N,{className:"h-4 w-4"})}),e.jsx("button",{onClick:x,disabled:d,className:"p-1 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",children:e.jsx(k,{className:"h-4 w-4"})})]}):e.jsxs("button",{onClick:()=>i(!0),className:`group relative inline-flex items-center gap-2 hover:text-[#ff3d03] transition-colors ${f}`,children:[e.jsx("span",{children:h?h(t):t}),e.jsx(y,{className:"h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})}const A=l.memo(function({product:a,selected:s,onSelect:b,onEdit:f,onDelete:h,onToggleAvailability:n,onPriceUpdate:i,isDragging:u}){const{attributes:c,listeners:d,setNodeRef:g,transform:o,transition:m,isDragging:x}=v({id:a.id}),p={transform:w.Transform.toString(o),transition:m,opacity:x?.3:1,zIndex:x?50:"auto"};return e.jsxs("div",{ref:g,style:p,className:`group relative bg-white dark:bg-[#0f1012] rounded-[24px] shadow-lg shadow-gray-200/50 dark:shadow-none transition-all duration-300 border border-gray-100 dark:border-white/5 overflow-hidden flex flex-col ${s?"ring-2 ring-[#ff3d03]":"hover:shadow-xl hover:-translate-y-1"}`,children:[e.jsx("div",{className:"absolute top-3 left-3 z-30 opacity-0 group-hover:opacity-100 transition-opacity duration-200",style:{opacity:s?1:void 0},children:e.jsx(C,{checked:s,onChange:r=>b(a.id,r.target.checked),className:"h-5 w-5 bg-white border-gray-300"})}),e.jsx("div",{...c,...d,className:"absolute top-3 right-1/2 translate-x-1/2 z-20 p-1.5 bg-black/20 dark:bg-white/10 backdrop-blur-md rounded-lg opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing text-white transition-opacity duration-200",children:e.jsx(S,{className:"h-4 w-4"})}),e.jsxs("div",{className:"relative aspect-[4/3] bg-gray-100 dark:bg-white/5 overflow-hidden",children:[a.image_url?e.jsx("img",{className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",src:a.image_url,alt:a.name,loading:"lazy"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(E,{className:"h-10 w-10 text-gray-300 dark:text-gray-600"})}),e.jsxs("div",{className:"absolute top-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 translate-y-2 group-hover:translate-y-0 z-20",children:[e.jsx("button",{onClick:()=>f(a),className:"bg-white/90 dark:bg-black/80 text-gray-700 dark:text-gray-200 p-2 rounded-xl hover:text-[#ff3d03] shadow-lg backdrop-blur-sm transition-colors",title:"Editar",children:e.jsx(y,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>h(a.id),className:"bg-white/90 dark:bg-black/80 text-gray-700 dark:text-gray-200 p-2 rounded-xl hover:text-red-500 shadow-lg backdrop-blur-sm transition-colors",title:"Excluir",children:e.jsx(D,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"absolute bottom-3 left-3 z-10",onClick:r=>r.stopPropagation(),children:e.jsx(_,{checked:a.is_available,onChange:()=>n(a),className:`${a.is_available?"bg-green-500":"bg-gray-300 dark:bg-gray-600"} relative inline-flex h-6 w-10 items-center rounded-full transition-colors focus:outline-none shadow-lg`,children:e.jsx("span",{className:`${a.is_available?"translate-x-5":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})}),!a.is_available&&e.jsx("div",{className:"absolute inset-0 bg-white/60 dark:bg-black/60 backdrop-blur-[1px] flex items-center justify-center pointer-events-none z-0",children:e.jsx("span",{className:"bg-black/70 text-white text-xs font-bold px-3 py-1 rounded-full backdrop-blur-md",children:"Indisponível"})})]}),e.jsxs("div",{className:"p-5 flex flex-col flex-1",children:[e.jsx("div",{className:"flex justify-between items-start mb-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-[#ff3d03] mb-1",children:a.category?.name||"Sem Categoria"}),e.jsx("h3",{className:"text-lg font-black text-gray-900 dark:text-white line-clamp-1 leading-tight",title:a.name,children:a.name})]})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 min-h-[2.5rem] leading-relaxed mb-4",children:a.description||"Sem descrição"}),e.jsxs("div",{className:"mt-auto pt-4 border-t border-gray-100 dark:border-white/5 flex items-center justify-between",children:[e.jsx(z,{value:a.price,productId:a.id,field:"price",onSuccess:()=>i(a.id,a.price),className:"text-xl font-black text-gray-900 dark:text-white tracking-tight",formatValue:r=>`R$ ${Number(r).toFixed(2).replace(".",",")}`}),e.jsx("div",{className:"flex gap-1.5",children:a.complementGroups&&a.complementGroups.length>0&&e.jsx("span",{className:"px-2 py-1 rounded-md bg-gray-100 dark:bg-white/10 text-xs font-bold text-gray-600 dark:text-gray-300",title:"Possui complementos",children:"+Opções"})})]})]})]})},(t,a)=>t.product.id===a.product.id&&t.product.name===a.product.name&&t.product.price===a.product.price&&t.product.is_available===a.product.is_available&&t.selected===a.selected&&t.isDragging===a.isDragging);export{A as default};
