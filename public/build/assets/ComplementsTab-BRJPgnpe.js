import{r as n,b as B,j as e,e as y,X as F,a as i,d as R}from"./app-D2VljvTw.js";import{S as T}from"./search-DgyBcvPy.js";import{P as k}from"./plus-XB2pHjD6.js";import{G as j}from"./grip-vertical-CY_5ZiYf.js";import{C as $}from"./copy-DaCLt717.js";import{P as L}from"./pen-BAXEgap9.js";import{T as v}from"./trash-2-D5qGatoK.js";import{C as V}from"./chevron-up-5o2dcKG6.js";import{C as z}from"./chevron-down-DopCl3ie.js";import{C as I}from"./circle-alert-XKeeM4ji.js";import{C as Q}from"./check-S0IfOmyK.js";function se({groups:w,ingredients:U}){const[b,N]=n.useState(""),[x,_]=n.useState([]),[C,d]=n.useState(!1),[c,g]=n.useState(null),[t,l]=n.useState({name:"",is_required:!1,min_selections:0,max_selections:1,options:[{name:"",price:0,max_quantity:1,is_available:!0,ingredient_id:null}]}),{errors:h}=B().props,u=w.filter(r=>r.name.toLowerCase().includes(b.toLowerCase())),p=r=>{_(a=>a.includes(r)?a.filter(s=>s!==r):[...a,r])},q=()=>{g(null),l({name:"",is_required:!1,min_selections:0,max_selections:1,options:[{name:"",price:0,max_quantity:null,is_available:!0,ingredient_id:null}]}),d(!0)},G=r=>{g(r),l({name:r.name,is_required:r.is_required,min_selections:r.min_selections,max_selections:r.max_selections,options:r.options.map(a=>({id:a.id,name:a.name,price:a.price,max_quantity:a.max_quantity||null,is_available:a.is_available,ingredient_id:a.ingredient_id||null}))}),d(!0)},S=r=>{r.preventDefault(),c?i.put(route("complements.update",c.id),t,{onSuccess:()=>d(!1)}):i.post(route("complements.store"),t,{onSuccess:()=>d(!1)})},E=r=>{confirm("Deseja realmente excluir este grupo de complementos?")&&i.delete(route("complements.destroy",r))},M=r=>{i.post(route("complements.duplicate",r))},O=()=>{l(r=>({...r,options:[...r.options,{name:"",price:0,max_quantity:null,is_available:!0,ingredient_id:null}]}))},D=r=>{l(a=>({...a,options:a.options.filter((s,o)=>o!==r)}))},m=(r,a,s)=>{l(o=>({...o,options:o.options.map((f,A)=>A===r?{...f,[a]:s}:f)}))},P=async(r,a,s)=>{try{await R.post(route("complements.toggle-option",{groupId:r,optionId:a})),i.reload({only:["complement_groups"]})}catch(o){console.error("Error toggling option:",o)}};return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white hidden md:block",children:"Gerenciar Complementos"}),e.jsxs("div",{className:"flex gap-4 w-full md:w-auto",children:[e.jsxs("div",{className:"relative flex-1 md:w-72",children:[e.jsx(T,{className:"absolute left-4 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:b,onChange:r=>N(r.target.value),placeholder:"Buscar grupos...",className:"w-full h-11 rounded-2xl border border-gray-200 bg-white pl-11 shadow-sm focus:border-[#ff3d03] focus:ring-[#ff3d03]/20 dark:border-white/5 dark:bg-[#0f1012] transition-all"})]}),e.jsxs("button",{onClick:q,className:"flex items-center gap-2 rounded-2xl bg-[#ff3d03] px-6 py-3 text-sm font-bold text-white shadow-lg shadow-[#ff3d03]/20 hover:bg-[#e63700] hover:scale-105 active:scale-95 transition-all whitespace-nowrap",children:[e.jsx(k,{className:"h-5 w-5"}),"Novo Grupo"]})]})]}),e.jsx("div",{className:"space-y-4",children:u.length===0?e.jsx("div",{className:"text-center py-12 bg-white dark:bg-[#1a1b1e] rounded-[24px] border border-gray-200 dark:border-white/5",children:e.jsx("p",{className:"text-gray-400",children:"Nenhum grupo encontrado"})}):u.map(r=>e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[24px] border border-gray-100 dark:border-white/5 shadow-sm overflow-hidden transition-all duration-300 hover:shadow-lg",children:[e.jsxs("div",{className:"p-5 flex items-center gap-4",children:[e.jsx("button",{className:"text-gray-300 hover:text-gray-600 dark:text-gray-600 dark:hover:text-gray-400 cursor-move",children:e.jsx(j,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>p(r.id),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-lg",children:r.name}),r.is_required&&e.jsx("span",{className:"text-[10px] uppercase font-bold bg-red-100 text-red-700 dark:bg-red-500/10 dark:text-red-400 px-2 py-1 rounded-lg",children:"Obrigatório"})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[r.options.length," opções • Min: ",r.min_selections," • Max: ",r.max_selections]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>M(r.id),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"Duplicar",children:e.jsx($,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>G(r),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Editar",children:e.jsx(L,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>E(r.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Excluir",children:e.jsx(v,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>p(r.id),className:`p-2 text-gray-400 hover:text-[#ff3d03] hover:bg-orange-50 dark:hover:bg-white/10 rounded-lg transition-all ${x.includes(r.id)?"bg-orange-50 text-[#ff3d03] dark:bg-white/10":""}`,children:x.includes(r.id)?e.jsx(V,{className:"h-5 w-5"}):e.jsx(z,{className:"h-5 w-5"})})]})]}),x.includes(r.id)&&e.jsx("div",{className:"border-t border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-black/20",children:r.options.map(a=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-gray-100 dark:border-white/5 last:border-0 hover:bg-white dark:hover:bg-white/5 transition-colors",children:[e.jsx("button",{className:"text-gray-300 hover:text-gray-500 cursor-move",children:e.jsx(j,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>P(r.id,a.id,a.is_available),className:y("relative w-10 h-6 rounded-full transition-colors focus:outline-none",a.is_available?"bg-[#ff3d03]":"bg-gray-300 dark:bg-gray-600"),children:e.jsx("div",{className:y("absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform shadow-sm",a.is_available&&"translate-x-4")})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-gray-700 dark:text-gray-300",children:a.name}),a.ingredient&&e.jsxs("p",{className:"text-xs text-blue-500 font-bold bg-blue-50 dark:bg-blue-900/20 px-2 py-0.5 rounded-md inline-block mt-1",children:["Vinculado: ",a.ingredient.name]})]}),e.jsx("div",{className:"text-sm",children:a.price===0?e.jsx("span",{className:"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400 px-3 py-1 rounded-lg text-xs font-bold uppercase tracking-wide",children:"Grátis"}):e.jsxs("span",{className:"font-black text-gray-900 dark:text-white bg-white dark:bg-white/10 px-3 py-1 rounded-lg border border-gray-100 dark:border-white/5",children:["R$ ",Number(a.price).toFixed(2)]})})]},a.id))})]},r.id))}),C&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>d(!1),children:e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-3xl w-full max-w-3xl max-h-[85vh] overflow-hidden flex flex-col shadow-2xl",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-white/5 flex justify-between items-center bg-gray-50/50 dark:bg-white/5",children:[e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white",children:c?"Editar Grupo":"Novo Grupo"}),e.jsx("button",{onClick:()=>d(!1),className:"h-8 w-8 rounded-full bg-white dark:bg-white/10 flex items-center justify-center text-gray-400 hover:text-red-500 transition-colors shadow-sm",children:e.jsx(F,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:S,className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:[Object.keys(h).length>0&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800 rounded-xl p-4 flex items-start gap-3",children:[e.jsx(I,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-red-800 dark:text-red-300 text-sm mb-1",children:"Não foi possível salvar o grupo"}),e.jsx("ul",{className:"text-sm text-red-600 dark:text-red-400 space-y-1 list-disc list-inside",children:Object.values(h).map((r,a)=>e.jsx("li",{children:r},a))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Nome do Grupo *"}),e.jsx("input",{type:"text",value:t.name,onChange:r=>l({...t,name:r.target.value}),placeholder:"Ex: Escolha a Borda, Adicionais, Bebidas",className:"w-full px-4 py-3.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-[#ff3d03] focus:border-transparent font-medium bg-gray-50 dark:bg-gray-800 dark:text-white",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Mín."}),e.jsx("input",{type:"number",min:"0",value:t.min_selections,onChange:r=>l({...t,min_selections:parseInt(r.target.value)}),className:"w-full px-4 py-3.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-[#ff3d03] focus:border-transparent font-bold text-center bg-gray-50 dark:bg-gray-800 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Máx."}),e.jsx("input",{type:"number",min:"1",value:t.max_selections,onChange:r=>l({...t,max_selections:parseInt(r.target.value)}),className:"w-full px-4 py-3.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-[#ff3d03] focus:border-transparent font-bold text-center bg-gray-50 dark:bg-gray-800 dark:text-white"})]}),e.jsx("div",{className:"flex items-end h-[52px]",children:e.jsxs("label",{className:`flex items-center justify-center gap-3 cursor-pointer w-full h-full rounded-xl border transition-all ${t.is_required?"bg-red-50 border-red-200 text-red-700 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400":"bg-gray-50 border-gray-200 text-gray-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400"}`,children:[e.jsx("input",{type:"checkbox",checked:t.is_required,onChange:r=>{const a=r.target.checked;l({...t,is_required:a,min_selections:a&&t.min_selections===0?1:t.min_selections})},className:"hidden"}),e.jsx("span",{className:"text-sm font-bold uppercase tracking-wide",children:"Obrigatório"}),t.is_required&&e.jsx(Q,{className:"h-4 w-4"})]})})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-black/20 rounded-[24px] p-6 border border-gray-100 dark:border-white/5",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("label",{className:"block text-lg font-black text-gray-900 dark:text-white",children:"Opções do Grupo"}),e.jsxs("button",{type:"button",onClick:O,className:"flex items-center gap-2 text-sm text-white bg-[#ff3d03] hover:bg-[#e63700] font-bold px-4 py-2 rounded-xl shadow-lg shadow-[#ff3d03]/20 transition-all",children:[e.jsx(k,{className:"h-4 w-4"}),"Adicionar"]})]}),e.jsx("div",{className:"space-y-3",children:t.options.map((r,a)=>e.jsxs("div",{className:"flex gap-3 items-start p-4 bg-white dark:bg-[#1a1b1e] rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm transition-all hover:border-[#ff3d03] dark:hover:border-[#ff3d03] group",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-12 gap-3",children:[e.jsxs("div",{className:"md:col-span-6",children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase mb-1 block",children:"Nome"}),e.jsx("input",{type:"text",value:r.name,onChange:s=>m(a,"name",s.target.value),placeholder:"Ex: Bacon Extra",className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-[#ff3d03] focus:border-transparent text-sm dark:bg-gray-800 dark:text-white",required:!0})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase mb-1 block",children:"Preço"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:r.price,onChange:s=>m(a,"price",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-[#ff3d03] focus:border-transparent text-sm font-bold text-[#ff3d03] dark:bg-gray-800"})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase mb-1 block",children:"Qtd. Máx"}),e.jsx("input",{type:"number",min:"1",value:r.max_quantity||"",onChange:s=>m(a,"max_quantity",s.target.value?parseInt(s.target.value):null),placeholder:"∞",className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-[#ff3d03] focus:border-transparent text-sm font-bold text-center dark:bg-gray-800 dark:text-white"})]})]}),t.options.length>1&&e.jsx("button",{type:"button",onClick:()=>D(a),className:"mt-6 p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(v,{className:"h-5 w-5"})})]},a))})]}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t border-gray-100 dark:border-white/5",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-bold py-4 rounded-xl hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 bg-[#ff3d03] text-white font-bold py-4 rounded-xl hover:bg-[#e63700] transition-colors shadow-xl shadow-[#ff3d03]/20",children:c?"Salvar Alterações":"Criar Grupo"})]})]})]})})]})}export{se as default};
