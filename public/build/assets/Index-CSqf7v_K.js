import{d as g,u as w,j as e,H as k,m as S,Q as P,V as z,o as D,p as E,W as I,Y as A,q as T,t as h}from"./vendor-react-BYm2vN5O.js";import{A as M}from"./AuthenticatedLayout-CC45zQvs.js";import{M as O}from"./Modal-BU8I6Kmo.js";import{I as r}from"./InputLabel-BmqANJC9.js";import{T as d}from"./TextInput-D00-Dvyn.js";import{I as o}from"./InputError-CfUcprF9.js";import{P as R}from"./PrimaryButton-C8-r8q-u.js";import{S as U}from"./SecondaryButton-CCdDDmH-.js";import"./vendor-others-BqROYnIz.js";import"./vendor-utils-DuuP9eDp.js";import"./app-Dqn1zKfB.js";import"./vendor-animation-DqfYcVFE.js";function J({coupons:c}){const[j,x]=g.useState(!1),[l,u]=g.useState(null),{data:a,setData:t,post:f,put:v,processing:b,errors:n,reset:m,clearErrors:y}=w({code:"",discount_type:"percentage",discount_value:"",max_uses:"",valid_until:"",plan_restriction:"",is_active:!0}),p=s=>{y(),s?(u(s),t({code:s.code,discount_type:s.discount_type,discount_value:s.discount_value.toString(),max_uses:s.max_uses?s.max_uses.toString():"",valid_until:s.valid_until?s.valid_until.split("T")[0]:"",plan_restriction:s.plan_restriction||"",is_active:s.is_active})):(u(null),m()),x(!0)},i=()=>{x(!1),m()},N=s=>{s.preventDefault(),l?v(route("admin.plan-coupons.update",l.id),{onSuccess:i}):f(route("admin.plan-coupons.store"),{onSuccess:i})},_=s=>{h.post(route("admin.plan-coupons.toggle",s.id))},C=s=>{confirm("Tem certeza que deseja excluir este cupom? Esta ação não pode ser desfeita.")&&h.delete(route("admin.plan-coupons.destroy",s.id))};return e.jsxs(M,{children:[e.jsx(k,{title:"Gerenciar Cupons de Planos"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-gray-900 dark:text-white tracking-tight",children:"Cupons de Planos"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:"Gerencie descontos para assinaturas"})]}),e.jsxs("button",{onClick:()=>p(),className:"flex items-center gap-2 px-4 py-2 bg-[#ff3d03] text-white rounded-xl font-bold text-sm shadow-lg shadow-[#ff3d03]/20 hover:bg-[#e63700] transition-colors",children:[e.jsx(S,{className:"w-4 h-4"}),"Novo Cupom"]})]}),e.jsx("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[32px] border border-gray-100 dark:border-white/5 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-100 dark:border-white/5 bg-gray-50 dark:bg-white/5",children:[e.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-gray-400 uppercase",children:"Código"}),e.jsx("th",{className:"text-left py-4 px-4 text-xs font-bold text-gray-400 uppercase",children:"Desconto"}),e.jsx("th",{className:"text-left py-4 px-4 text-xs font-bold text-gray-400 uppercase",children:"Uso"}),e.jsx("th",{className:"text-left py-4 px-4 text-xs font-bold text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"text-right py-4 px-6 text-xs font-bold text-gray-400 uppercase",children:"Ações"})]})}),e.jsx("tbody",{children:c.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"py-8 text-center text-gray-500 text-sm",children:"Nenhum cupom encontrado."})}):c.data.map(s=>e.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-white/5 transition-colors border-b border-gray-100 dark:border-white/5 last:border-0",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-mono font-bold text-gray-900 dark:text-white",children:s.code}),s.plan_restriction&&e.jsxs("span",{className:"text-xs text-blue-500",children:["Apenas ",s.plan_restriction.toUpperCase()]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-1 font-bold text-green-600 dark:text-green-400",children:[s.discount_type==="percentage"?e.jsx(P,{size:14}):e.jsx(z,{size:14}),s.discount_value,s.discount_type==="percentage"?"%":""]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.current_uses," / ",s.max_uses||"∞"]})}),e.jsxs("td",{className:"py-4 px-4",children:[e.jsxs("button",{onClick:()=>_(s),className:`px-2.5 py-1 rounded-lg text-xs font-bold flex items-center gap-1 transition-colors ${s.is_active?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[s.is_active?e.jsx(D,{size:12}):e.jsx(E,{size:12}),s.is_active?"Ativo":"Inativo"]}),s.valid_until&&e.jsxs("div",{className:"text-xs text-gray-400 mt-1 flex items-center gap-1",children:[e.jsx(I,{size:10}),"Até ",new Date(s.valid_until).toLocaleDateString()]})]}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>p(s),className:"p-2 text-blue-500 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(A,{size:16})}),s.current_uses===0&&e.jsx("button",{onClick:()=>C(s),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(T,{size:16})})]})})]},s.id))})]})})}),e.jsx(O,{show:j,onClose:i,children:e.jsxs("form",{onSubmit:N,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:l?"Editar Cupom":"Novo Cupom"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Código do Cupom"}),e.jsx(d,{value:a.code,onChange:s=>t("code",s.target.value.toUpperCase()),className:"w-full uppercase font-mono",placeholder:"EX: PRO30",disabled:!!l}),e.jsx(o,{message:n.code,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Tipo de Desconto"}),e.jsxs("select",{value:a.discount_type,onChange:s=>t("discount_type",s.target.value),className:"w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-[#ff3d03] focus:ring-[#ff3d03] rounded-xl shadow-sm",children:[e.jsx("option",{value:"percentage",children:"Porcentagem (%)"}),e.jsx("option",{value:"fixed",children:"Valor Fixo (R$)"})]})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Valor do Desconto"}),e.jsx(d,{type:"number",value:a.discount_value,onChange:s=>t("discount_value",s.target.value),className:"w-full",placeholder:"EX: 30"}),e.jsx(o,{message:n.discount_value,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Limite de Uso (Opcional)"}),e.jsx(d,{type:"number",value:a.max_uses,onChange:s=>t("max_uses",s.target.value),className:"w-full",placeholder:"Infinito"})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Validade (Opcional)"}),e.jsx(d,{type:"date",value:a.valid_until,onChange:s=>t("valid_until",s.target.value),className:"w-full"}),e.jsx(o,{message:n.valid_until,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Restrito ao Plano (Opcional)"}),e.jsxs("select",{value:a.plan_restriction,onChange:s=>t("plan_restriction",s.target.value),className:"w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-[#ff3d03] focus:ring-[#ff3d03] rounded-xl shadow-sm",children:[e.jsx("option",{value:"",children:"Todos os Planos"}),e.jsx("option",{value:"pro",children:"Pro"}),e.jsx("option",{value:"custom",children:"Personalizado"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(U,{onClick:i,children:"Cancelar"}),e.jsx(R,{disabled:b,children:l?"Atualizar":"Criar"})]})]})})]})]})}export{J as default};
