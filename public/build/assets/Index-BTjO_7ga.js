import{r as o,u as N,j as e,H as C,a as _}from"./app-C1W35bN8.js";import{A as S}from"./AuthenticatedLayout-AmEUQ5jv.js";import{P as m}from"./plus-qlv4qXvR.js";import{S as A}from"./shield-DQt0xN4m.js";import{K as g}from"./key-XzPheUBL.js";import{C as P}from"./circle-check-big-Dn8tLiNB.js";import{C as K}from"./circle-x-CMHQFWab.js";import{E}from"./eye-C4xThLUX.js";import{T as I}from"./trash-2-BwKNgynT.js";import"./monitor-UGwz1F8Z.js";import"./shopping-bag-XFNCjWS1.js";import"./package-DXwJ4FBX.js";import"./image-DfOI6yXC.js";import"./layout-dashboard-HzB_uDvB.js";import"./credit-card-CXDrhBli.js";import"./trophy-CHLTVOeI.js";import"./ticket-c-9-bVna.js";import"./store-DNOXz79u.js";import"./dollar-sign-DrddpAFv.js";import"./shield-check-CyqICHme.js";import"./log-out-fRNXPPjn.js";import"./transition-BCMx7zz8.js";import"./use-sync-refs-Bxzx7kHd.js";import"./Modal-DWxZAUTx.js";import"./keyboard-BK6vGCbM.js";import"./portal-oEj3dqf0.js";import"./with-selector-Qxn-_NZa.js";import"./hidden-DHpd9LWD.js";import"./truck-C5093Z4g.js";import"./switch-psfwI8yE.js";import"./use-resolve-button-type-R6zPIUWg.js";import"./menu-B3pffHkI.js";import"./chevron-down-Cm3x0ZdA.js";import"./clock-BLHrFU4D.js";import"./menu-DKL8AiCC.js";import"./search-69N2sBlT.js";import"./useAudio-B8J1p6s-.js";import"./bell-CO-5OhK2.js";import"./arrow-left-DePXraiJ.js";function fe({credentials:l,tenants:p}){const[h,t]=o.useState(!1),[b,i]=o.useState(null),[u,n]=o.useState(""),{data:a,setData:s,post:f,processing:c,reset:x}=N({tenant_id:"",service:"evolution",key_name:"",value:"",is_active:!0}),y=r=>{r.preventDefault(),f(route("admin.api-keys.store"),{onSuccess:()=>{x(),t(!1)}})},j=r=>{confirm("Tem certeza que deseja remover esta credencial? Esta ação não pode ser desfeita.")&&_.delete(route("admin.api-keys.destroy",r))},k=async r=>{try{const w=await(await fetch(route("admin.api-keys.show",r))).json();n(w.decrypted_value),i(r)}catch(d){console.error("Failed to fetch key:",d)}},v=r=>{const d={evolution:"bg-green-50 text-green-700 dark:bg-green-500/10 dark:text-green-400",mercadopago:"bg-blue-50 text-blue-700 dark:bg-blue-500/10 dark:text-blue-400",mapbox:"bg-cyan-50 text-cyan-700 dark:bg-cyan-500/10 dark:text-cyan-400"};return e.jsx("span",{className:`px-3 py-1 rounded-lg text-xs font-bold uppercase tracking-wide ${d[r]||"bg-gray-50 text-gray-700"}`,children:r})};return e.jsxs(S,{children:[e.jsx(C,{title:"API Keys"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"px-2 py-0.5 rounded-md bg-[#ff3d03]/10 text-[#ff3d03] text-[10px] font-bold uppercase tracking-wider",children:"Sistema"})}),e.jsx("h2",{className:"text-3xl font-black text-gray-900 dark:text-white tracking-tight",children:"Credenciais de API"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:"Gerencie as credenciais de serviços externos"})]}),e.jsxs("button",{onClick:()=>t(!0),className:"flex items-center gap-2 px-6 py-3 bg-[#ff3d03] hover:bg-[#e03603] text-white rounded-xl text-sm font-bold shadow-lg shadow-[#ff3d03]/30 transition-all",children:[e.jsx(m,{className:"h-4 w-4"}),"Nova Credencial"]})]}),e.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/10 border border-orange-200 dark:border-orange-800/30 rounded-[24px] p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-800/30 rounded-xl text-orange-600 dark:text-orange-400",children:e.jsx(A,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-orange-900 dark:text-orange-100 mb-1",children:"Importante: Segurança das Credenciais"}),e.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300 leading-relaxed",children:"Todas as credenciais são armazenadas de forma criptografada. Mantenha-as seguras e não as compartilhe publicamente."})]})]})}),e.jsx("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[32px] border border-gray-100 dark:border-white/5 shadow-sm overflow-hidden",children:l.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx(g,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-lg mb-2",children:"Nenhuma credencial cadastrada"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Adicione credenciais para integrar serviços externos."}),e.jsxs("button",{onClick:()=>t(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-[#ff3d03] hover:bg-[#e03603] text-white rounded-xl text-sm font-bold shadow-lg shadow-[#ff3d03]/30 transition-all",children:[e.jsx(m,{className:"h-4 w-4"}),"Adicionar Primeira Credencial"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-white/[0.02]",children:[e.jsx("th",{className:"text-left py-5 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Serviço"}),e.jsx("th",{className:"text-left py-5 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Nome"}),e.jsx("th",{className:"text-left py-5 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Tenant"}),e.jsx("th",{className:"text-left py-5 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-right py-5 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-white/5",children:l.map(r=>e.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"py-5 px-6",children:v(r.service)}),e.jsx("td",{className:"py-5 px-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-blue-50 dark:bg-blue-500/10 text-blue-600 dark:text-blue-400 flex items-center justify-center",children:e.jsx(g,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-sm",children:r.key_name}),e.jsx("p",{className:"text-xs text-gray-500",children:r.last_used_at?`Usado ${r.last_used_at}`:"Nunca usado"})]})]})}),e.jsx("td",{className:"py-5 px-6",children:e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:r.tenant_name})}),e.jsx("td",{className:"py-5 px-6",children:r.is_active?e.jsxs("span",{className:"px-3 py-1 rounded-lg bg-green-50 text-green-700 dark:bg-green-500/10 dark:text-green-400 text-xs font-bold flex items-center gap-1.5 w-fit",children:[e.jsx(P,{className:"h-3 w-3"}),"Ativo"]}):e.jsxs("span",{className:"px-3 py-1 rounded-lg bg-gray-50 text-gray-700 dark:bg-gray-500/10 dark:text-gray-400 text-xs font-bold flex items-center gap-1.5 w-fit",children:[e.jsx(K,{className:"h-3 w-3"}),"Inativo"]})}),e.jsx("td",{className:"py-5 px-6 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>k(r.id),className:"p-2 rounded-xl hover:bg-blue-50 dark:hover:bg-blue-500/10 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Ver Credencial",children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>j(r.id),className:"p-2 rounded-xl hover:bg-red-50 dark:hover:bg-red-500/10 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Remover",children:e.jsx(I,{className:"h-4 w-4"})})]})})]},r.id))})]})})})]}),h&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[32px] border border-gray-100 dark:border-white/5 shadow-2xl max-w-md w-full p-8",children:[e.jsx("h3",{className:"text-2xl font-black text-gray-900 dark:text-white mb-2",children:"Nova Credencial"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Adicione uma credencial de serviço externo."}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Serviço"}),e.jsxs("select",{value:a.service,onChange:r=>s("service",r.target.value),className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 focus:border-[#ff3d03]/30 focus:ring focus:ring-[#ff3d03]/10 text-sm font-medium",children:[e.jsx("option",{value:"evolution",children:"Evolution API"}),e.jsx("option",{value:"mercadopago",children:"Mercado Pago"}),e.jsx("option",{value:"mapbox",children:"Mapbox"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Tenant (Opcional)"}),e.jsxs("select",{value:a.tenant_id,onChange:r=>s("tenant_id",r.target.value),className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 focus:border-[#ff3d03]/30 focus:ring focus:ring-[#ff3d03]/10 text-sm font-medium",children:[e.jsx("option",{value:"",children:"Global"}),p.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Nome da Chave"}),e.jsx("input",{type:"text",value:a.key_name,onChange:r=>s("key_name",r.target.value),placeholder:"Ex: API Key Principal",className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 focus:border-[#ff3d03]/30 focus:ring focus:ring-[#ff3d03]/10 text-sm font-medium",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Valor da Credencial"}),e.jsx("input",{type:"password",value:a.value,onChange:r=>s("value",r.target.value),placeholder:"Cole a chave aqui",className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 focus:border-[#ff3d03]/30 focus:ring focus:ring-[#ff3d03]/10 text-sm font-medium font-mono",required:!0})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>{t(!1),x()},className:"flex-1 px-4 py-3 bg-gray-100 dark:bg-white/5 hover:bg-gray-200 dark:hover:bg-white/10 text-gray-700 dark:text-gray-300 rounded-xl font-bold text-sm transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:c,className:"flex-1 px-4 py-3 bg-[#ff3d03] hover:bg-[#e03603] text-white rounded-xl font-bold text-sm shadow-lg shadow-[#ff3d03]/30 transition-all disabled:opacity-50",children:c?"Criando...":"Criar"})]})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[32px] border border-gray-100 dark:border-white/5 shadow-2xl max-w-md w-full p-8",children:[e.jsx("h3",{className:"text-2xl font-black text-gray-900 dark:text-white mb-4",children:"Credencial Descriptografada"}),e.jsx("div",{className:"bg-gray-50 dark:bg-white/5 rounded-xl p-4 border border-gray-200 dark:border-white/10 mb-6",children:e.jsx("code",{className:"text-sm font-mono text-gray-700 dark:text-gray-300 break-all",children:u})}),e.jsx("button",{onClick:()=>{i(null),n("")},className:"w-full px-4 py-3 bg-[#ff3d03] hover:bg-[#e03603] text-white rounded-xl font-bold text-sm shadow-lg shadow-[#ff3d03]/30 transition-all",children:"Fechar"})]})})]})}export{fe as default};
