import{r as m,i as R,u as G,j as e,X as A,a as u}from"./app-DwErbC-G.js";import{M as U}from"./Modal-DQ0Epy3j.js";import{T as h}from"./TextInput-CCwg8HwO.js";import{I as n}from"./InputLabel-DvNe82DZ.js";import{P as B}from"./PrimaryButton-tfxQSrht.js";import{S as O}from"./SecondaryButton-DD21ZBgn.js";import{C as p}from"./Checkbox-C_9xBHJO.js";import{I as i}from"./InputError-DXC2gk0F.js";import{S as X}from"./search-BJW68Hou.js";import{P as w}from"./plus-BZiP3g_I.js";import{I as _}from"./image-BL70M9t5.js";import{P as Q}from"./pencil-ZhQJqV-W.js";import{T as W}from"./trash-2-Bzdsdaoj.js";import{U as H}from"./upload-CDzi4y5L.js";import{t as J}from"./switch-DhIHnDyj.js";import"./portal-V1Z2qU1y.js";import"./transition-DyVhLiFv.js";import"./use-resolve-button-type-B8uHpfvB.js";function ue({products:C,categories:P,complement_groups:b}){const[x,S]=m.useState(""),[E,o]=m.useState(!1),[d,f]=m.useState(null),[y,g]=m.useState(null),{success:c,error:j}=R(),{data:r,setData:t,post:q,processing:k,errors:l,reset:I}=G({name:"",description:"",price:"",category_id:"",is_available:!0,image:null,complement_groups:[],track_stock:!1,stock_quantity:"",loyalty_redeemable:!1,loyalty_points_cost:0}),v=C.data.filter(a=>a.name.toLowerCase().includes(x.toLowerCase())||a.description.toLowerCase().includes(x.toLowerCase())),N=()=>{f(null),g(null),I(),t({name:"",description:"",price:"",category_id:"",is_available:!0,image:null,complement_groups:[],track_stock:!1,stock_quantity:"",loyalty_redeemable:!1,loyalty_points_cost:0}),o(!0)},F=a=>{f(a),g(a.image_url||null),t({name:a.name,description:a.description||"",price:a.price.toString(),category_id:a.category_id||"",is_available:a.is_available,image:null,complement_groups:a.complement_groups?.map(s=>s.id)||[],track_stock:a.track_stock,stock_quantity:a.stock_quantity||"",loyalty_redeemable:a.loyalty_redeemable||!1,loyalty_points_cost:a.loyalty_points_cost||0}),o(!0)},T=a=>{a.preventDefault(),d?u.post(route("products.update",d.id),{_method:"put",...r},{onSuccess:()=>{c("Produto Atualizado","Produto atualizado com sucesso."),o(!1)},onError:()=>j("Erro","Erro ao atualizar produto.")}):q(route("products.store"),{onSuccess:()=>{c("Produto Criado","Produto cadastrado com sucesso."),o(!1)},onError:()=>j("Erro","Erro ao criar produto.")})},$=a=>{const s=a.target.files?.[0];s&&(t("image",s),g(URL.createObjectURL(s)))},z=a=>{confirm("Tem certeza que deseja excluir este produto?")&&u.delete(route("products.destroy",a),{onSuccess:()=>c("Produto Exclu√≠do","Produto removido com sucesso.")})},D=a=>{u.post(route("products.toggle",a.id),{},{preserveScroll:!0,onSuccess:()=>{c("Produto Atualizado",`O produto "${a.name}" foi ${a.is_available?"pausado":"ativado"}.`)}})},L=a=>{const s=r.complement_groups.includes(a)?r.complement_groups.filter(M=>M!==a):[...r.complement_groups,a];t("complement_groups",s)};return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white hidden md:block",children:"Gerenciar Itens"}),e.jsxs("div",{className:"flex gap-4 w-full md:w-auto",children:[e.jsxs("div",{className:"relative flex-1 md:w-72",children:[e.jsx(X,{className:"absolute left-4 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:x,onChange:a=>S(a.target.value),placeholder:"Buscar itens...",className:"w-full h-11 rounded-2xl border border-gray-200 bg-white pl-11 shadow-sm focus:border-[#ff3d03] focus:ring-[#ff3d03]/20 dark:border-white/5 dark:bg-[#0f1012] transition-all"})]}),e.jsxs("button",{onClick:N,className:"flex items-center gap-2 rounded-2xl bg-[#ff3d03] px-6 py-3 text-sm font-bold text-white shadow-lg shadow-[#ff3d03]/20 hover:bg-[#e63700] hover:scale-105 active:scale-95 transition-all whitespace-nowrap",children:[e.jsx(w,{className:"h-5 w-5"}),"Novo Produto"]})]})]}),v.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:v.map(a=>e.jsxs("div",{className:"group relative bg-white dark:bg-[#0f1012] rounded-[24px] shadow-lg shadow-gray-200/50 dark:shadow-none hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-gray-100 dark:border-white/5 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"relative aspect-[4/3] bg-gray-100 dark:bg-white/5 overflow-hidden",children:[a.image_url?e.jsx("img",{className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",src:a.image_url,alt:a.name}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(_,{className:"h-10 w-10 text-gray-300 dark:text-gray-600"})}),e.jsxs("div",{className:"absolute top-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 translate-y-2 group-hover:translate-y-0",children:[e.jsx("button",{onClick:()=>F(a),className:"bg-white/90 dark:bg-black/80 text-gray-700 dark:text-gray-200 p-2 rounded-xl hover:text-[#ff3d03] shadow-lg backdrop-blur-sm transition-colors",title:"Editar",children:e.jsx(Q,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>z(a.id),className:"bg-white/90 dark:bg-black/80 text-gray-700 dark:text-gray-200 p-2 rounded-xl hover:text-red-500 shadow-lg backdrop-blur-sm transition-colors",title:"Excluir",children:e.jsx(W,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"absolute top-3 left-3 z-10",onClick:s=>s.stopPropagation(),children:e.jsx(J,{checked:a.is_available,onChange:()=>D(a),className:`${a.is_available?"bg-green-500":"bg-gray-300 dark:bg-gray-600"} relative inline-flex h-6 w-10 items-center rounded-full transition-colors focus:outline-none shadow-lg`,children:e.jsx("span",{className:`${a.is_available?"translate-x-5":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})}),!a.is_available&&e.jsx("div",{className:"absolute inset-0 bg-white/60 dark:bg-black/60 backdrop-blur-[1px] flex items-center justify-center pointer-events-none",children:e.jsx("span",{className:"bg-black/70 text-white text-xs font-bold px-3 py-1 rounded-full backdrop-blur-md",children:"Indispon√≠vel"})})]}),e.jsxs("div",{className:"p-5 flex flex-col flex-1",children:[e.jsx("div",{className:"flex justify-between items-start mb-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-[#ff3d03] mb-1",children:a.category?.name||"Sem Categoria"}),e.jsx("h3",{className:"text-lg font-black text-gray-900 dark:text-white line-clamp-1 leading-tight",title:a.name,children:a.name})]})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 min-h-[2.5rem] leading-relaxed mb-4",children:a.description||"Sem descri√ß√£o"}),e.jsxs("div",{className:"mt-auto pt-4 border-t border-gray-100 dark:border-white/5 flex items-center justify-between",children:[e.jsxs("span",{className:"text-xl font-black text-gray-900 dark:text-white tracking-tight",children:["R$ ",Number(a.price).toFixed(2).replace(".",",")]}),e.jsx("div",{className:"flex gap-1.5",children:a.complementGroups&&a.complementGroups.length>0&&e.jsx("span",{className:"px-2 py-1 rounded-md bg-gray-100 dark:bg-white/10 text-xs font-bold text-gray-600 dark:text-gray-300",title:"Possui complementos",children:"+Op√ß√µes"})})]})]})]},a.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white dark:bg-[#0f1012] rounded-[32px] border border-dashed border-gray-200 dark:border-gray-800",children:[e.jsx("div",{className:"h-16 w-16 bg-gray-50 dark:bg-white/5 rounded-full flex items-center justify-center mb-4",children:e.jsx(_,{className:"h-8 w-8 text-gray-300"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Nenhum produto encontrado"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Tente buscar por outro termo ou crie um novo item."}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:N,className:"inline-flex items-center gap-2 rounded-xl bg-[#ff3d03] px-6 py-3 text-sm font-bold text-white shadow-lg shadow-[#ff3d03]/20 hover:bg-[#e63700] hover:scale-105 transition-all",children:[e.jsx(w,{className:"h-5 w-5"}),"Cadastrar Produto"]})})]}),e.jsx(U,{show:E,onClose:()=>o(!1),maxWidth:"2xl",children:e.jsxs("form",{onSubmit:T,className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-black text-gray-900 dark:text-gray-100",children:d?"Editar Produto":"Novo Produto"}),e.jsx("button",{type:"button",onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-500",children:e.jsx(A,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-2xl p-4 hover:border-[#ff3d03] transition-colors cursor-pointer relative bg-gray-50 dark:bg-gray-800 h-48",children:[e.jsx("input",{type:"file",id:"image",onChange:$,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:"image/*"}),y?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:y,alt:"Preview",className:"w-full h-full object-cover rounded-xl"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity rounded-xl",children:e.jsx("p",{className:"text-white text-sm font-medium",children:"Trocar Imagem"})})]}):e.jsxs("div",{className:"text-center p-4",children:[e.jsx(H,{className:"mx-auto h-8 w-8 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Clique para adicionar imagem"})]})]}),e.jsx(i,{message:l.image,className:"mt-2"}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"name",value:"Nome do Produto *"}),e.jsx(h,{id:"name",value:r.name,onChange:a=>t("name",a.target.value),className:"mt-1 block w-full",placeholder:"Ex: X-Tudo",required:!0}),e.jsx(i,{message:l.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"price",value:"Pre√ßo (R$) *"}),e.jsx(h,{id:"price",type:"number",step:"0.01",value:r.price,onChange:a=>t("price",a.target.value),className:"mt-1 block w-full",placeholder:"0.00",required:!0}),e.jsx(i,{message:l.price,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"category_id",value:"Categoria"}),e.jsxs("select",{id:"category_id",value:r.category_id,onChange:a=>t("category_id",a.target.value),className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-[#ff3d03] focus:ring-[#ff3d03] rounded-xl shadow-sm h-11",children:[e.jsx("option",{value:"",children:"Selecione uma categoria..."}),P.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),e.jsx(i,{message:l.category_id,className:"mt-2"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"description",value:"Descri√ß√£o"}),e.jsx("textarea",{id:"description",value:r.description,onChange:a=>t("description",a.target.value),className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-[#ff3d03] focus:ring-[#ff3d03] rounded-xl shadow-sm h-24 resize-none p-3",placeholder:"Detalhes do produto..."}),e.jsx(i,{message:l.description,className:"mt-2"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 flex items-center space-x-2 bg-gray-50 dark:bg-gray-800 p-3 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx(p,{id:"is_available",checked:r.is_available,onChange:a=>t("is_available",a.target.checked)}),e.jsx("label",{htmlFor:"is_available",className:"text-sm font-medium text-gray-700 dark:text-gray-300 cursor-pointer select-none",children:"Dispon√≠vel"})]}),e.jsxs("div",{className:"flex-1 flex items-center space-x-2 bg-gray-50 dark:bg-gray-800 p-3 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx(p,{id:"track_stock",checked:r.track_stock,onChange:a=>t("track_stock",a.target.checked)}),e.jsx("label",{htmlFor:"track_stock",className:"text-sm font-medium text-gray-700 dark:text-gray-300 cursor-pointer select-none",children:"Estoque"})]})]}),r.track_stock&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[e.jsx(n,{htmlFor:"stock_quantity",value:"Quantidade em Estoque"}),e.jsx(h,{id:"stock_quantity",type:"number",value:r.stock_quantity??"",onChange:a=>t("stock_quantity",a.target.value),className:"mt-1 block w-full bg-orange-50 dark:bg-orange-900/10 border-orange-200 dark:border-orange-800 focus:border-orange-500 focus:ring-orange-500 font-bold text-orange-600",placeholder:"0"}),e.jsx(i,{message:l.stock_quantity,className:"mt-2"})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[e.jsx(n,{value:"Grupos de Complementos",className:"mb-2"}),e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl max-h-48 overflow-y-auto bg-gray-50 dark:bg-gray-800 p-2 space-y-1 custom-scrollbar",children:b.length>0?b.map(a=>e.jsxs("div",{onClick:()=>L(a.id),className:`flex items-center p-2 rounded-lg cursor-pointer transition-colors ${r.complement_groups.includes(a.id)?"bg-orange-100 border border-[#ff3d03]/30 dark:bg-orange-900/40":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx(p,{checked:r.complement_groups.includes(a.id),onChange:()=>{},className:"pointer-events-none mr-3 text-[#ff3d03]"}),e.jsx("span",{className:`text-sm ${r.complement_groups.includes(a.id)?"font-bold text-[#ff3d03]":"text-gray-700 dark:text-gray-300"}`,children:a.name})]},a.id)):e.jsx("p",{className:"text-xs text-gray-500 text-center py-4",children:"Nenhum grupo cadastrado."})}),e.jsx(i,{message:l.complement_groups,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"mt-6 bg-gradient-to-br from-orange-50 to-yellow-50 dark:from-orange-900/20 dark:to-yellow-900/10 rounded-2xl p-4 border-2 border-orange-200 dark:border-orange-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-xl",children:"üéÅ"}),e.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"Programa de Fidelidade"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-xl mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"loyalty_redeemable",className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Permite resgate por pontos"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Cliente pode trocar pontos por este produto"})]}),e.jsx("button",{type:"button",onClick:()=>t("loyalty_redeemable",!r.loyalty_redeemable),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-600 focus:ring-offset-2 ${r.loyalty_redeemable?"bg-orange-600":"bg-gray-200 dark:bg-gray-700"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${r.loyalty_redeemable?"translate-x-5":"translate-x-0"}`})})]}),r.loyalty_redeemable&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-3 animate-in fade-in slide-in-from-top-1",children:[e.jsx("label",{htmlFor:"loyalty_points_cost",className:"block text-xs font-medium text-gray-900 dark:text-white mb-1.5",children:"Pontos necess√°rios para resgate"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"loyalty_points_cost",type:"number",min:"1",value:r.loyalty_points_cost,onChange:a=>t("loyalty_points_cost",parseInt(a.target.value)||0),className:"block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white py-2 pl-3 pr-12 text-sm shadow-sm focus:ring-2 focus:ring-orange-600 focus:border-transparent",placeholder:"Ex: 150"}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs font-medium",children:"pts"})})]}),e.jsx("p",{className:"mt-1.5 text-xs text-gray-500 dark:text-gray-400",children:"üí° Dica: Produtos de R$ 30 geralmente custam 100-150 pontos"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3 pt-4 border-t border-gray-100 dark:border-white/5",children:[e.jsx(O,{onClick:()=>o(!1),disabled:k,className:"rounded-xl py-3",children:"Cancelar"}),e.jsx(B,{disabled:k,className:"bg-[#ff3d03] hover:bg-[#e63700] border-transparent rounded-xl py-3 px-6 shadow-lg shadow-[#ff3d03]/20",children:d?"Salvar Altera√ß√µes":"Criar Produto"})]})]})})]})}export{ue as default};
