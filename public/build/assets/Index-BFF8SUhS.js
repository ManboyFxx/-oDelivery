import{r as i,j as e,H as k,d as f}from"./app--h0sTTBV.js";import{A as D}from"./AuthenticatedLayout-DasNzICI.js";import{L as C}from"./loader-circle-CKQXW5w9.js";import{U as I}from"./upload-mE1aKG28.js";import{S}from"./search-BNuQzhq3.js";import{I as B}from"./image-DCOSi2IT.js";import{C as F}from"./check-CXjOvXps.js";import{C as U}from"./copy-DNsfEgM1.js";import{T as L}from"./trash-2-9sJ_C4E0.js";import"./monitor-XQUsAm-y.js";import"./shopping-bag-DoRLZXot.js";import"./package-CEfDumEB.js";import"./layout-dashboard-CnoOixti.js";import"./credit-card-CVGtbUo8.js";import"./users-BPgZ1WbZ.js";import"./trophy-CZeOaE9y.js";import"./ticket-Zw5DxwXt.js";import"./store-CBsW0ikX.js";import"./dollar-sign-CgG92QS3.js";import"./key-DB1JiVky.js";import"./shield-check-BheLSI9O.js";import"./log-out-QZtMRvkB.js";import"./transition-Dw3o4QBw.js";import"./use-sync-refs-MitHzuBF.js";import"./Modal-B6GVO6LL.js";import"./keyboard-y5718Hrs.js";import"./portal-d_MwmQ_5.js";import"./with-selector-DvKbnDlA.js";import"./hidden-BoGu6WjL.js";import"./truck-CgyKr33u.js";import"./switch-9H1Il4qv.js";import"./use-resolve-button-type-BI6j3I6g.js";import"./menu-Drw0QT-y.js";import"./chevron-down-Bk1BQ7u3.js";import"./clock-D39DEU5k.js";import"./circle-play-DdMrxBac.js";import"./menu-67kKezLD.js";import"./sun-CV1kriCj.js";import"./bell-CELg-q_Q.js";import"./eye-CDc4eRME.js";import"./arrow-left-h6-INJ1U.js";import"./usePushNotifications-U5TYcKO-.js";import"./zap-DdLCS3mp.js";import"./star-CBt9TIjV.js";import"./chevron-right-T3FBqGuZ.js";import"./lock-NggNfydh.js";function T(r){return r<1024?`${r} B`:r<1024*1024?`${(r/1024).toFixed(1)} KB`:`${(r/(1024*1024)).toFixed(1)} MB`}function Ce({auth:r,media:j}){const[s,p]=i.useState(j),[g,x]=i.useState(!1),[n,b]=i.useState(""),[m,a]=i.useState(!1),[w,u]=i.useState(null),d=async t=>{if(t?.length){x(!0);try{const l=[];for(const o of Array.from(t)){const h=new FormData;h.append("file",o);const N=await f.post("/media",h,{headers:{"Content-Type":"multipart/form-data"}});l.push(N.data)}p(o=>[...l,...o])}finally{x(!1)}}},v=async t=>{confirm("Deletar esta imagem? Produtos que usam ela perderão a imagem.")&&(await f.delete(`/media/${t}`),p(l=>l.filter(o=>o.id!==t)))},y=async t=>{await navigator.clipboard.writeText(t.url),u(t.id),setTimeout(()=>u(null),2e3)},c=s.filter(t=>t.original_name.toLowerCase().includes(n.toLowerCase()));return e.jsxs(D,{user:r.user,children:[e.jsx(k,{title:"Banco de Imagens"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Banco de Imagens"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[s.length," imagem",s.length!==1?"s":""," · Faça upload uma vez e reutilize em qualquer lugar"]})]}),e.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-5 py-2.5 bg-orange-500 hover:bg-orange-600 text-white text-sm font-medium rounded-xl transition-colors shadow-sm",children:[g?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-4 w-4 animate-spin"})," Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"h-4 w-4"})," Upload de Imagem"]}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",multiple:!0,disabled:g,onChange:t=>d(t.target.files)})]})]}),e.jsxs("div",{className:"relative mb-6 max-w-sm",children:[e.jsx(S,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{value:n,onChange:t=>b(t.target.value),placeholder:"Buscar por nome...",className:"w-full pl-9 pr-4 py-2.5 text-sm bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 text-gray-900 dark:text-white"})]}),(s.length===0||m)&&e.jsxs("div",{onDragOver:t=>{t.preventDefault(),a(!0)},onDragLeave:()=>a(!1),onDrop:t=>{t.preventDefault(),a(!1),d(t.dataTransfer.files)},className:`border-2 border-dashed rounded-2xl p-16 text-center mb-8 transition-colors ${m?"border-orange-400 bg-orange-50 dark:bg-orange-900/10":"border-gray-200 dark:border-white/10"}`,children:[e.jsx(B,{className:"h-16 w-16 mx-auto mb-4 text-gray-200 dark:text-gray-700"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:m?"Solte para fazer upload":'Arraste imagens aqui ou clique em "Upload de Imagem"'}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"PNG, JPG, GIF, WebP até 10MB"})]}),c.length>0&&e.jsx("div",{onDragOver:t=>{t.preventDefault(),a(!0)},onDragLeave:()=>a(!1),onDrop:t=>{t.preventDefault(),a(!1),d(t.dataTransfer.files)},className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:c.map(t=>e.jsxs("div",{className:"group relative bg-gray-100 dark:bg-white/5 rounded-xl overflow-hidden aspect-square border border-gray-200 dark:border-white/10 hover:border-orange-400 dark:hover:border-orange-500 transition-all",children:[e.jsx("img",{src:t.url,alt:t.original_name,className:"w-full h-full object-cover",loading:"lazy"}),e.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-between p-2",children:[e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx("button",{onClick:()=>y(t),title:"Copiar URL",className:"p-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-white transition-colors",children:w===t.id?e.jsx(F,{className:"h-3.5 w-3.5"}):e.jsx(U,{className:"h-3.5 w-3.5"})}),e.jsx("button",{onClick:()=>v(t.id),title:"Deletar",className:"p-1.5 bg-red-500/80 hover:bg-red-500 rounded-lg text-white transition-colors",children:e.jsx(L,{className:"h-3.5 w-3.5"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-xs font-medium truncate leading-tight",children:t.original_name}),e.jsx("p",{className:"text-white/60 text-xs",children:T(t.size)})]})]})]},t.id))}),c.length===0&&s.length>0&&e.jsxs("p",{className:"text-center text-gray-400 py-16 text-sm",children:['Nenhuma imagem encontrada para "',n,'"']})]})]})}export{Ce as default};
