import{r as g,u as w,j as e,H as k,a as h}from"./app-D2VljvTw.js";import{A as P}from"./AuthenticatedLayout-Cx4f4-fS.js";import{M as S}from"./Modal-CPkuO39I.js";import{I as r}from"./InputLabel-DKb6P6rq.js";import{T as o}from"./TextInput-DLKzFZ7C.js";import{I as n}from"./InputError-pwv7o2Cf.js";import{P as z}from"./PrimaryButton-Cx2oxEBi.js";import{S as D}from"./SecondaryButton-BR6-z2BJ.js";import{P as E}from"./plus-XB2pHjD6.js";import{P as I}from"./percent-BlPWxD9O.js";import{D as T}from"./dollar-sign-u-pr0hpI.js";import{C as A}from"./circle-check-big-jFZJVZKS.js";import{C as M}from"./circle-x-DUzefhC4.js";import{C as O}from"./calendar-Cnya3hvh.js";import{S as R}from"./square-pen-BCgsOZ4v.js";import{T as U}from"./trash-2-D5qGatoK.js";import"./shopping-bag-DeV0Q4uc.js";import"./package-DITWTL1u.js";import"./menu-D_M5zKdZ.js";import"./use-resolve-button-type-hvyh8Ega.js";import"./keyboard-D3GHKAuh.js";import"./use-sync-refs-DLhS85IC.js";import"./portal-KUhlGsT1.js";import"./with-selector-D8O5el8K.js";import"./transition-D2MB-Bkq.js";import"./credit-card-CJ_Fv3xf.js";import"./trophy-CGi22m5G.js";import"./chart-column-BI1AR2fd.js";import"./ticket-Btog9CtY.js";import"./store-DuxhVZGb.js";import"./shield-check-BwRQitPR.js";import"./log-out-BGloaton.js";import"./truck-2VxR7Zq1.js";import"./switch-DTazzpId.js";import"./hidden-DG7gvhwG.js";import"./chevron-down-DopCl3ie.js";import"./clock-DhsNYQvR.js";import"./search-DgyBcvPy.js";import"./bell-CJEF_sGF.js";import"./sparkles-CJH1Xak9.js";import"./arrow-right-D3E33b_Z.js";import"./eye-Lo_UvX06.js";import"./arrow-left-BOEQvvf9.js";function Se({coupons:c}){const[f,x]=g.useState(!1),[i,m]=g.useState(null),{data:a,setData:t,post:j,put:v,processing:b,errors:d,reset:p,clearErrors:y}=w({code:"",discount_type:"percentage",discount_value:"",max_uses:"",valid_until:"",plan_restriction:"",is_active:!0}),u=s=>{y(),s?(m(s),t({code:s.code,discount_type:s.discount_type,discount_value:s.discount_value.toString(),max_uses:s.max_uses?s.max_uses.toString():"",valid_until:s.valid_until?s.valid_until.split("T")[0]:"",plan_restriction:s.plan_restriction||"",is_active:s.is_active})):(m(null),p()),x(!0)},l=()=>{x(!1),p()},N=s=>{s.preventDefault(),i?v(route("admin.plan-coupons.update",i.id),{onSuccess:l}):j(route("admin.plan-coupons.store"),{onSuccess:l})},_=s=>{h.post(route("admin.plan-coupons.toggle",s.id))},C=s=>{confirm("Tem certeza que deseja excluir este cupom? Esta ação não pode ser desfeita.")&&h.delete(route("admin.plan-coupons.destroy",s.id))};return e.jsxs(P,{children:[e.jsx(k,{title:"Gerenciar Cupons de Planos"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-gray-900 dark:text-white tracking-tight",children:"Cupons de Planos"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:"Gerencie descontos para assinaturas"})]}),e.jsxs("button",{onClick:()=>u(),className:"flex items-center gap-2 px-4 py-2 bg-[#ff3d03] text-white rounded-xl font-bold text-sm shadow-lg shadow-[#ff3d03]/20 hover:bg-[#e63700] transition-colors",children:[e.jsx(E,{className:"w-4 h-4"}),"Novo Cupom"]})]}),e.jsx("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[32px] border border-gray-100 dark:border-white/5 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-100 dark:border-white/5 bg-gray-50 dark:bg-white/5",children:[e.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-gray-400 uppercase",children:"Código"}),e.jsx("th",{className:"text-left py-4 px-4 text-xs font-bold text-gray-400 uppercase",children:"Desconto"}),e.jsx("th",{className:"text-left py-4 px-4 text-xs font-bold text-gray-400 uppercase",children:"Uso"}),e.jsx("th",{className:"text-left py-4 px-4 text-xs font-bold text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"text-right py-4 px-6 text-xs font-bold text-gray-400 uppercase",children:"Ações"})]})}),e.jsx("tbody",{children:c.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"py-8 text-center text-gray-500 text-sm",children:"Nenhum cupom encontrado."})}):c.data.map(s=>e.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-white/5 transition-colors border-b border-gray-100 dark:border-white/5 last:border-0",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-mono font-bold text-gray-900 dark:text-white",children:s.code}),s.plan_restriction&&e.jsxs("span",{className:"text-xs text-blue-500",children:["Apenas ",s.plan_restriction.toUpperCase()]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-1 font-bold text-green-600 dark:text-green-400",children:[s.discount_type==="percentage"?e.jsx(I,{size:14}):e.jsx(T,{size:14}),s.discount_value,s.discount_type==="percentage"?"%":""]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.current_uses," / ",s.max_uses||"∞"]})}),e.jsxs("td",{className:"py-4 px-4",children:[e.jsxs("button",{onClick:()=>_(s),className:`px-2.5 py-1 rounded-lg text-xs font-bold flex items-center gap-1 transition-colors ${s.is_active?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[s.is_active?e.jsx(A,{size:12}):e.jsx(M,{size:12}),s.is_active?"Ativo":"Inativo"]}),s.valid_until&&e.jsxs("div",{className:"text-xs text-gray-400 mt-1 flex items-center gap-1",children:[e.jsx(O,{size:10}),"Até ",new Date(s.valid_until).toLocaleDateString()]})]}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>u(s),className:"p-2 text-blue-500 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(R,{size:16})}),s.current_uses===0&&e.jsx("button",{onClick:()=>C(s),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(U,{size:16})})]})})]},s.id))})]})})}),e.jsx(S,{show:f,onClose:l,children:e.jsxs("form",{onSubmit:N,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:i?"Editar Cupom":"Novo Cupom"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Código do Cupom"}),e.jsx(o,{value:a.code,onChange:s=>t("code",s.target.value.toUpperCase()),className:"w-full uppercase font-mono",placeholder:"EX: PRO30",disabled:!!i}),e.jsx(n,{message:d.code,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Tipo de Desconto"}),e.jsxs("select",{value:a.discount_type,onChange:s=>t("discount_type",s.target.value),className:"w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-[#ff3d03] focus:ring-[#ff3d03] rounded-xl shadow-sm",children:[e.jsx("option",{value:"percentage",children:"Porcentagem (%)"}),e.jsx("option",{value:"fixed",children:"Valor Fixo (R$)"})]})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Valor do Desconto"}),e.jsx(o,{type:"number",value:a.discount_value,onChange:s=>t("discount_value",s.target.value),className:"w-full",placeholder:"EX: 30"}),e.jsx(n,{message:d.discount_value,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Limite de Uso (Opcional)"}),e.jsx(o,{type:"number",value:a.max_uses,onChange:s=>t("max_uses",s.target.value),className:"w-full",placeholder:"Infinito"})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Validade (Opcional)"}),e.jsx(o,{type:"date",value:a.valid_until,onChange:s=>t("valid_until",s.target.value),className:"w-full"}),e.jsx(n,{message:d.valid_until,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Restrito ao Plano (Opcional)"}),e.jsxs("select",{value:a.plan_restriction,onChange:s=>t("plan_restriction",s.target.value),className:"w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-[#ff3d03] focus:ring-[#ff3d03] rounded-xl shadow-sm",children:[e.jsx("option",{value:"",children:"Todos os Planos"}),e.jsx("option",{value:"pro",children:"Pro"}),e.jsx("option",{value:"custom",children:"Personalizado"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(D,{onClick:l,children:"Cancelar"}),e.jsx(z,{disabled:b,children:i?"Atualizar":"Criar"})]})]})})]})]})}export{Se as default};
