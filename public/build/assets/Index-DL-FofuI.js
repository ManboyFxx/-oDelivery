import{c as Ue,r as n,j as e,e as c,u as we,H as Be,X as _,a as $}from"./app-D2VljvTw.js";import{A as Ge,U as se}from"./AuthenticatedLayout-Cx4f4-fS.js";import{M as re}from"./Modal-CPkuO39I.js";import{I as ae}from"./InputLabel-DKb6P6rq.js";import{T as Ne}from"./TextInput-DLKzFZ7C.js";import{P as He}from"./PrimaryButton-Cx2oxEBi.js";import{U as Ce}from"./user-Bxz_gykG.js";import{S as _e}from"./search-DgyBcvPy.js";import{C as ne}from"./check-S0IfOmyK.js";import{S as v}from"./shopping-cart-C-8XTcPB.js";import{L as B}from"./layout-grid-Byywo2NY.js";import{I as le}from"./image-CHA1aCjb.js";import{P as S}from"./plus-XB2pHjD6.js";import{M as G}from"./minus-C3gGHrXJ.js";import{T as We}from"./trash-2-D5qGatoK.js";import{C as de}from"./circle-alert-XKeeM4ji.js";import{B as ve}from"./banknote-Bc7LJn9d.js";import{C as Je}from"./credit-card-CJ_Fv3xf.js";import{Q as Xe}from"./qr-code-Y2NLAUwa.js";import"./shopping-bag-DeV0Q4uc.js";import"./package-DITWTL1u.js";import"./menu-D_M5zKdZ.js";import"./use-resolve-button-type-hvyh8Ega.js";import"./keyboard-D3GHKAuh.js";import"./use-sync-refs-DLhS85IC.js";import"./portal-KUhlGsT1.js";import"./with-selector-D8O5el8K.js";import"./transition-D2MB-Bkq.js";import"./trophy-CGi22m5G.js";import"./chart-column-BI1AR2fd.js";import"./ticket-Btog9CtY.js";import"./store-DuxhVZGb.js";import"./dollar-sign-u-pr0hpI.js";import"./shield-check-BwRQitPR.js";import"./log-out-BGloaton.js";import"./truck-2VxR7Zq1.js";import"./switch-DTazzpId.js";import"./hidden-DG7gvhwG.js";import"./chevron-down-DopCl3ie.js";import"./clock-DhsNYQvR.js";import"./bell-CJEF_sGF.js";import"./sparkles-CJH1Xak9.js";import"./arrow-right-D3E33b_Z.js";import"./eye-Lo_UvX06.js";import"./arrow-left-BOEQvvf9.js";const Ke=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Ye=Ue("chevrons-up-down",Ke);function ke({customers:M,value:f,onChange:b}){const[F,d]=n.useState(!1),[g,k]=n.useState(""),q=n.useRef(null);n.useEffect(()=>{const i=H=>{q.current&&!q.current.contains(H.target)&&d(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[]);const j=g===""?M:M.filter(i=>i.name.toLowerCase().includes(g.toLowerCase())||i.phone.includes(g));return e.jsxs("div",{className:"relative",ref:q,children:[e.jsxs("div",{className:"w-full flex items-center justify-between rounded-lg border border-gray-300 bg-white py-2 pl-3 pr-3 text-sm focus-within:ring-2 focus-within:ring-yellow-500 focus-within:border-yellow-500 cursor-pointer dark:bg-[#2c2d30] dark:border-gray-700 dark:text-white",onClick:()=>d(!F),children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[e.jsx(Ce,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:c("truncate",!f&&"text-gray-400"),children:f?f.name:"Selecionar cliente..."})]}),e.jsx(Ye,{className:"h-4 w-4 text-gray-400"})]}),F&&e.jsxs("div",{className:"absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm dark:bg-[#2c2d30] dark:ring-gray-700",children:[e.jsx("div",{className:"sticky top-0 bg-white p-2 border-b dark:bg-[#2c2d30] dark:border-gray-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(_e,{className:"absolute left-2 top-1/2 h-3 w-3 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",className:"w-full rounded-md border border-gray-200 bg-gray-50 py-1 pl-7 pr-2 text-xs focus:border-yellow-500 focus:ring-yellow-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white",placeholder:"Buscar nome ou telefone...",value:g,onChange:i=>k(i.target.value),autoFocus:!0})]})}),j.length===0&&e.jsx("div",{className:"relative cursor-default select-none py-2 px-4 text-gray-700 dark:text-gray-400",children:"Nenhum cliente encontrado."}),j.map(i=>e.jsxs("div",{className:c("relative cursor-pointer select-none py-2 pl-3 pr-9 hover:bg-yellow-50 dark:hover:bg-yellow-900/10",f?.id===i.id?"text-yellow-600 bg-yellow-50 dark:text-yellow-500 dark:bg-yellow-900/10":"text-gray-900 dark:text-gray-200"),onClick:()=>{b(i),d(!1),k("")},children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"block truncate font-medium",children:i.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:i.phone}),i.loyalty_points!==void 0&&e.jsxs("span",{className:"flex items-center gap-0.5 text-yellow-600 dark:text-yellow-500 font-bold bg-yellow-100 dark:bg-yellow-900/30 px-1 rounded",children:[i.loyalty_points," pts"]})]})]}),f?.id===i.id&&e.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center pr-4 text-yellow-600",children:e.jsx(ne,{className:"h-4 w-4"})})]},i.id)),f&&e.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 py-2 px-3 text-center text-xs text-red-500 font-medium hover:bg-red-50 dark:hover:bg-red-900/10 cursor-pointer",onClick:()=>{b(null),d(!1)},children:"Remover seleção"})]})]})}function Ht({categories:M,allProducts:f,tables:b=[],customers:F=[]}){const[d,g]=n.useState([]),[k,q]=n.useState(""),[j,i]=n.useState("all"),[H,z]=n.useState(!1),[Se,O]=n.useState(!1),[W,A]=n.useState("sales"),[u,J]=n.useState(null),[x,ie]=n.useState(null),[R,D]=n.useState(1),[oe,X]=n.useState(""),[I,K]=n.useState({}),[Q,Y]=n.useState(null),[y,E]=n.useState(null),[ce,Me]=n.useState("cash"),[Te,L]=n.useState(!1),{data:xe,setData:me,post:$e,processing:Fe,reset:qe}=we({number:"",capacity:"4"}),Oe=t=>{t.preventDefault(),$e(route("tables.store"),{onSuccess:()=>{O(!1),qe()}})},{data:a,setData:w,post:Ze,processing:he,reset:be,errors:ge}=we({items:[],customer_name:"",customer_id:"",payment_method:"cash",order_mode:"pickup",total:0,table_id:""}),[m,Z]=n.useState(""),[C,P]=n.useState(null),Re=t=>{ie(t),D(1),X(""),K({})},ue=()=>{ie(null),D(1),X(""),K({})},Ee=t=>{if(t.complement_groups&&t.complement_groups.length>0){Re(t);return}g(s=>s.find(r=>r.id===t.id&&!r.selectedComplements)?s.map(r=>r.id===t.id&&!r.selectedComplements?{...r,quantity:r.quantity+1}:r):[...s,{...t,quantity:1}])},Pe=()=>{if(!x)return;const t=[];Object.entries(I).forEach(([s,l])=>{Object.entries(l).forEach(([r,o])=>{const p=x.complement_groups?.find(T=>T.id===s)?.options.find(T=>T.id===r);p&&o>0&&t.push({groupId:s,optionId:r,name:p.name,price:p.price,quantity:o})})}),g(s=>[...s,{...x,quantity:R,notes:oe,selectedComplements:t.length>0?t:void 0}]),ue()},fe=(t,s,l,r,o)=>{K(h=>{const p=h[t]||{},T=p[s]||0,ee=Math.max(0,Math.min(T+l,r));if(Object.values(p).reduce((Le,Ve)=>Le+Ve,0)-T+ee>o)return h;const te={...p};return ee===0?delete te[s]:te[s]=ee,{...h,[t]:te}})},pe=t=>{const s=I[t]||{};return Object.values(s).reduce((l,r)=>l+r,0)},ze=()=>{if(!x?.complement_groups)return{valid:!0,message:""};for(const t of x.complement_groups){const s=pe(t.id);if(t.is_required&&s===0)return{valid:!1,message:`"${t.name}" é obrigatório. Selecione pelo menos ${t.min_selections} opção(ões).`};if(s>0&&s<t.min_selections)return{valid:!1,message:`Selecione pelo menos ${t.min_selections} opção(ões) em "${t.name}".`};if(s>t.max_selections)return{valid:!1,message:`Selecione no máximo ${t.max_selections} opção(ões) em "${t.name}".`}}return{valid:!0,message:""}},Ae=()=>{if(!x)return 0;let t=Number(x.price);return x.complement_groups?.forEach(s=>{const l=I[s.id]||{};Object.entries(l).forEach(([r,o])=>{const h=s.options.find(p=>p.id===r);h&&(t+=h.price*o)})}),t*R},ye=t=>{g(s=>s.filter(l=>l.id!==t))},V=(t,s)=>{g(l=>l.map(r=>{if(r.id===t){const o=Math.max(1,r.quantity+s);return{...r,quantity:o}}return r}))},N=n.useMemo(()=>d.reduce((t,s)=>{let l=Number(s.price)*s.quantity;if(s.selectedComplements){const r=s.selectedComplements.reduce((o,h)=>o+h.price*h.quantity,0);l+=r*s.quantity}return t+l},0),[d]),De=n.useMemo(()=>{let t=j==="all"?f:M.find(s=>s.id===j)?.products||[];if(k){const s=k.toLowerCase();t=t.filter(l=>l.name.toLowerCase().includes(s))}return t},[f,M,j,k]),je=()=>{d.length!==0&&(w({...a,items:d.map(t=>({id:t.id,quantity:t.quantity,notes:t.notes,complements:t.selectedComplements})),total:N}),z(!0))},U=t=>{if(t&&t.preventDefault(),a.order_mode==="table"&&!m){alert("Por favor, selecione uma mesa antes de continuar.");return}if(u){$.post(route("tables.addItems",u.id),{items:d.map(s=>({id:s.id,quantity:s.quantity,notes:s.notes,complements:s.selectedComplements}))},{onSuccess:()=>{g([]),J(null),A("tables")}});return}if(a.order_mode==="table"&&m){const s=b.find(l=>l.id===m);if(s&&s.status!=="free"){$.post(route("tables.addItems",s.id),{items:d.map(l=>({id:l.id,quantity:l.quantity,notes:l.notes,complements:l.selectedComplements}))},{onSuccess:()=>{z(!1),g([]),be(),P(null),Z("")},onError:l=>{console.error("Add Items Error:",l),alert("Erro ao adicionar itens: "+JSON.stringify(l))}});return}}$.post(route("pdv.store"),{items:d.map(s=>({id:s.id,quantity:s.quantity,notes:s.notes,complements:s.selectedComplements})),customer_name:a.customer_name,customer_id:C?.id||null,payment_method:a.payment_method,order_mode:a.order_mode,total:N,table_id:a.order_mode==="table"?m:null},{onSuccess:()=>{z(!1),g([]),be(),P(null),Z("")},onError:s=>{console.error("Store Order Error:",s)}})},Ie=()=>{y&&confirm(`Fechar conta da mesa ${y.number}?`)&&$.post(route("tables.close",y.id),{payment_method:ce},{onSuccess:()=>E(null)})},Qe=t=>{t.preventDefault(),Q&&$.post(route("pdv.store"),{order_mode:"table",table_id:Q.id,customer_id:C?.id||null,customer_name:C?.name||"",items:[],payment_method:null},{onSuccess:()=>{Y(null),P(null)}})};return e.jsxs(Ge,{children:[e.jsx(Be,{title:"PDV"}),e.jsxs("div",{className:"flex flex-col h-[calc(100vh-65px)] overflow-hidden bg-gray-50 dark:bg-[#0f1012]",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] border-b border-gray-100 dark:border-white/5 px-4 py-3 flex items-center justify-between shrink-0 shadow-sm z-20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h1",{className:"text-xl font-black text-gray-900 dark:text-white tracking-tight hidden md:block",children:["PDV ",e.jsx("span",{className:"text-[#ff3d03]",children:"."})]}),e.jsxs("div",{className:"flex bg-gray-100 dark:bg-black/20 p-1 rounded-xl",children:[e.jsxs("button",{onClick:()=>A("sales"),className:c("px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-wide flex items-center gap-2 transition-all",W==="sales"?"bg-white dark:bg-[#ff3d03] text-gray-900 dark:text-white shadow-sm ring-1 ring-black/5":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),children:[e.jsx(v,{className:"h-4 w-4"}),"Caixa"]}),e.jsxs("button",{onClick:()=>A("tables"),className:c("px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-wide flex items-center gap-2 transition-all",W==="tables"?"bg-white dark:bg-[#ff3d03] text-gray-900 dark:text-white shadow-sm ring-1 ring-black/5":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),children:[e.jsx(B,{className:"h-4 w-4"}),"Mesas"]})]})]}),e.jsx("div",{className:"flex items-center gap-2"})]}),W==="sales"?e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 flex flex-col border-r border-gray-200 dark:border-white/5 bg-gray-50 dark:bg-[#0f1012]",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-[#1a1b1e] border-b border-gray-100 dark:border-white/5 space-y-4 shadow-sm z-10",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_e,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar produto por nome ou código...",value:k,onChange:t=>q(t.target.value),className:"w-full h-12 rounded-2xl border-none bg-gray-100 dark:bg-black/20 py-3 pl-12 text-gray-900 placeholder:text-gray-500 focus:ring-2 focus:ring-[#ff3d03]/20 dark:text-white transition-all shadow-inner"})]}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[e.jsx("button",{onClick:()=>i("all"),className:c("whitespace-nowrap rounded-xl px-5 py-2.5 text-xs font-bold uppercase tracking-wide transition-all shadow-sm",j==="all"?"bg-[#ff3d03] text-white shadow-[#ff3d03]/20":"bg-gray-100 dark:bg-white/5 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10"),children:"Todos"}),M.map(t=>e.jsx("button",{onClick:()=>i(t.id),className:c("whitespace-nowrap rounded-xl px-5 py-2.5 text-xs font-bold uppercase tracking-wide transition-all shadow-sm",j===t.id?"bg-[#ff3d03] text-white shadow-[#ff3d03]/20":"bg-gray-100 dark:bg-white/5 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10"),children:t.name},t.id))]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:De.map(t=>e.jsxs("div",{onClick:()=>Ee(t),className:"cursor-pointer group relative flex flex-col overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1e] shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-gray-100 dark:border-white/5",children:[e.jsxs("div",{className:"aspect-[4/3] w-full bg-gray-100 dark:bg-white/5 relative overflow-hidden",children:[t.image_url?e.jsx("img",{src:t.image_url,alt:t.name,className:"h-full w-full object-cover group-hover:scale-105 transition-transform duration-500"}):e.jsx("div",{className:"flex h-full items-center justify-center text-gray-300 dark:text-white/10",children:e.jsx(le,{className:"h-8 w-8"})}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 p-3 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex justify-end",children:e.jsx("div",{className:"bg-[#ff3d03] text-white p-1.5 rounded-full shadow-lg",children:e.jsx(S,{className:"h-4 w-4"})})})]}),e.jsxs("div",{className:"p-3 flex flex-col flex-1",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-900 line-clamp-2 dark:text-white leading-tight mb-2 min-h-[2.5rem]",children:t.name}),e.jsxs("div",{className:"mt-auto pt-2 border-t border-gray-50 dark:border-white/5 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-black text-gray-900 dark:text-white",children:["R$ ",Number(t.price).toFixed(2).replace(".",",")]}),t.complement_groups&&t.complement_groups.length>0&&e.jsx("div",{className:"text-[10px] font-bold text-gray-400 bg-gray-50 dark:bg-white/5 px-2 py-0.5 rounded-md",children:"Opções"})]})]})]},t.id))})})]}),e.jsxs("div",{className:c("hidden lg:flex w-[400px] flex-col bg-white border-l border-gray-200 dark:bg-[#1a1b1e] dark:border-white/5 z-30 shadow-2xl transition-all relative",u&&"border-2 border-blue-500/50"),children:[e.jsxs("div",{className:"p-5 border-b border-gray-100 dark:border-white/5 flex items-center justify-between bg-white dark:bg-[#1a1b1e]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-[#ff3d03]/10 flex items-center justify-center text-[#ff3d03]",children:e.jsx(v,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-base text-gray-900 dark:text-white leading-tight",children:u?`Mesa ${u.number}`:"Nova Venda"}),e.jsxs("p",{className:"text-xs text-gray-400 font-medium",children:[d.length," itens no pedido"]})]})]}),u&&e.jsx("button",{onClick:()=>{J(null),g([])},className:"text-xs text-red-500 hover:text-red-600 font-bold bg-red-50 px-3 py-1.5 rounded-lg transition-colors",children:"Sair da Mesa"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50 dark:bg-[#0f1012] custom-scrollbar",children:d.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 space-y-4 opacity-60",children:[e.jsx(v,{className:"h-16 w-16 text-gray-300 dark:text-gray-700"}),e.jsx("p",{className:"text-sm font-medium",children:"Seu carrinho está vazio"})]}):d.map(t=>e.jsxs("div",{className:"relative group bg-white dark:bg-[#1a1b1e] p-3 rounded-2xl border border-gray-100 dark:border-white/5 hover:border-[#ff3d03]/30 transition-colors shadow-sm",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"h-14 w-14 rounded-xl bg-gray-100 dark:bg-white/5 flex-shrink-0 overflow-hidden",children:t.image_url?e.jsx("img",{src:t.image_url,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-300",children:e.jsx(le,{className:"h-6 w-6"})})}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white truncate pr-6",children:t.name}),e.jsx("button",{onClick:()=>ye(t.id),className:"absolute top-3 right-3 text-gray-400 hover:text-red-500 p-1 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(_,{className:"h-3.5 w-3.5"})})]}),e.jsxs("div",{className:"flex justify-between items-end mt-1",children:[e.jsxs("p",{className:"text-xs font-medium text-[#ff3d03]",children:["R$ ",Number(t.price).toFixed(2).replace(".",",")]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-50 dark:bg-white/5 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>V(t.id,-1),className:"h-6 w-6 flex items-center justify-center rounded-md hover:bg-white dark:hover:bg-white/10 text-gray-600 dark:text-gray-300 shadow-sm transition-all",children:e.jsx(G,{className:"h-3 w-3"})}),e.jsx("span",{className:"text-xs font-bold w-6 text-center tabular-nums dark:text-white",children:t.quantity}),e.jsx("button",{onClick:()=>V(t.id,1),className:"h-6 w-6 flex items-center justify-center rounded-md hover:bg-white dark:hover:bg-white/10 text-gray-600 dark:text-gray-300 shadow-sm transition-all",children:e.jsx(S,{className:"h-3 w-3"})})]})]})]})]}),t.notes&&e.jsxs("div",{className:"mt-2 text-[10px] text-gray-500 bg-gray-50 dark:bg-black/20 p-1.5 rounded border border-dashed border-gray-200 dark:border-white/10",children:["Note: ",t.notes]})]},t.id))}),e.jsxs("div",{className:"p-5 border-t border-gray-100 dark:border-white/5 bg-white dark:bg-[#1a1b1e] space-y-4 shadow-[0_-10px_40px_rgba(0,0,0,0.05)]",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"Subtotal"}),e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:["R$ ",N.toFixed(2).replace(".",",")]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-black text-gray-900 dark:text-white",children:"Total"}),e.jsxs("span",{className:"text-2xl font-black text-[#ff3d03]",children:["R$ ",N.toFixed(2).replace(".",",")]})]})]}),e.jsxs("button",{onClick:u?U:je,disabled:d.length===0,className:"w-full h-14 flex items-center justify-center gap-2 bg-[#ff3d03] hover:bg-[#e63700] text-white font-bold text-base uppercase tracking-wide rounded-2xl shadow-lg shadow-[#ff3d03]/25 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none transition-all active:scale-[0.98]",children:[e.jsx(ne,{className:"h-5 w-5"}),u?"Enviar p/ Mesa":"Receber / Finalizar"]})]})]}),e.jsxs("button",{onClick:()=>L(!0),className:"lg:hidden fixed bottom-6 right-6 z-40 h-16 w-16 bg-[#ff3d03] hover:bg-[#e63700] text-white rounded-full shadow-2xl shadow-[#ff3d03]/40 flex items-center justify-center transition-all active:scale-95",children:[e.jsx(v,{className:"h-6 w-6"}),d.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 h-6 w-6 bg-white text-[#ff3d03] rounded-full flex items-center justify-center text-xs font-black border-2 border-[#ff3d03]",children:d.length})]}),Te&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-50 animate-fade-in",onClick:()=>L(!1)}),e.jsxs("div",{className:"lg:hidden fixed inset-y-0 right-0 w-full max-w-md bg-white dark:bg-[#1a1b1e] z-50 shadow-2xl flex flex-col animate-slide-left",children:[e.jsxs("div",{className:"p-5 border-b border-gray-100 dark:border-white/5 flex items-center justify-between bg-white dark:bg-[#1a1b1e]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-[#ff3d03]/10 flex items-center justify-center text-[#ff3d03]",children:e.jsx(v,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-base text-gray-900 dark:text-white leading-tight",children:u?`Mesa ${u.number}`:"Nova Venda"}),e.jsxs("p",{className:"text-xs text-gray-400 font-medium",children:[d.length," itens no pedido"]})]})]}),e.jsx("button",{onClick:()=>L(!1),className:"h-10 w-10 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-white/5 text-gray-400",children:e.jsx(_,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50 dark:bg-[#0f1012]",children:d.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 space-y-4 opacity-60",children:[e.jsx(v,{className:"h-16 w-16 text-gray-300 dark:text-gray-700"}),e.jsx("p",{className:"text-sm font-medium",children:"Seu carrinho está vazio"})]}):d.map(t=>e.jsxs("div",{className:"relative group bg-white dark:bg-[#1a1b1e] p-3 rounded-2xl border border-gray-100 dark:border-white/5 hover:border-[#ff3d03]/30 transition-colors shadow-sm",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"h-14 w-14 rounded-xl bg-gray-100 dark:bg-white/5 flex-shrink-0 overflow-hidden",children:t.image_url?e.jsx("img",{src:t.image_url,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-300",children:e.jsx(le,{className:"h-6 w-6"})})}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white truncate pr-6",children:t.name}),e.jsx("button",{onClick:()=>ye(t.id),className:"absolute top-3 right-3 text-gray-400 hover:text-red-500 p-1 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(_,{className:"h-3.5 w-3.5"})})]}),e.jsxs("div",{className:"flex justify-between items-end mt-1",children:[e.jsxs("p",{className:"text-xs font-medium text-[#ff3d03]",children:["R$ ",Number(t.price).toFixed(2).replace(".",",")]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-50 dark:bg-white/5 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>V(t.id,-1),className:"h-6 w-6 flex items-center justify-center rounded-md hover:bg-white dark:hover:bg-white/10 text-gray-600 dark:text-gray-300 shadow-sm transition-all",children:e.jsx(G,{className:"h-3 w-3"})}),e.jsx("span",{className:"text-xs font-bold w-6 text-center tabular-nums dark:text-white",children:t.quantity}),e.jsx("button",{onClick:()=>V(t.id,1),className:"h-6 w-6 flex items-center justify-center rounded-md hover:bg-white dark:hover:bg-white/10 text-gray-600 dark:text-gray-300 shadow-sm transition-all",children:e.jsx(S,{className:"h-3 w-3"})})]})]})]})]}),t.notes&&e.jsxs("div",{className:"mt-2 text-[10px] text-gray-500 bg-gray-50 dark:bg-black/20 p-1.5 rounded border border-dashed border-gray-200 dark:border-white/10",children:["Note: ",t.notes]})]},t.id))}),e.jsxs("div",{className:"p-5 border-t border-gray-100 dark:border-white/5 bg-white dark:bg-[#1a1b1e] space-y-4 shadow-[0_-10px_40px_rgba(0,0,0,0.05)]",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"Subtotal"}),e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:["R$ ",N.toFixed(2).replace(".",",")]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-black text-gray-900 dark:text-white",children:"Total"}),e.jsxs("span",{className:"text-2xl font-black text-[#ff3d03]",children:["R$ ",N.toFixed(2).replace(".",",")]})]})]}),e.jsxs("button",{onClick:()=>{L(!1),u?U():je()},disabled:d.length===0,className:"w-full h-14 flex items-center justify-center gap-2 bg-[#ff3d03] hover:bg-[#e63700] text-white font-bold text-base uppercase tracking-wide rounded-2xl shadow-lg shadow-[#ff3d03]/25 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none transition-all active:scale-[0.98]",children:[e.jsx(ne,{className:"h-5 w-5"}),u?"Enviar p/ Mesa":"Receber / Finalizar"]})]})]})]})]}):e.jsxs("div",{className:"flex-1 overflow-y-auto p-8 bg-gray-50 dark:bg-[#0f1012]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white tracking-tight",children:"Mapa de Mesas"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Gerencie a ocupação e pedidos das mesas."})]}),e.jsxs("button",{onClick:()=>O(!0),className:"bg-gray-900 dark:bg-white text-white dark:text-gray-900 px-5 py-2.5 rounded-xl text-sm font-bold flex items-center gap-2 hover:opacity-90 shadow-lg",children:[e.jsx(S,{className:"h-4 w-4"})," Nova Mesa"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:[b.map(t=>e.jsxs("div",{className:`relative p-8 rounded-[24px] border flex flex-col items-center justify-center min-h-[180px] transition-all duration-300 group shadow-sm hover:shadow-2xl ${t.status==="free"?"bg-light-card dark:bg-[#1a1b1e] border-gray-100 dark:border-white/5 hover:border-green-400/50":"bg-red-50 dark:bg-red-900/10 border-red-100 dark:border-red-900/20 hover:border-red-400/50"}`,children:[e.jsxs("button",{onClick:()=>{t.status==="free"?Y(t):E(t)},className:`absolute top-4 right-4 flex items-center gap-1.5 text-[10px] font-black tracking-widest uppercase px-3 py-1.5 rounded-full cursor-pointer hover:scale-105 transition-all shadow-sm ${t.status==="free"?"bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-400"}`,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t.status==="free"?"bg-green-500":"bg-red-500"}`}),t.status==="free"?"LIVRE":"OCUPADA"]}),e.jsx("span",{className:"text-5xl font-black text-white dark:text-white mb-3",children:t.number}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 dark:text-gray-500 text-sm font-medium bg-gray-50 dark:bg-black/20 px-3 py-1 rounded-lg",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsxs("span",{children:[t.capacity," lugares"]})]}),e.jsx("div",{className:"absolute inset-x-0 bottom-4 flex justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("button",{onClick:()=>{confirm("Excluir mesa?")&&$.delete(route("tables.destroy",t.id))},className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors",title:"Excluir Mesa",children:e.jsx(We,{className:"h-4 w-4"})})})]},t.id)),b.length===0&&e.jsxs("div",{className:"col-span-full py-20 flex flex-col items-center justify-center text-gray-400 dark:text-gray-600 border-2 border-dashed border-gray-200 dark:border-gray-800 rounded-3xl",children:[e.jsx(B,{className:"h-12 w-12 mb-4 opacity-20"}),e.jsx("p",{className:"font-medium",children:"Nenhuma mesa cadastrada."}),e.jsx("p",{className:"text-sm mt-1",children:"Adicione uma nova mesa para começar a gerenciar o salão."})]})]})]})]}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 bg-black/60 backdrop-blur-sm animate-fade-in overflow-hidden",children:e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] h-auto max-h-[92vh] sm:rounded-[2.5rem] w-full max-w-lg shadow-2xl overflow-hidden flex flex-col animate-slide-up",children:[e.jsxs("div",{className:"px-8 py-8 border-b border-gray-100 dark:border-white/5 flex justify-between items-center bg-white dark:bg-[#1a1b1e]",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-gray-900 dark:text-white tracking-tight",children:"Finalizar Pedido"}),e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Confirme os detalhes do pagamento"})]}),e.jsx("button",{onClick:()=>z(!1),className:"h-12 w-12 bg-gray-50 dark:bg-white/5 rounded-full flex items-center justify-center text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:e.jsx(_,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:U,className:"p-8 space-y-8 overflow-y-auto flex-1 custom-scrollbar max-h-[calc(100vh-180px)]",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Tipo de Pedido"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{id:"pickup",label:"Retirada",icon:v},{id:"table",label:"Mesa",icon:B},{id:"delivery",label:"Entregas",icon:se}].map(t=>e.jsx("button",{type:"button",onClick:()=>w("order_mode",t.id),className:c("py-3 px-2 rounded-xl text-sm font-bold flex flex-col items-center gap-2 transition-all border-2",a.order_mode===t.id?"border-[#ff3d03] bg-[#ff3d03]/5 text-[#ff3d03]":"border-gray-100 dark:border-white/5 bg-gray-50 dark:bg-white/5 text-gray-500 hover:border-gray-300 dark:hover:border-white/20"),children:t.label},t.id))})]}),a.order_mode==="table"&&e.jsxs("div",{className:"animate-fade-in mb-6",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Selecione a Mesa"}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 gap-2 max-h-40 overflow-y-auto p-1 custom-scrollbar",children:b.map(t=>e.jsxs("button",{type:"button",onClick:()=>{Z(t.id),w("table_id",t.id)},className:c("aspect-square rounded-xl flex flex-col items-center justify-center border-2 transition-all relative overflow-hidden",m===t.id?"border-[#ff3d03] bg-[#ff3d03]/10 text-[#ff3d03] ring-2 ring-[#ff3d03]/20":t.status==="free"?"border-gray-100 dark:border-white/5 bg-white dark:bg-white/5 text-gray-600 dark:text-gray-300 hover:border-gray-300":"border-red-100 dark:border-red-900/30 bg-red-50 dark:bg-red-900/10 text-red-500 hover:border-red-300"),children:[e.jsx("span",{className:"text-lg font-black",children:t.number}),e.jsx("span",{className:"text-[10px] uppercase font-bold",children:t.status==="free"?"Livre":"Ocupada"}),m===t.id&&e.jsx("div",{className:"absolute top-1 right-1 h-2 w-2 bg-[#ff3d03] rounded-full"})]},t.id))}),m&&b.find(t=>t.id===m)?.status!=="free"&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-100 dark:border-blue-900/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(de,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-xs font-bold text-blue-800 dark:text-blue-300",children:"Mesa Ocupada - Itens serão adicionados"})]}),b.find(t=>t.id===m)?.current_order?.items&&e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1 pl-6 border-l-2 border-blue-200 dark:border-blue-800/50",children:[e.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200",children:"Já na mesa:"}),b.find(t=>t.id===m)?.current_order?.items.map((t,s)=>e.jsx("div",{className:"flex justify-between",children:e.jsxs("span",{children:[t.quantity,"x ",t.product_name]})},s)),e.jsxs("div",{className:"pt-1 mt-1 border-t border-blue-200 dark:border-blue-800/30 font-bold flex justify-between",children:[e.jsx("span",{children:"Total Atual:"}),e.jsxs("span",{children:["R$ ",Number(b.find(t=>t.id===m)?.current_order?.total).toFixed(2)]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Cliente / Fidelidade"}),e.jsx(ke,{customers:F,value:C,onChange:t=>{P(t),w(s=>({...s,customer_id:t?.id||null,customer_name:t?.name||""}))}}),C&&e.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl border border-yellow-100 dark:border-yellow-900/30 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-bold text-yellow-800 dark:text-yellow-500",children:"Saldo Fidelidade"}),e.jsxs("span",{className:"text-lg font-black text-yellow-600 dark:text-yellow-400",children:[C.loyalty_points||0," pts"]})]})]}),a.order_mode!=="table"&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Método de Pagamento"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{type:"button",onClick:()=>w("payment_method","cash"),className:c("w-full flex items-center gap-4 p-4 rounded-2xl border-2 transition-all",a.payment_method==="cash"?"border-green-500 bg-green-50/50 dark:bg-green-900/10":"border-gray-100 dark:border-white/5 hover:bg-gray-50 dark:hover:bg-white/5"),children:[e.jsx("div",{className:c("h-10 w-10 rounded-full flex items-center justify-center",a.payment_method==="cash"?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"),children:e.jsx(ve,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("span",{className:c("block font-bold",a.payment_method==="cash"?"text-green-900 dark:text-white":"text-gray-700 dark:text-gray-300"),children:"Dinheiro"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Pagamento em espécie"})]}),a.payment_method==="cash"&&e.jsx("div",{className:"h-4 w-4 bg-green-500 rounded-full border-2 border-white ring-2 ring-green-200"})]}),e.jsxs("button",{type:"button",onClick:()=>w("payment_method","credit_card"),className:c("w-full flex items-center gap-4 p-4 rounded-2xl border-2 transition-all",a.payment_method==="credit_card"?"border-blue-500 bg-blue-50/50 dark:bg-blue-900/10":"border-gray-100 dark:border-white/5 hover:bg-gray-50 dark:hover:bg-white/5"),children:[e.jsx("div",{className:c("h-10 w-10 rounded-full flex items-center justify-center",a.payment_method==="credit_card"?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-400"),children:e.jsx(Je,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("span",{className:c("block font-bold",a.payment_method==="credit_card"?"text-blue-900 dark:text-white":"text-gray-700 dark:text-gray-300"),children:"Cartão"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Crédito ou Débito"})]}),a.payment_method==="credit_card"&&e.jsx("div",{className:"h-4 w-4 bg-blue-500 rounded-full border-2 border-white ring-2 ring-blue-200"})]}),e.jsxs("button",{type:"button",onClick:()=>w("payment_method","pix"),className:c("w-full flex items-center gap-4 p-4 rounded-2xl border-2 transition-all",a.payment_method==="pix"?"border-teal-500 bg-teal-50/50 dark:bg-teal-900/10":"border-gray-100 dark:border-white/5 hover:bg-gray-50 dark:hover:bg-white/5"),children:[e.jsx("div",{className:c("h-10 w-10 rounded-full flex items-center justify-center",a.payment_method==="pix"?"bg-teal-100 text-teal-600":"bg-gray-100 text-gray-400"),children:e.jsx(Xe,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("span",{className:c("block font-bold",a.payment_method==="pix"?"text-teal-900 dark:text-white":"text-gray-700 dark:text-gray-300"),children:"Pix"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Pagamento instantâneo"})]}),a.payment_method==="pix"&&e.jsx("div",{className:"h-4 w-4 bg-teal-500 rounded-full border-2 border-white ring-2 ring-teal-200"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Resumo do Pedido"}),e.jsx("div",{className:"bg-gray-50 dark:bg-black/20 rounded-2xl p-4 space-y-2 max-h-40 overflow-y-auto",children:d.map((t,s)=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:[t.quantity,"x ",f.find(l=>l.id===t.id)?.name]}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-bold",children:["R$ ",(parseFloat(f.find(l=>l.id===t.id)?.price||"0")*t.quantity).toFixed(2)]})]},s))})]}),a.order_mode==="delivery"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Endereço de Entrega *"}),e.jsx("textarea",{value:a.customer_name||"",onChange:t=>w("customer_name",t.target.value),className:"w-full px-4 py-3 border border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-[#ff3d03] focus:border-transparent bg-white dark:bg-premium-dark text-gray-900 dark:text-white resize-none",rows:3,placeholder:"Rua, número, bairro, complemento...",required:a.order_mode==="delivery"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"⚠️ Endereço obrigatório para entregas"})]}),e.jsxs("div",{className:"flex justify-between items-end pt-4 border-t border-gray-100 dark:border-white/5",children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"Total a pagar"}),e.jsxs("span",{className:"text-3xl font-black text-gray-900 dark:text-white",children:["R$ ",N.toFixed(2).replace(".",",")]})]}),Object.keys(ge).length>0&&e.jsxs("div",{className:"mx-6 px-4 py-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-700 dark:text-red-400 font-bold text-sm mb-1",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{children:"Erro ao processar pedido"})]}),e.jsx("ul",{className:"list-disc list-inside text-xs text-red-600 dark:text-red-300",children:Object.entries(ge).map(([t,s])=>e.jsx("li",{children:s},t))})]}),e.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-white/5 bg-gray-50 dark:bg-black/20 space-y-3",children:[a.order_mode==="delivery"&&!a.customer_name&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl",children:[e.jsx(de,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-xs font-medium text-yellow-800 dark:text-yellow-500",children:"Preencha o endereço de entrega"})]}),e.jsx("button",{onClick:t=>U(t),disabled:he||a.order_mode==="delivery"&&!a.customer_name||a.order_mode==="table"&&!m,className:"w-full rounded-2xl bg-[#ff3d03] py-4 text-base font-bold uppercase tracking-wide text-white shadow-xl shadow-[#ff3d03]/20 hover:bg-[#e63700] hover:scale-[1.02] disabled:opacity-50 disabled:scale-100 disabled:cursor-not-allowed transition-all",children:he?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processando..."]}):a.order_mode==="table"?m?b.find(t=>t.id===m)?.status!=="free"?`Adicionar à Mesa ${b.find(t=>t.id===m)?.number||""}`:`Abrir Mesa ${b.find(t=>t.id===m)?.number||""}`:"Selecione uma Mesa":`✓ Confirmar ${a.order_mode==="delivery"?"Entrega":a.order_mode==="pickup"?"Retirada":"Mesa"} - R$ ${N.toFixed(2)}`})]})]})]})}),e.jsx(re,{show:Se,onClose:()=>O(!1),maxWidth:"sm",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white tracking-tight",children:"Nova Mesa"}),e.jsx("button",{onClick:()=>O(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:Oe,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(ae,{value:"Número da Mesa",className:"mb-2"}),e.jsx(Ne,{type:"number",className:"w-full text-lg font-bold text-center h-14 rounded-xl",value:xe.number,onChange:t=>me("number",t.target.value),placeholder:"Ex: 10",required:!0})]}),e.jsxs("div",{children:[e.jsx(ae,{value:"Capacidade",className:"mb-2"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center text-gray-500",children:e.jsx(se,{className:"h-6 w-6"})}),e.jsx(Ne,{type:"number",className:"flex-1 text-lg font-bold h-12 rounded-xl",value:xe.capacity,onChange:t=>me("capacity",t.target.value),min:"1",required:!0})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-gray-100 dark:border-white/5",children:[e.jsx("button",{type:"button",onClick:()=>O(!1),className:"px-5 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-100 transition-colors",children:"Cancelar"}),e.jsx(He,{disabled:Fe,className:"bg-[#ff3d03] border-transparent rounded-xl px-6 py-3 shadow-lg hover:bg-[#e63700]",children:"Salvar Mesa"})]})]})]})}),e.jsx(re,{show:!!Q,onClose:()=>Y(null),maxWidth:"sm",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"h-16 w-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(B,{className:"h-8 w-8"})}),e.jsxs("h2",{className:"text-2xl font-black text-gray-900 dark:text-white",children:["Abrir Mesa ",Q?.number]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Inicie um novo atendimento para esta mesa."})]}),e.jsxs("form",{onSubmit:Qe,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(ae,{value:"Nome do Cliente (Opcional)",className:"mb-2"}),e.jsx(ke,{customers:F,value:C,onChange:P})]}),e.jsx("button",{className:"w-full rounded-2xl bg-green-600 py-4 text-white font-bold text-base uppercase tracking-wide shadow-lg hover:bg-green-700 transition-all",children:"Iniciar Atendimento"})]})]})}),e.jsx(re,{show:!!y,onClose:()=>E(null),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Mesa ",y?.number]}),e.jsx("button",{onClick:()=>E(null),children:e.jsx(_,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg mb-4 max-h-60 overflow-y-auto",children:[e.jsx("h3",{className:"font-bold text-sm mb-2 text-gray-500",children:"CONSUMO ATUAL"}),y?.current_order?.items?.map((t,s)=>e.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-100 last:border-0 dark:border-gray-700 text-sm",children:[e.jsxs("span",{children:[t.quantity,"x ",t.product_name]}),e.jsxs("span",{children:["R$ ",Number(t.subtotal).toFixed(2)]})]},s)),e.jsxs("div",{className:"flex justify-between font-bold mt-2 pt-2 border-t border-gray-200",children:[e.jsx("span",{children:"Total Parcial"}),e.jsxs("span",{children:["R$ ",Number(y?.current_order?.total||0).toFixed(2)]})]}),y?.current_order?.customer&&e.jsxs("div",{className:"mt-2 text-xs text-green-600 font-medium flex items-center gap-1",children:[e.jsx(Ce,{className:"h-3 w-3"})," ",y.current_order.customer.name]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>{J(y),E(null),A("sales"),g([])},className:"flex items-center justify-center gap-2 bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700",children:[e.jsx(S,{className:"h-4 w-4"})," Adicionar Itens"]}),e.jsxs("button",{onClick:Ie,className:"flex items-center justify-center gap-2 bg-green-600 text-white font-bold py-3 rounded-lg hover:bg-green-700",children:[e.jsx(ve,{className:"h-4 w-4"})," Fechar Conta"]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-xs uppercase font-bold text-gray-500",children:"Forma de Pagamento (Fechar)"}),e.jsxs("select",{value:ce,onChange:t=>Me(t.target.value),className:"w-full mt-1 rounded-md border-gray-300 dark:bg-gray-700 dark:border-gray-600",children:[e.jsx("option",{value:"cash",children:"Dinheiro"}),e.jsx("option",{value:"credit_card",children:"Cartão de Crédito"}),e.jsx("option",{value:"debit_card",children:"Cartão de Débito"}),e.jsx("option",{value:"pix",children:"Pix"})]})]})]})}),x&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"sticky top-0 bg-white dark:bg-[#1a1b1e] px-6 py-4 border-b border-gray-200 dark:border-gray-800 flex justify-between items-center z-10",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:x.name}),e.jsx("button",{onClick:ue,className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["R$ ",Number(x.price).toFixed(2).replace(".",",")]}),x.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:x.description})]}),x.complement_groups&&x.complement_groups.length>0&&e.jsx("div",{className:"space-y-4",children:x.complement_groups.map(t=>{const s=pe(t.id),l=!t.is_required||s>=t.min_selections;return e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white",children:[t.name,t.is_required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded ${l?"bg-green-50 text-green-700":"bg-orange-50 text-orange-700"}`,children:[s,"/",t.max_selections]}),t.min_selections>0&&e.jsxs("span",{className:"text-xs text-gray-500",children:["Mín: ",t.min_selections]})]})]}),e.jsx("div",{className:"space-y-2",children:t.options.map(r=>{const o=I[t.id]?.[r.id]||0,h=r.max_quantity||999,p=o<h&&s<t.max_selections;return e.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-xl transition-colors ${o>0?"bg-orange-50 border-[#ff3d03]":"bg-white hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:r.name}),h<999&&e.jsxs("span",{className:"text-xs text-gray-400",children:["(máx: ",h,")"]})]}),r.price>0&&e.jsxs("span",{className:"text-sm text-gray-600",children:["+R$ ",r.price.toFixed(2).replace(".",","),o>1&&` × ${o} = R$ ${(r.price*o).toFixed(2).replace(".",",")}`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>fe(t.id,r.id,-1,h,t.max_selections),disabled:o===0,className:"h-8 w-8 rounded-lg bg-gray-200 text-gray-700 flex items-center justify-center disabled:opacity-30 disabled:cursor-not-allowed hover:bg-gray-300 transition-colors",children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-8 text-center font-bold text-gray-900",children:o}),e.jsx("button",{onClick:()=>fe(t.id,r.id,1,h,t.max_selections),disabled:!p,className:"h-8 w-8 rounded-lg bg-[#ff3d03] text-white flex items-center justify-center disabled:opacity-30 disabled:cursor-not-allowed hover:bg-[#e63700] transition-colors",children:e.jsx(S,{className:"h-4 w-4"})})]})]},r.id)})})]},t.id)})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Observações (opcional)"}),e.jsx("textarea",{value:oe,onChange:t=>X(t.target.value),placeholder:"Ex: Sem cebola, bem passado...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff3d03] focus:border-transparent dark:bg-gray-800 dark:border-gray-700 dark:text-white resize-none",rows:2})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>D(Math.max(1,R-1)),className:"h-10 w-10 rounded-lg bg-gray-200 text-gray-700 flex items-center justify-center hover:bg-gray-300 transition-colors",children:e.jsx(G,{className:"h-5 w-5"})}),e.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white w-12 text-center",children:R}),e.jsx("button",{onClick:()=>D(R+1),className:"h-10 w-10 rounded-lg bg-[#ff3d03] text-white flex items-center justify-center hover:bg-[#e63700] transition-colors",children:e.jsx(S,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",Ae().toFixed(2).replace(".",",")]})]})]}),e.jsxs("button",{onClick:()=>{const t=ze();if(!t.valid){alert(t.message);return}Pe()},className:"w-full flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-xl shadow-lg transition-all active:scale-[0.98]",children:[e.jsx(v,{className:"h-5 w-5"}),"Adicionar ao Carrinho"]})]})]})})]})}export{Ht as default};
