import{d as N,u,j as e,H as v,$ as h,L as g,Z as k,as as p,at as w,au as C,l as E,M as P,a1 as _}from"./vendor-react-BRbeZxQj.js";import{A as D}from"./AuthenticatedLayout-DmT546vf.js";import{b0 as d}from"./vendor-others-CI9KCNiO.js";import{I as n}from"./InputLabel-DmSxUUNZ.js";import{T as o}from"./TextInput-CuZETfOR.js";import{P as S}from"./PrimaryButton-DHD1C0Ry.js";import"./vendor-utils-Dp_nMyUE.js";import"./Modal-j3wD4Y2Q.js";import"./app-w_IWnRYJ.js";import"./vendor-animation-BvO_7aKj.js";function F({customer:s}){const[t,l]=N.useState("details"),{data:i,setData:x,put:y,processing:f,errors:r}=u({name:s.name,email:s.email||"",phone:s.phone,address:s.address||""}),j=a=>{a.preventDefault(),y(route("customers.update",s.id))},c=a=>new Date(a).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),b=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a);return e.jsxs(D,{children:[e.jsx(v,{title:`Editar Cliente - ${s.name}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(h,{className:"h-6 w-6 text-[#ff3d03]"}),s.name]}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Gerenciamento completo do cliente"})]}),e.jsxs(g,{href:route("customers.index"),className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white flex items-center gap-1 text-sm font-medium",children:[e.jsx(k,{className:"h-4 w-4"})," Voltar"]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"lg:w-64 flex-shrink-0",children:e.jsx("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 overflow-hidden",children:e.jsxs("nav",{className:"flex flex-col",children:[e.jsxs("button",{onClick:()=>l("details"),className:d("flex items-center gap-3 px-4 py-3 text-sm font-medium transition-colors border-l-2",t==="details"?"bg-[#ff3d03]/10 text-[#ff3d03] border-[#ff3d03] dark:bg-[#ff3d03] dark:text-white dark:border-[#ff3d03]":"text-gray-600 border-transparent hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"),children:[e.jsx(h,{className:"h-4 w-4"})," Dados Pessoais"]}),e.jsxs("button",{onClick:()=>l("addresses"),className:d("flex items-center gap-3 px-4 py-3 text-sm font-medium transition-colors border-l-2",t==="addresses"?"bg-[#ff3d03]/10 text-[#ff3d03] border-[#ff3d03] dark:bg-[#ff3d03] dark:text-white dark:border-[#ff3d03]":"text-gray-600 border-transparent hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"),children:[e.jsx(p,{className:"h-4 w-4"})," Endereços"]}),e.jsxs("button",{onClick:()=>l("orders"),className:d("flex items-center gap-3 px-4 py-3 text-sm font-medium transition-colors border-l-2",t==="orders"?"bg-[#ff3d03]/10 text-[#ff3d03] border-[#ff3d03] dark:bg-[#ff3d03] dark:text-white dark:border-[#ff3d03]":"text-gray-600 border-transparent hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"),children:[e.jsx(w,{className:"h-4 w-4"})," Histórico de Pedidos"]}),e.jsxs("button",{onClick:()=>l("loyalty"),className:d("flex items-center gap-3 px-4 py-3 text-sm font-medium transition-colors border-l-2",t==="loyalty"?"bg-[#ff3d03]/10 text-[#ff3d03] border-[#ff3d03] dark:bg-[#ff3d03] dark:text-white dark:border-[#ff3d03]":"text-gray-600 border-transparent hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"),children:[e.jsx(C,{className:"h-4 w-4"})," Fidelidade (",s.loyalty_points," pts)"]})]})})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 p-6",children:[t==="details"&&e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(n,{value:"Nome Completo"}),e.jsx(o,{value:i.name,onChange:a=>x("name",a.target.value),className:"w-full mt-1",required:!0}),r.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.name})]}),e.jsxs("div",{children:[e.jsx(n,{value:"Telefone (WhatsApp)"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(E,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(o,{value:i.phone,onChange:a=>x("phone",a.target.value),className:"w-full pl-9",required:!0})]}),r.phone&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.phone})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(n,{value:"Email (Opcional)"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(P,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(o,{type:"email",value:i.email,onChange:a=>x("email",a.target.value),className:"w-full pl-9"})]}),r.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.email})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(n,{value:"Endereço Principal (Legado)"}),e.jsx(o,{value:i.address,onChange:a=>x("address",a.target.value),className:"w-full mt-1"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Este campo é mantido para compatibilidade. Use a aba "Endereços" para gestão completa.'})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-100 dark:border-gray-800",children:e.jsxs(S,{disabled:f,className:"gap-2",children:[e.jsx(_,{className:"h-4 w-4"})," Salvar Alterações"]})})]}),t==="addresses"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-bold dark:text-white",children:"Endereços Cadastrados"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Gestão de múltiplos endereços (Em breve)"})]}),s.addresses&&s.addresses.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.addresses.map(a=>e.jsxs("div",{className:"border dark:border-gray-700 rounded-lg p-4 relative",children:[a.is_default&&e.jsx("span",{className:"absolute top-2 right-2 bg-green-100 text-green-800 text-xs px-2 py-0.5 rounded-full dark:bg-green-900/20 dark:text-green-400",children:"Padrão"}),e.jsxs("p",{className:"font-bold dark:text-white",children:[a.street,", ",a.number]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.neighborhood," - ",a.city]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["CEP: ",a.zip_code]})]},a.id))}):e.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsx(p,{className:"h-10 w-10 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Nenhum endereço estruturado cadastrado."}),e.jsx("p",{className:"text-sm text-gray-400",children:"O cliente pode apenas ter o endereço legado."})]})]}),t==="orders"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold dark:text-white mb-4",children:"Histórico de Pedidos"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-gray-500 dark:text-gray-400 uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"ID"}),e.jsx("th",{className:"px-4 py-2",children:"Data"}),e.jsx("th",{className:"px-4 py-2",children:"Status"}),e.jsx("th",{className:"px-4 py-2",children:"Total"}),e.jsx("th",{className:"px-4 py-2",children:"Itens"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:s.orders&&s.orders.length>0?s.orders.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[e.jsxs("td",{className:"px-4 py-3 font-mono text-xs text-gray-500",children:["#",a.id.substring(0,8)]}),e.jsx("td",{className:"px-4 py-3 dark:text-gray-300",children:c(a.created_at)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:d("px-2 py-1 rounded-full text-xs font-bold capitalize",a.status==="completed"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":a.status==="cancelled"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"),children:a.status})}),e.jsx("td",{className:"px-4 py-3 font-bold dark:text-white",children:b(a.total)}),e.jsx("td",{className:"px-4 py-3 text-gray-500 dark:text-gray-400 text-xs",children:a.items.map(m=>`${m.quantity}x ${m.product_name}`).join(", ")})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"Nenhum pedido realizado."})})})]})})]}),t==="loyalty"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-bold dark:text-white",children:"Extrato de Pontos"}),e.jsxs("div",{className:"bg-[#ff3d03]/10 text-[#ff3d03] px-3 py-1 rounded-full font-bold text-sm",children:["Saldo Atual: ",s.loyalty_points," pts"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-gray-500 dark:text-gray-400 uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Data"}),e.jsx("th",{className:"px-4 py-2",children:"Descrição"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Pontos"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:s.loyalty_history&&s.loyalty_history.length>0?s.loyalty_history.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[e.jsx("td",{className:"px-4 py-3 dark:text-gray-300",children:c(a.created_at)}),e.jsx("td",{className:"px-4 py-3 dark:text-gray-300",children:a.description}),e.jsxs("td",{className:d("px-4 py-3 text-right font-bold",a.type==="earn"?"text-green-600":"text-red-600"),children:[a.type==="earn"?"+":"-",a.points]})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-gray-500",children:"Nenhuma movimentação de pontos."})})})]})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-gray-800 flex justify-end",children:e.jsx(g,{href:route("loyalty.index"),className:"text-[#ff3d03] text-sm hover:underline font-medium",children:"Gerenciar/Ajustar Pontos →"})})]})]})})]})]})]})}export{F as default};
