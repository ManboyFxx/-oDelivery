import{r as o,j as e,H as F,X as v,L as p,e as u,a as d,d as R}from"./app-TTZ6yfYt.js";import{A as Z}from"./AuthenticatedLayout-Clo1nGKq.js";import{C as z}from"./check-C5AhucfN.js";import{P as H}from"./plus-D0H8QIYy.js";import{S as T}from"./search-Qdzzigq9.js";import{G as w}from"./grip-vertical-DaX7X2Zz.js";import{C as Q}from"./copy-CV5gEaRH.js";import{P as U}from"./pen-CW5tG0E4.js";import{T as _}from"./trash-2-DNWCUWnN.js";import{C as V}from"./chevron-up-Cm4EOqgl.js";import{C as X}from"./chevron-down-BEToKIz1.js";import"./monitor-BdsVd8nT.js";import"./shopping-bag-D7PBG70r.js";import"./package-buaQaET2.js";import"./image-DglWeLfK.js";import"./layout-dashboard-KgukhM-z.js";import"./credit-card-DCZeHJ2i.js";import"./trophy-DB-OFGCm.js";import"./ticket-D7xrt7cm.js";import"./store-BC_pVZeE.js";import"./dollar-sign-CSAXNlbX.js";import"./key-DkhwG0P7.js";import"./shield-check-C3nCNg2S.js";import"./log-out-CsnF5_WX.js";import"./transition-Bs7QEe6q.js";import"./use-sync-refs-6-NS1CTg.js";import"./Modal-48PZuyWw.js";import"./keyboard-BQvCND68.js";import"./portal-5ufihSUC.js";import"./with-selector-DUY2HtF-.js";import"./hidden-CExFSfQ-.js";import"./truck-Db_AZmgL.js";import"./switch-Dj3SprrZ.js";import"./use-resolve-button-type-CxTZIPCI.js";import"./menu-Cmpe8lfy.js";import"./clock-C8kbtfaR.js";import"./menu-Cpx5-HJF.js";import"./useAudio-BrD6CPIp.js";import"./bell-CSgR0Qf5.js";import"./eye-D1J7aU35.js";import"./arrow-left-ByxKKVVO.js";function Le({groups:C,ingredients:J,errors:h,flash:c}){const[g,k]=o.useState(""),[f,q]=o.useState(!1),[b,S]=o.useState([]),[G,i]=o.useState(!1),[m,j]=o.useState(null),[t,l]=o.useState({name:"",is_required:!1,min_selections:0,max_selections:1,options:[{name:"",price:0,max_quantity:1,is_available:!0,ingredient_id:null}]}),y=C.filter(s=>s.name.toLowerCase().includes(g.toLowerCase())),E=s=>{S(r=>r.includes(s)?r.filter(a=>a!==s):[...r,s])},A=()=>{j(null),l({name:"",is_required:!1,min_selections:0,max_selections:1,options:[{name:"",price:0,max_quantity:null,is_available:!0,ingredient_id:null}]}),i(!0)},M=s=>{j(s),l({name:s.name,is_required:s.is_required,min_selections:s.min_selections,max_selections:s.max_selections,options:s.options.map(r=>({id:r.id,name:r.name,price:r.price,max_quantity:r.max_quantity||null,is_available:r.is_available,ingredient_id:r.ingredient_id||null}))}),i(!0)},O=s=>{s.preventDefault(),m?d.put(`/complements/${m.id}`,t,{onSuccess:()=>i(!1)}):d.post("/complements",t,{onSuccess:()=>i(!1)})},D=s=>{confirm("Deseja realmente excluir este grupo de complementos?")&&d.delete(`/complements/${s}`)},P=s=>{d.post(`/complements/${s}/duplicate`)},$=()=>{l(s=>({...s,options:[...s.options,{name:"",price:0,max_quantity:null,is_available:!0,ingredient_id:null}]}))},I=s=>{l(r=>({...r,options:r.options.filter((a,n)=>n!==s)}))},x=(s,r,a)=>{l(n=>({...n,options:n.options.map((N,B)=>B===s?{...N,[r]:a}:N)}))},L=async(s,r,a)=>{try{await R.post(`/complements/${s}/options/${r}/toggle`),d.reload({only:["groups"]})}catch(n){console.error("Error toggling option:",n)}};return e.jsxs(Z,{children:[e.jsx(F,{title:"Complementos"}),e.jsxs("div",{className:"p-6",children:[c.success&&e.jsxs("div",{className:"mb-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg relative flex items-center gap-2",role:"alert",children:[e.jsx(z,{className:"h-5 w-5"}),e.jsx("span",{className:"block sm:inline",children:c.success})]}),c.error&&e.jsxs("div",{className:"mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative flex items-center gap-2",role:"alert",children:[e.jsx(v,{className:"h-5 w-5"}),e.jsx("span",{className:"block sm:inline",children:c.error})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx(p,{href:"/products",className:"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm",children:"Produtos"}),e.jsx(p,{href:"/categories",className:"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm",children:"Categorias"}),e.jsx(p,{href:"/complements",className:"border-[#ff3d03] text-[#ff3d03] whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm","aria-current":"page",children:"Complementos"})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Grupos de Complementos"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Gerencie os complementos e adicionais dos seus produtos"})]}),e.jsxs("button",{onClick:A,className:"flex items-center gap-2 bg-[#ff3d03] hover:bg-[#e63700] text-white font-bold px-6 py-3 rounded-xl transition-colors",children:[e.jsx(H,{className:"h-5 w-5"}),"Novo Grupo"]})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(T,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar grupo ou opção...",value:g,onChange:s=>k(s.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#ff3d03] focus:border-transparent"})]}),e.jsx("button",{onClick:()=>q(!f),className:u("px-6 py-3 border rounded-xl font-medium transition-colors",f?"bg-[#ff3d03] text-white border-[#ff3d03]":"bg-white text-gray-700 border-gray-200 hover:border-[#ff3d03]"),children:"Ordenar A-Z"})]}),e.jsx("div",{className:"space-y-4",children:y.length===0?e.jsx("div",{className:"text-center py-12 bg-white rounded-xl border border-gray-200",children:e.jsx("p",{className:"text-gray-400",children:"Nenhum grupo encontrado"})}):y.map(s=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 flex items-center gap-4",children:[e.jsx("button",{className:"text-gray-400 hover:text-gray-600 cursor-move",children:e.jsx(w,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:s.name}),s.is_required&&e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full",children:"Obrigatório"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[s.options_count," opções • Min: ",s.min_selections," • Max: ",s.max_selections]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>P(s.id),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Duplicar",children:e.jsx(Q,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>M(s),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(U,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>D(s.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir",children:e.jsx(_,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>E(s.id),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",children:b.includes(s.id)?e.jsx(V,{className:"h-5 w-5"}):e.jsx(X,{className:"h-5 w-5"})})]})]}),b.includes(s.id)&&e.jsx("div",{className:"border-t border-gray-200 bg-gray-50",children:s.options.map(r=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-gray-200 last:border-0 bg-white",children:[e.jsx("button",{className:"text-gray-300 hover:text-gray-500 cursor-move",children:e.jsx(w,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>L(s.id,r.id,r.is_available),className:u("relative w-12 h-6 rounded-full transition-colors",r.is_available?"bg-[#ff3d03]":"bg-gray-200"),children:e.jsx("div",{className:u("absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform",r.is_available&&"translate-x-6")})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-700",children:r.name}),r.ingredient&&e.jsxs("p",{className:"text-xs text-gray-400",children:["Ingrediente: ",r.ingredient.name]})]}),e.jsx("div",{className:"text-sm text-gray-500",children:r.price===0?e.jsx("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs font-medium",children:"Grátis"}):e.jsxs("span",{className:"font-medium",children:["R$ ",r.price.toFixed(2)]})})]},r.id))})]},s.id))}),G&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>i(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:m?"Editar Grupo":"Novo Grupo de Complementos"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(v,{className:"h-6 w-6"})})]})}),e.jsxs("form",{onSubmit:O,className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Grupo *"}),e.jsx("input",{type:"text",value:t.name,onChange:s=>l({...t,name:s.target.value}),placeholder:"Ex: Escolha a Borda, Adicionais, Bebidas",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#ff3d03] focus:border-transparent",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mín. Seleções"}),e.jsx("input",{type:"number",min:"0",value:t.min_selections,onChange:s=>l({...t,min_selections:parseInt(s.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#ff3d03] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Máx. Seleções"}),e.jsx("input",{type:"number",min:"1",value:t.max_selections,onChange:s=>l({...t,max_selections:parseInt(s.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#ff3d03] focus:border-transparent"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.is_required,onChange:s=>{const r=s.target.checked;l({...t,is_required:r,min_selections:r&&t.min_selections===0?1:t.min_selections})},className:"h-5 w-5 text-[#ff3d03] rounded focus:ring-[#ff3d03]"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Obrigatório"})]})})]}),h?.min_selections&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:h.min_selections}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Opções *"}),e.jsx("button",{type:"button",onClick:$,className:"text-sm text-[#ff3d03] hover:text-[#e63700] font-medium",children:"+ Adicionar Opção"})]}),e.jsx("div",{className:"space-y-3",children:t.options.map((s,r)=>e.jsxs("div",{className:"flex gap-3 items-start p-3 border border-gray-200 rounded-xl",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{className:"col-span-2 md:col-span-1",children:e.jsx("input",{type:"text",value:s.name,onChange:a=>x(r,"name",a.target.value),placeholder:"Nome da opção",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff3d03] focus:border-transparent",required:!0})}),e.jsx("div",{className:"col-span-2 md:col-span-1",children:e.jsx("input",{type:"number",step:"0.01",min:"0",value:s.price,onChange:a=>x(r,"price",parseFloat(a.target.value)),placeholder:"Preço",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff3d03] focus:border-transparent",required:!0})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 mb-1 block",children:"Qtd. Máx"}),e.jsx("input",{type:"number",min:"1",value:s.max_quantity??"",onChange:a=>x(r,"max_quantity",a.target.value===""?null:parseInt(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff3d03] focus:border-transparent",placeholder:"Ilimitado"})]})})]}),t.options.length>1&&e.jsx("button",{type:"button",onClick:()=>I(r),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:e.jsx(_,{className:"h-4 w-4"})})]},r))})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 bg-gray-100 text-gray-700 font-bold py-3 rounded-xl hover:bg-gray-200 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 bg-[#ff3d03] text-white font-bold py-3 rounded-xl hover:bg-[#e63700] transition-colors",children:m?"Atualizar":"Criar Grupo"})]})]})]})})]})]})}export{Le as default};
