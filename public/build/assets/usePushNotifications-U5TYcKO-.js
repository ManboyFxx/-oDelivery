import{r as o,d as r}from"./app--h0sTTBV.js";const c=n=>{o.useEffect(()=>{typeof window<"u"&&window.OneSignal&&n&&window.OneSignal.push(async()=>{window.OneSignal.User.PushSubscription.addEventListener("change",i=>{i.current.token&&s(window.OneSignal.User.PushSubscription.id)}),window.OneSignal.User.PushSubscription.id&&s(window.OneSignal.User.PushSubscription.id)})},[n]);const s=async i=>{if(i)try{await r.post("/push/subscribe",{player_id:i}),console.log("✅ Push subscription synced with server")}catch(e){console.error("❌ Failed to sync push subscription",e)}};return{requestPermission:()=>{window.OneSignal&&window.OneSignal.push(()=>{window.OneSignal.Notifications.requestPermission()})}}};export{c as u};
