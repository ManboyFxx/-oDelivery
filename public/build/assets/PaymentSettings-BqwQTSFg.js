import{r as y,R as u,j as a,a as p}from"./app-CUFRCqdo.js";import{C as o}from"./credit-card-Bd3Lyb5-.js";import{B as f}from"./banknote-DS8y1wu_.js";import{Q as m}from"./qr-code-D-GvpKsN.js";import{C as _}from"./circle-alert-BY1qqY5q.js";import{t as v}from"./switch-DK1AqQ5S.js";import"./use-resolve-button-type-BW74xnh8.js";import"./keyboard-D1BT0WfK.js";import"./use-sync-refs-DolXfIQ_.js";import"./hidden-BqDU9bpd.js";const k=[{type:"credit_card",name:"Cartão de Crédito",icon:o},{type:"debit_card",name:"Cartão de Débito",icon:o},{type:"money",name:"Dinheiro",icon:f},{type:"pix",name:"PIX",icon:m}];function D({paymentMethods:d}){const[b,n]=y.useState(()=>x(d));function x(e){return k.map(s=>{const r=e.find(i=>i.type===s.type);return{...s,...r,id:r?.id,is_active:!!r?.is_active,fee_percentage:r?.fee_percentage||"",fee_fixed:r?.fee_fixed||"",pix_key:r?.pix_key||"",pix_key_type:r?.pix_key_type||"random"}})}u.useEffect(()=>{n(x(d))},[d]);const g=e=>{const s=!e.is_active;n(i=>i.map(t=>t.type===e.type?{...t,is_active:s}:t));const r={name:e.name,type:e.type,fee_percentage:e.fee_percentage||0,fee_fixed:e.fee_fixed||0,is_active:s,pix_key:e.pix_key,pix_key_type:e.pix_key_type};e.id?p.put(route("payment-methods.update",e.id),r,{preserveScroll:!0,onError:()=>{n(i=>i.map(t=>t.type===e.type?{...t,is_active:!s}:t))}}):s&&p.post(route("payment-methods.store"),r,{preserveScroll:!0,onError:()=>{n(i=>i.map(t=>t.type===e.type?{...t,is_active:!1}:t))}})},l=(e,s,r)=>{n(i=>i.map(t=>t.type===e.type?{...t,[s]:r}:t))},c=e=>{e.id&&p.put(route("payment-methods.update",e.id),{name:e.name,type:e.type,is_active:e.is_active,fee_percentage:e.fee_percentage||0,fee_fixed:e.fee_fixed||0,pix_key:e.pix_key,pix_key_type:e.pix_key_type},{preserveScroll:!0})};return a.jsxs("div",{className:"bg-white dark:bg-premium-card rounded-[32px] border border-gray-100 dark:border-white/5 p-8 shadow-sm",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("h3",{className:"text-gray-900 dark:text-gray-200 flex items-center gap-2 font-bold",children:[a.jsx(o,{className:"h-5 w-5 text-[#ff3d03]"}),"Formas de Pagamento"]})}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 border border-blue-200 dark:border-blue-800/30 rounded-2xl p-4 mb-6 flex items-start gap-3",children:[a.jsx(_,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[a.jsx("p",{className:"font-medium",children:"Validação em Todo o Sistema"}),a.jsx("p",{className:"mt-1",children:"Gerencie as formas de pagamento aceitas. Ative as opções e configure as taxas."})]})]}),a.jsx("div",{className:"space-y-4",children:b.map(e=>{const s=e.icon;return a.jsxs("div",{className:"bg-gray-50 dark:bg-premium-dark rounded-2xl p-6 border border-gray-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"h-10 w-10 bg-white dark:bg-white/10 rounded-full flex items-center justify-center shadow-sm",children:a.jsx(s,{className:"h-5 w-5 text-gray-700 dark:text-gray-300"})}),a.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-lg",children:e.name})]}),a.jsx(v,{checked:e.is_active,onChange:()=>g(e),className:`${e.is_active?"bg-[#ff3d03]":"bg-gray-300 dark:bg-gray-600"} relative inline-flex h-6 w-11 items-center rounded-full transition-colors`,children:a.jsx("span",{className:`${e.is_active?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]}),a.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 transition-all duration-300 ${e.is_active?"":"opacity-50 grayscale pointer-events-none"}`,children:[(e.type==="credit_card"||e.type==="debit_card"||e.type==="pix")&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block",children:"Taxa (%)"}),a.jsx("input",{type:"number",step:"0.01",value:e.fee_percentage,onChange:r=>l(e,"fee_percentage",r.target.value),onBlur:()=>c(e),disabled:!e.is_active,className:"w-full px-3 py-2 bg-white dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-lg text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block",children:"Taxa Fixa (R$)"}),a.jsx("input",{type:"number",step:"0.01",value:e.fee_fixed,onChange:r=>l(e,"fee_fixed",r.target.value),onBlur:()=>c(e),disabled:!e.is_active,className:"w-full px-3 py-2 bg-white dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-lg text-sm"})]})]}),e.type==="pix"&&a.jsx("div",{className:"md:col-span-2 space-y-4 pt-2 border-t border-gray-200 dark:border-white/5 mt-2",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block",children:"Tipo de Chave"}),a.jsxs("select",{value:e.pix_key_type||"random",onChange:r=>l(e,"pix_key_type",r.target.value),onBlur:()=>c(e),disabled:!e.is_active,className:"w-full px-3 py-2 bg-white dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-lg text-sm",children:[a.jsx("option",{value:"cpf",children:"CPF"}),a.jsx("option",{value:"cnpj",children:"CNPJ"}),a.jsx("option",{value:"email",children:"E-mail"}),a.jsx("option",{value:"phone",children:"Telefone"}),a.jsx("option",{value:"random",children:"Chave Aleatória"})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block",children:"Chave PIX"}),a.jsx("input",{type:"text",value:e.pix_key||"",onChange:r=>l(e,"pix_key",r.target.value),onBlur:()=>c(e),disabled:!e.is_active,placeholder:"Digite sua chave PIX...",className:"w-full px-3 py-2 bg-white dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-lg text-sm"})]})]})})]})]},e.type)})})]})}export{D as default};
