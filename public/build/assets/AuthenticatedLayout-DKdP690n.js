import{c as f,b as _,r as i,j as e,e as w,X as J,L as O,a as $,f as R,g as Z}from"./app-B_J8lkvq.js";import{S as X}from"./shopping-bag-DaPSf6TI.js";import{P as Q}from"./package-CeHhWqUy.js";import{L as q}from"./layout-dashboard-DDvXwa6l.js";import{C as Y}from"./credit-card-hB9Iy1G8.js";import{T as ee}from"./trophy-CpSHVSLI.js";import{C as z}from"./chart-column-DlQMyJ49.js";import{T as B}from"./ticket-DBNRMPVC.js";import{S as M}from"./store-azgh8etq.js";import{D as te}from"./dollar-sign-DExvMb2d.js";import{K as re}from"./key-Wmv6-h3t.js";import{S as ae}from"./shield-check-2o4NXgtW.js";import{L as se}from"./log-out-BCw83gpS.js";import{K as H}from"./transition-DR1ycciu.js";import{M as ne}from"./Modal-C-bZLru0.js";import{T as oe}from"./truck-CuKP95K_.js";import{t as ie}from"./switch-C3fnJxal.js";import{l as S}from"./menu-BcHp92a-.js";import{C as K}from"./chevron-down-NvgkGDYJ.js";import{C as E}from"./clock-DD5LZAZg.js";import{M as le}from"./menu-COef93TY.js";import{S as de}from"./search-BGAmxcu_.js";import{B as ce}from"./bell-DhFf-dhR.js";import{E as me}from"./eye-C1y5PipQ.js";import{A as ue}from"./arrow-left-DhEioSnZ.js";const xe=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],U=f("book-open",xe);const pe=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],he=f("box",pe);const ge=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],fe=f("chef-hat",ge);const be=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]],G=f("circle-pause",be);const ye=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ve=f("circle-play",ye);const ke=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],je=f("download",ke);const we=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],Ne=f("life-buoy",we);const Ce=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],V=f("message-square",Ce);const Se=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Me=f("monitor",Se);const _e=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Pe=f("moon",_e);const Ae=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],$e=f("sun",Ae);const Le=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],De=f("user-cog",Le);const Ee=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Oe=f("users",Ee);function Te({isOpen:a,onClose:r}){const{url:l,props:m}=_(),d=m.auth.user,[b,c]=i.useState(!1),p=i.useRef(null);i.useEffect(()=>{const o=p.current;if(!o)return;const u=sessionStorage.getItem("sidebar-scroll-position");u&&(o.scrollTop=parseInt(u,10));const x=()=>{sessionStorage.setItem("sidebar-scroll-position",o.scrollTop.toString())};return o.addEventListener("scroll",x),()=>o.removeEventListener("scroll",x)},[]);const t=o=>l.startsWith(o);i.useEffect(()=>{c(!1),r?.()},[l]);const h=()=>{c(!1),r?.()},k=[{title:"Operação",items:[{name:"PDV / Caixa",href:route("pdv.index"),route:"pdv.index",icon:Me,current:t("/pdv")},{name:"Pedidos",href:route("orders.index"),route:"orders.index",icon:X,current:t("/orders")},{name:"Cozinha (KDS)",href:route("kitchen.index"),route:"kitchen.index",icon:fe,current:t("/kitchen")},{name:"Estoque",href:route("stock.index"),route:"stock.index",icon:he,current:t("/estoque")}]},{title:"Cardápio",items:[{name:"Gestão de Cardápio",href:route("menu.index"),route:"menu.index",icon:U,current:t("/cardapio")},{name:"Produtos",href:route("products.index"),route:"products.index",icon:Q,current:t("/products")}]}],C=[{title:"Visão Geral",items:[{name:"Dashboard",href:route("dashboard"),route:"dashboard",icon:q,current:t("/dashboard")},{name:"Minha Assinatura",href:route("subscription.index"),route:"subscription.index",icon:Y,current:t("/subscription")}]},{title:"Gestão",items:[{name:"Clientes",href:route("customers.index"),route:"customers.index",icon:Oe,current:t("/customers")},{name:"Equipe",href:route("employees.index"),route:"employees.index",icon:De,current:t("/employees")},{name:"Fidelidade",href:route("loyalty.index"),route:"loyalty.index",icon:ee,current:t("/fidelidade")},{name:"Financeiro",href:route("financial.index"),route:"financial.index",icon:z,current:t("/financeiro")}]},{title:"Marketing",items:[{name:"Cupons",href:route("coupons.index"),route:"coupons.index",icon:B,current:t("/coupons")},{name:"WhatsApp",href:route("whatsapp.index"),route:"whatsapp.index",icon:V,current:t("/whatsapp")}]},{title:"Configurações",items:[{name:"Loja",href:route("settings.index"),route:"settings.index",icon:M,current:t("/settings")}]},{title:"Sistema",items:[{name:"Apps & Downloads",href:route("system.downloads"),route:"system.downloads",icon:je,current:t("/sistema/downloads")}]}],g={title:"Ajuda",items:[{name:"Suporte",href:route("support.index"),route:"support.index",icon:Ne,current:t("/suporte")}]},j=d.role==="admin"?[...k,...C,g]:[...k,g],s=[{title:"Administração",items:[{name:"Dashboard",href:route("admin.dashboard"),route:"admin.dashboard",icon:q,current:t("/admin/dashboard")},{name:"Tenants",href:route("admin.tenants.index"),route:"admin.tenants.index",icon:M,current:t("/admin/tenants")},{name:"Finanças",href:route("admin.financial.index"),route:"admin.financial.index",icon:te,current:t("/admin/financial")},{name:"Cupons de Plano",href:route("admin.plan-coupons.index"),route:"admin.plan-coupons.index",icon:B,current:t("/admin/plan-coupons")}]},{title:"Sistema",items:[{name:"API Keys",href:route("admin.api-keys.index"),route:"admin.api-keys.index",icon:re,current:t("/admin/api-keys")},{name:"WhatsApp Master",href:route("admin.whatsapp.index"),route:"admin.whatsapp.index",icon:V,current:t("/admin/whatsapp")&&!t("/admin/whatsapp/templates")},{name:"Templates Padrão",href:route("admin.whatsapp.templates.index"),route:"admin.whatsapp.templates.index",icon:U,current:t("/admin/whatsapp/templates")},{name:"Logs de Segurança",href:route("admin.logs.security"),route:"admin.logs.security",icon:ae,current:t("/admin/logs")}]}],v=d.role==="super_admin"?s:j,n=m.tenant?.limits;return e.jsxs(e.Fragment,{children:[(a||b)&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black/60 backdrop-blur-sm lg:hidden transition-opacity",onClick:()=>{c(!1),r?.()}}),e.jsxs("aside",{className:w("fixed inset-y-0 left-0 z-50 flex h-screen w-72 flex-col justify-between border-r border-white/5 bg-[#0a0a0a] selection:bg-orange-500/20 transition-transform duration-300 ease-out",a||b?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[e.jsxs("div",{className:"flex-none pt-8 pb-6 px-6 bg-[#0a0a0a]",children:[e.jsx("div",{className:"flex items-center gap-4 px-2",children:e.jsxs("div",{className:"flex flex-col w-full gap-1",children:[e.jsx("img",{src:"/images/logo.png",alt:"ÓoDelivery",className:"h-14 w-auto object-contain mx-auto mb-2"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-[10px] font-black text-white/40 uppercase tracking-[0.2em]",children:"Painel Gestor"})})]})}),e.jsx("button",{onClick:()=>{c(!1),r?.()},className:"lg:hidden absolute top-4 right-4 p-2 rounded-lg hover:bg-white/10 text-white/60 hover:text-white transition-colors",children:e.jsx(J,{className:"h-5 w-5"})})]}),e.jsx("div",{ref:p,className:"flex-1 overflow-y-auto px-4 py-2 scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent hover:scrollbar-thumb-white/20",children:e.jsx("nav",{className:"flex flex-col gap-6 pb-6",children:v.map((o,u)=>e.jsxs("div",{children:[o.title&&e.jsx("h3",{className:w("mb-2 px-4 text-[10px] font-black uppercase tracking-widest",o.title==="Sistema"?"text-cyan-500/80":"text-white/30"),children:o.title}),e.jsx("div",{className:"space-y-1",children:o.items.map(x=>{const y=x.name==="Apps & Downloads";return e.jsxs(O,{href:x.href,onClick:h,className:w("group relative flex items-center gap-3 rounded-2xl px-4 py-3 text-sm font-bold transition-all duration-200",x.current?y?"bg-cyan-500/10 text-cyan-400":"bg-[#ff3d03]/10 text-[#ff3d03]":"text-gray-400 hover:bg-white/5 hover:text-white"),children:[x.current&&e.jsx("div",{className:w("absolute left-0 top-1/2 -translate-y-1/2 h-8 w-1 rounded-r-full",y?"bg-cyan-400":"bg-[#ff3d03]")}),e.jsx(x.icon,{className:w("h-5 w-5 transition-transform duration-200 group-hover:scale-110",x.current?y?"text-cyan-400":"text-[#ff3d03]":"text-gray-500 group-hover:text-white")}),e.jsx("span",{className:"relative z-10 font-bold tracking-wide",children:x.name}),!x.current&&e.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]},x.name)})})]},u))})}),n&&n.products&&n.orders&&e.jsxs("div",{className:"mx-4 mb-2 p-4 rounded-2xl bg-white/5 border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 opacity-60",children:[e.jsx(z,{size:14,className:"text-white"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-white",children:"Consumo do Plano"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-gray-400 mb-1",children:[e.jsx("span",{children:"Produtos"}),e.jsxs("span",{children:[n.products.used," / ",n.products.max??"∞"]})]}),n.products.max?e.jsx("div",{className:"h-1.5 w-full bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:w("h-full rounded-full transition-all duration-500",n.products.used/n.products.max>.9?"bg-red-500":"bg-[#ff3d03]"),style:{width:`${Math.min(n.products.used/n.products.max*100,100)}%`}})}):e.jsx("span",{className:"text-[10px] text-green-400 font-bold",children:"Ilimitado"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-gray-400 mb-1",children:[e.jsx("span",{children:"Pedidos (Mês)"}),e.jsxs("span",{children:[n.orders.used," / ",n.orders.max??"∞"]})]}),n.orders.max?e.jsx("div",{className:"h-1.5 w-full bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:w("h-full rounded-full transition-all duration-500",n.orders.used/n.orders.max>.9?"bg-red-500":"bg-blue-500"),style:{width:`${Math.min(n.orders.used/n.orders.max*100,100)}%`}})}):e.jsx("span",{className:"text-[10px] text-green-400 font-bold",children:"Ilimitado"})]})]}),e.jsxs("div",{className:"flex-none p-4 bg-[#0a0a0a] border-t border-white/5",children:[e.jsxs(O,{href:route("logout"),onClick:h,method:"post",as:"button",className:"group flex w-full items-center gap-3 rounded-2xl px-4 py-3 text-sm font-bold text-gray-400 hover:bg-red-500/10 hover:text-red-500 transition-all duration-200",children:[e.jsx(se,{className:"h-5 w-5 transition-transform group-hover:-translate-x-1"}),e.jsx("span",{children:"Sair do Sistema"})]}),e.jsxs("div",{className:"mt-4 px-2 flex justify-between items-center opacity-30 hover:opacity-100 transition-opacity",children:[e.jsx("span",{className:"text-[10px] font-medium text-white",children:"v4.0.0 Pro"}),e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-green-500 animate-pulse"})]})]})]})]})}const T=i.createContext({open:!1,setOpen:()=>{},toggleOpen:()=>{}}),N=({children:a})=>{const[r,l]=i.useState(!1),m=()=>{l(d=>!d)};return e.jsx(T.Provider,{value:{open:r,setOpen:l,toggleOpen:m},children:e.jsx("div",{className:"relative",children:a})})},Ie=({children:a})=>{const{open:r,setOpen:l,toggleOpen:m}=i.useContext(T);return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:m,children:a}),r&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)})]})},Fe=({align:a="right",width:r="48",contentClasses:l="py-1 bg-white dark:bg-gray-700",children:m})=>{const{open:d,setOpen:b}=i.useContext(T);let c="origin-top";a==="left"?c="ltr:origin-top-left rtl:origin-top-right start-0":a==="right"&&(c="ltr:origin-top-right rtl:origin-top-left end-0");let p="";return r==="48"&&(p="w-48"),e.jsx(e.Fragment,{children:e.jsx(H,{show:d,enter:"transition ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsx("div",{className:`absolute z-50 mt-2 rounded-md shadow-lg ${c} ${p}`,onClick:()=>b(!1),children:e.jsx("div",{className:"rounded-md ring-1 ring-black ring-opacity-5 "+l,children:m})})})})},qe=({className:a="",children:r,...l})=>e.jsx(O,{...l,className:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none dark:text-gray-300 dark:hover:bg-gray-800 dark:focus:bg-gray-800 "+a,children:r});N.Trigger=Ie;N.Content=Fe;N.Link=qe;function ze(){const{tenant:a}=_().props;if(!a)return null;const{store_status:r}=a;if(console.log("DEBUG Store Status:",r),!r)return null;const[l,m]=i.useState(!1),[d,b]=i.useState(""),c=r.is_open,p=r.is_delivery_paused,t=!!r.paused_until,h=r.status_override,k=s=>{$.post(route("settings.update"),{status_override:s},{preserveScroll:!0,preserveState:!0})},C=s=>{$.post(route("settings.update"),{is_delivery_paused:s},{preserveScroll:!0,preserveState:!0})},g=s=>{let v=null;if(s){const n=new Date;n.setMinutes(n.getMinutes()+s),v=n.toISOString()}$.post(route("settings.update"),{paused_until:v},{preserveScroll:!0,preserveState:!0,onSuccess:()=>m(!1)})},j=s=>new Date(s).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsxs("div",{className:`hidden md:flex items-center gap-2 px-3 py-1.5 rounded-full border transition-colors ${p?"bg-amber-50 border-amber-200 dark:bg-amber-900/20 dark:border-amber-800":"bg-white border-transparent dark:bg-white/5"}`,children:[e.jsx(oe,{className:`w-4 h-4 ${p?"text-amber-500":"text-gray-400"}`}),e.jsx("span",{className:`text-xs font-medium ${p?"text-amber-700 dark:text-amber-400":"text-gray-600 dark:text-gray-400"}`,children:"Delivery"}),e.jsx(ie,{checked:!p,onChange:s=>C(!s),className:`${p?"bg-gray-300 dark:bg-gray-600":"bg-green-500"} relative inline-flex h-5 w-9 items-center rounded-full transition-colors`,children:e.jsx("span",{className:`${p?"translate-x-1":"translate-x-5"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]}),e.jsxs("div",{className:"flex items-center bg-white dark:bg-white/5 rounded-full p-1 border border-gray-100 dark:border-white/10 shadow-sm",children:[e.jsxs(S,{as:"div",className:"relative",children:[e.jsxs(S.Button,{className:`flex items-center gap-2 px-3 py-1.5 rounded-full font-bold text-sm transition-colors ${c?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 hover:bg-green-200":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 hover:bg-red-200"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${c?"bg-green-500":"bg-red-500"} animate-pulse`}),c?"Aberta":"Fechada",e.jsx(K,{className:"w-3 h-3 opacity-50"})]}),e.jsx(H,{as:i.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:e.jsxs(S.Items,{className:"absolute left-0 mt-2 w-56 origin-top-left bg-white dark:bg-gray-800 rounded-xl shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden divide-y divide-gray-100 dark:divide-white/5 disabled:opacity-50",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-white/5",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Modo de Operação"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${h===null?"bg-blue-500":"bg-gray-300"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:h==="open"?"Forçar Aberto":h==="closed"?"Forçar Fechado":"Automático"})]})]}),e.jsxs("div",{className:"p-1",children:[e.jsx(S.Item,{children:({active:s})=>e.jsxs("button",{onClick:()=>k(null),className:`${s?"bg-gray-100 dark:bg-white/5":""} flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm text-gray-700 dark:text-gray-200`,children:[e.jsx(E,{className:"w-4 h-4 text-blue-500"}),"Automático (Horários)",h===null&&e.jsx(M,{className:"w-3 h-3 ml-auto text-blue-500"})]})}),e.jsx(S.Item,{children:({active:s})=>e.jsxs("button",{onClick:()=>k("open"),className:`${s?"bg-green-50 dark:bg-green-900/10":""} flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm text-green-700 dark:text-green-400`,children:[e.jsx(ve,{className:"w-4 h-4"}),"Abrir Loja (Forçar)",h==="open"&&e.jsx(M,{className:"w-3 h-3 ml-auto text-green-500"})]})}),e.jsx(S.Item,{children:({active:s})=>e.jsxs("button",{onClick:()=>k("closed"),className:`${s?"bg-red-50 dark:bg-red-900/10":""} flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm text-red-700 dark:text-red-400`,children:[e.jsx(G,{className:"w-4 h-4"}),"Fechar Loja (Forçar)",h==="closed"&&e.jsx(M,{className:"w-3 h-3 ml-auto text-red-500"})]})})]})]})})]}),e.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-white/10 mx-1"}),t?e.jsxs("button",{onClick:()=>g(null),className:"flex items-center gap-2 px-3 py-1.5 text-xs font-bold text-amber-700 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/20 rounded-full transition-colors",title:"Clique para cancelar pausa",children:[e.jsx(E,{className:"w-4 h-4"}),"Até ",j(r.paused_until),e.jsx("span",{className:"hidden md:inline text-amber-600 dark:text-amber-500 ml-1",children:"✖"})]}):e.jsx("button",{onClick:()=>m(!0),className:"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full transition-colors",title:"Pausar Loja",children:e.jsx(G,{className:"w-5 h-5"})})]}),e.jsx(ne,{show:l,onClose:()=>m(!1),maxWidth:"sm",children:e.jsxs("div",{className:"p-6 bg-white dark:bg-[#1a1b1e]",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-amber-500"}),"Pausar Loja"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Por quanto tempo deseja pausar os pedidos? A loja ficará fechada temporariamente."}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsx("button",{onClick:()=>g(15),className:"bg-gray-100 dark:bg-white/5 hover:bg-amber-50 hover:text-amber-600 dark:hover:bg-amber-900/20 dark:hover:text-amber-400 border border-transparent hover:border-amber-200 rounded-xl py-3 text-sm font-bold transition-all",children:"15 min"}),e.jsx("button",{onClick:()=>g(30),className:"bg-gray-100 dark:bg-white/5 hover:bg-amber-50 hover:text-amber-600 dark:hover:bg-amber-900/20 dark:hover:text-amber-400 border border-transparent hover:border-amber-200 rounded-xl py-3 text-sm font-bold transition-all",children:"30 min"}),e.jsx("button",{onClick:()=>g(60),className:"bg-gray-100 dark:bg-white/5 hover:bg-amber-50 hover:text-amber-600 dark:hover:bg-amber-900/20 dark:hover:text-amber-400 border border-transparent hover:border-amber-200 rounded-xl py-3 text-sm font-bold transition-all",children:"1h"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"Outro (min)",value:d,onChange:s=>b(s.target.value),onKeyDown:s=>s.key==="Enter"&&d&&g(parseInt(d)),className:"flex-1 px-4 py-2 border border-gray-200 dark:border-white/10 rounded-xl bg-transparent text-sm focus:ring-2 focus:ring-amber-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>d&&g(parseInt(d)),className:"px-4 py-2 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-xl font-bold text-sm",children:"Aplicar"})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>m(!1),className:"text-gray-500 hover:text-gray-700 text-sm font-medium",children:"Cancelar"})})]})})]})}function Be({user:a,onMenuClick:r,hasUnread:l=!1,onRead:m}){const[d,b]=i.useState(()=>typeof window<"u"?localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches:!1),c=()=>{d?(document.documentElement.classList.remove("dark"),localStorage.theme="light",b(!1)):(document.documentElement.classList.add("dark"),localStorage.theme="dark",b(!0))};return e.jsxs("header",{className:"flex h-20 items-center justify-between bg-white px-4 md:px-8 dark:bg-[#0f1012] transition-colors border-b border-gray-100 dark:border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("button",{onClick:r,className:"lg:hidden p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400 transition-colors","aria-label":"Abrir menu",children:e.jsx(le,{className:"h-6 w-6"})}),e.jsxs("div",{className:"relative hidden sm:block group",children:[e.jsx(de,{className:"absolute left-4 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400 group-focus-within:text-[#ff3d03] transition-colors"}),e.jsx("input",{type:"text",placeholder:"Pesquisar...",className:"h-11 w-64 rounded-2xl border-none bg-gray-100 pl-11 text-sm font-medium outline-none focus:ring-2 focus:ring-[#ff3d03]/20 dark:bg-[#1a1b1e] dark:text-gray-100 placeholder-gray-500 transition-all"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[e.jsx(ze,{}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:c,className:"rounded-xl p-2.5 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800 transition-colors",children:d?e.jsx($e,{className:"h-5 w-5"}):e.jsx(Pe,{className:"h-5 w-5"})}),e.jsxs("button",{onClick:m,className:"relative rounded-xl p-2.5 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800 transition-colors group",children:[e.jsx(ce,{className:`h-5 w-5 ${l?"text-[#ff3d03] animate-bounce":""}`}),l&&e.jsx("span",{className:"absolute right-2.5 top-2.5 h-2.5 w-2.5 rounded-full bg-[#ff3d03] ring-2 ring-white dark:ring-[#0f1012] animate-pulse shadow-[0_0_8px_rgba(255,61,3,0.6)]"})]})]}),e.jsx("div",{className:"h-8 w-px bg-gray-200 dark:bg-gray-800 mx-1"}),e.jsxs(N,{children:[e.jsx(N.Trigger,{children:e.jsxs("button",{className:"flex items-center gap-3 text-left pl-2 pr-1 py-1 rounded-2xl hover:bg-gray-50 dark:hover:bg-white/5 transition-colors group",children:[e.jsx("div",{className:"h-9 w-9 bg-gradient-to-br from-[#ff3d03] to-[#d63302] text-white rounded-xl flex items-center justify-center font-black text-sm shadow-lg shadow-[#ff3d03]/20 group-hover:scale-105 transition-transform",children:a?.name?.substring(0,2).toUpperCase()||"AD"}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("p",{className:"text-xs font-bold text-gray-800 dark:text-white leading-tight group-hover:text-[#ff3d03] transition-colors",children:a?.name||"Administrador"}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-400 uppercase tracking-wide font-medium",children:[a?.role==="super_admin"?"Super Admin":a?.role==="admin"?"Proprietário":a?.role==="employee"?"Funcionário":"Entregador",e.jsx(K,{className:"h-3 w-3"})]})]})]})}),e.jsx(N.Content,{children:e.jsx(N.Link,{href:route("logout"),method:"post",as:"button",children:"Sair"})})]})]})]})}function Ue(){const{tenant:a}=_().props,{updateSettings:r}=R();return i.useEffect(()=>{a?.notification_settings&&r&&r(a.notification_settings)},[a,r]),null}function Ge(){return e.jsx("div",{className:"w-full bg-zinc-900 border-b border-white/5 px-4 py-2 relative z-[60]",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-1.5 bg-zinc-800 rounded-lg",children:e.jsx(me,{className:"w-4 h-4 text-[#ff3d03]"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-white text-xs font-black uppercase tracking-widest leading-none",children:"Modo de Visualização (Suporte)"}),e.jsx("span",{className:"text-zinc-500 text-[10px] font-bold",children:"Você está acessando como o administrador da loja."})]})]}),e.jsxs("button",{onClick:()=>$.post(route("admin.impersonate.leave")),className:"flex items-center gap-2 px-4 py-1.5 bg-[#ff3d03]/10 hover:bg-[#ff3d03] text-[#ff3d03] hover:text-white rounded-lg text-xs font-black transition-all group",children:[e.jsx(ue,{className:"w-3.5 h-3.5 transition-transform group-hover:-translate-x-1"}),"Voltar ao Super Admin"]})]})})}function ht({user:a,header:r,children:l,tenant:m}){const{auth:d,tenant:b}=_().props,c=m||b,p=d.user,[t,h]=i.useState(!1),[k,C]=i.useState(!1),{success:g,error:j,info:s}=R(),{play:v,initializeAudio:n}=Z(),{flash:o,toast:u}=_().props,x=i.useRef(null);return i.useEffect(()=>{const y=()=>n();return window.addEventListener("click",y,{once:!0}),window.addEventListener("touchstart",y,{once:!0}),()=>{window.removeEventListener("click",y),window.removeEventListener("touchstart",y)}},[n]),i.useEffect(()=>{JSON.stringify(o)!==JSON.stringify(x.current)&&(o?.success&&g("Sucesso",o.success),o?.error&&j("Erro",o.error),u&&(u.type==="success"?g(u.title||"Sucesso",u.message):u.type==="error"?j(u.title||"Erro",u.message):s(u.title||"Info",u.message)),x.current=o)},[o,u,g,j,s]),i.useEffect(()=>{if(!c)return;const y=c.id;let P=0;const I=async()=>{try{const A=await fetch(`/api/poll/${y}`);if(!A.ok)return;const{timestamp:L}=await A.json();if(P===0){P=L;return}if(L<=P)return;const F=await fetch(route("api.orders.status-check"));if(!F.ok)return;const D=await F.json();D.hasNewOrders&&(v("new-order"),g("Novo Pedido!","Chegou um novo pedido!"),h(!0)),D.hasReadyOrders&&(v("ready"),s("Pedido Pronto!","Um pedido está pronto."),h(!0)),D.hasCanceledOrders&&(v("error"),j("Pedido Cancelado","Um pedido foi cancelado."),h(!0)),P=L}catch(A){console.error("Polling error",A)}};I();const W=setInterval(I,15e3);return()=>clearInterval(W)},[c?.id]),e.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-premium-dark transition-colors",children:[e.jsx(Ue,{}),e.jsx(Te,{isOpen:k,onClose:()=>C(!1)}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden lg:pl-72 transition-all duration-300",children:[d.is_impersonating&&e.jsx(Ge,{}),e.jsx(Be,{user:a||p,onMenuClick:()=>C(!0),hasUnread:t,onRead:()=>h(!1)}),r&&e.jsx("header",{className:"bg-white dark:bg-premium-card shadow",children:e.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:r})}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 lg:p-8",children:e.jsx("div",{className:"max-w-[1600px] mx-auto w-full",children:l})})]})]})}export{ht as A,U as B,fe as C,je as D,V as M,Oe as U,Me as a,he as b};
