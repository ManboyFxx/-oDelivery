import{r as i,u as N,j as o,H as te,a as k}from"./app-BdORke9e.js";import{A as oe}from"./AuthenticatedLayout-CTrokMK9.js";import re from"./GeneralSettings-rapWUoFd.js";import ie from"./BusinessHoursSettings-BwqPwrcH.js";import se from"./DeliverySettings-CPjRulkQ.js";import ae from"./PaymentSettings-Bkbzkurb.js";import ne from"./NotificationSettings-CFknJ9K9.js";import le from"./SystemSettings-CNllUruF.js";import{S as de}from"./store-DXXheLUg.js";import{C as me}from"./clock-Bea4bg8j.js";import{T as ce}from"./truck-DBSpJHbd.js";import{C as ue}from"./credit-card-D29PRqwD.js";import{B as pe}from"./bell-73jcub98.js";import{P as fe}from"./palette-DFS9GLll.js";import{C as _e}from"./circle-check-big-f19XPCGK.js";import{K as ge}from"./transition-q_lP3uwy.js";import"./shopping-bag-Bkq9HZGo.js";import"./package-BqNDvWtV.js";import"./menu-B4KCf0Yu.js";import"./use-resolve-button-type-QCoL9pdX.js";import"./keyboard-BwAVKa8y.js";import"./use-sync-refs-DARQMqKe.js";import"./portal-C1qL--0H.js";import"./with-selector-ExNsPTrk.js";import"./trophy-BVLuvj5r.js";import"./chart-column-SKm66eGG.js";import"./ticket-CxV0NpQc.js";import"./shield-check-C74ZI_UA.js";import"./log-out-D5bYoo4C.js";import"./Modal-BRZfGGEO.js";import"./hidden-BNzSnsRH.js";import"./switch-CS5Qda18.js";import"./chevron-down-BYu3fBBM.js";import"./search-2QIM9VoB.js";import"./sparkles-DKy4QTPq.js";import"./arrow-right-6ss0Mvmt.js";import"./phone-BRsGiCH0.js";import"./mail-Dlvek392.js";import"./map-pin-BWgvq1Vv.js";import"./globe-CcRZJXvn.js";import"./instagram-C0K6rASI.js";import"./trash-2-LDi6n0fj.js";import"./upload-DYKdW9dz.js";import"./WeeklySchedule-wOAHDrMy.js";import"./SecondaryButton-C-seBEKT.js";import"./circle-alert-D3rAkSGC.js";import"./plus-CCxwXr4F.js";import"./square-pen-D2x3e1Sz.js";import"./banknote-CSE4Vbrg.js";import"./qr-code-iM6Ab2zH.js";import"./volume-2-CX8PEfXO.js";import"./refresh-cw-B3OSOytk.js";function vt({auth:Z,settings:t,deliveryZones:d,motoboys:he,paymentMethods:C,flash:ve}){const[a,D]=i.useState("general"),[T,f]=i.useState(!1),[B,_]=i.useState(t?.logo_url?`/storage/${t.logo_url}`:null),[E,g]=i.useState(t?.banner_url?`/storage/${t.banner_url}`:null),[h,P]=i.useState(()=>t?.business_hours?typeof t.business_hours=="string"?JSON.parse(t.business_hours):t.business_hours:{monday:{is_open:!0,open_time:"18:00",close_time:"23:00"},tuesday:{is_open:!0,open_time:"18:00",close_time:"23:00"},wednesday:{is_open:!0,open_time:"18:00",close_time:"23:00"},thursday:{is_open:!0,open_time:"18:00",close_time:"23:00"},friday:{is_open:!0,open_time:"18:00",close_time:"23:59"},saturday:{is_open:!0,open_time:"18:00",close_time:"23:59"},sunday:{is_open:!0,open_time:"18:00",close_time:"23:00"}}),[v,A]=i.useState(()=>{const e={browser_notifications:!0,sound_enabled:!0,order_created:!0,order_status_updated:!0,stock_low_warning:!0};return t?.notification_settings?typeof t.notification_settings=="string"?{...e,...JSON.parse(t.notification_settings)}:{...e,...t.notification_settings}:e}),[R,F]=i.useState(d),[H,l]=i.useState(!1),[m,x]=i.useState(null),{data:c,setData:r,post:M,processing:y,errors:b,recentlySuccessful:w}=N({store_name:t?.store_name||"",phone:t?.phone||"",whatsapp:t?.whatsapp||"",email:t?.email||"",address:t?.address||"",description:t?.description||"",instagram:t?.instagram||"",facebook:t?.facebook||"",website:t?.website||"",logo:null,banner:null,remove_logo:!1,remove_banner:!1,business_hours:JSON.stringify(h),notification_settings:JSON.stringify(v),delivery_radius_km:t?.delivery_radius_km||5,fixed_delivery_fee:t?.fixed_delivery_fee||0,min_order_delivery:t?.min_order_delivery||0,free_delivery_min:t?.free_delivery_min||"",estimated_delivery_time:t?.estimated_delivery_time||40,default_motoboy_id:t?.default_motoboy_id||"",theme_color:t?.theme_color||"#ff3d03",paper_width:t?.paper_width||80}),{data:L,setData:S,post:J,put:O,delete:xe,processing:U,errors:$,reset:u,clearErrors:j}=N({neighborhood:"",delivery_fee:"",estimated_time_min:"",is_active:!0});i.useEffect(()=>{if(w){f(!0);const e=setTimeout(()=>f(!1),2e3);return()=>clearTimeout(e)}},[w]);const z=e=>{const s=e.target.files?.[0];if(s){r("logo",s),r("remove_logo",!1);const n=new FileReader;n.onload=p=>_(p.target?.result),n.readAsDataURL(s)}},G=e=>{const s=e.target.files?.[0];if(s){r("banner",s),r("remove_banner",!1);const n=new FileReader;n.onload=p=>g(p.target?.result),n.readAsDataURL(s)}},K=()=>{r("logo",null),r("remove_logo",!0),_(null)},q=()=>{r("banner",null),r("remove_banner",!0),g(null)},I=e=>{e.preventDefault(),M(route("settings.update"),{forceFormData:!0,preserveScroll:!0})},Q=()=>{x(null),u(),j(),l(!0)},V=e=>{x(e),S({neighborhood:e.neighborhood,delivery_fee:e.delivery_fee,estimated_time_min:e.estimated_time_min,is_active:!!e.is_active}),j(),l(!0)},W=e=>{e.preventDefault(),m?O(route("settings.zones.update",m.id),{onSuccess:()=>{l(!1),u()}}):J(route("settings.zones.store"),{onSuccess:()=>{l(!1),u()}})},X=e=>{confirm("Tem certeza que deseja excluir esta zona de entrega?")&&k.delete(route("settings.zones.destroy",e),{preserveScroll:!0})},Y=e=>{k.put(route("settings.zones.update",e.id),{...e,is_active:!e.is_active},{preserveScroll:!0})};i.useEffect(()=>{F(d)},[d]);const ee=[{id:"general",label:"Geral",icon:de},{id:"hours",label:"Horários",icon:me},{id:"delivery",label:"Delivery",icon:ce},{id:"payment",label:"Pagamento",icon:ue},{id:"notifications",label:"Notificações",icon:pe},{id:"system",label:"Sistema",icon:fe}];return o.jsxs(oe,{user:Z.user,header:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Configurações"}),o.jsx(ge,{show:T,enter:"transition ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:o.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 px-4 py-2 rounded-lg",children:[o.jsx(_e,{className:"h-5 w-5"}),o.jsx("span",{className:"font-medium",children:"Configurações salvas!"})]})})]}),children:[o.jsx(te,{title:"Configurações"}),o.jsx("div",{className:"py-12",children:o.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[o.jsx("div",{className:"w-full lg:w-64 flex-shrink-0",children:o.jsx("nav",{className:"flex lg:flex-col gap-2 overflow-x-auto lg:overflow-visible pb-4 lg:pb-0 bg-white dark:bg-premium-card p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-white/5",children:ee.map(e=>{const s=e.icon,n=a===e.id;return o.jsxs("button",{onClick:()=>D(e.id),className:`
                                                flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 whitespace-nowrap
                                                ${n?"bg-[#ff3d03] text-white shadow-lg shadow-[#ff3d03]/30 font-bold":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-white/5 font-medium"}
                                            `,children:[o.jsx(s,{className:`h-5 w-5 ${n?"text-white":"text-gray-400"}`}),e.label]},e.id)})})}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("form",{onSubmit:I,encType:"multipart/form-data",children:[a==="general"&&o.jsx(re,{data:c,setData:r,errors:b,logoPreview:B,bannerPreview:E,handleLogoUpload:z,handleBannerUpload:G,handleLogoRemove:K,handleBannerRemove:q}),a==="hours"&&o.jsx(ie,{businessHours:h,setBusinessHours:P,setData:r}),a==="delivery"&&o.jsx(se,{data:c,setData:r,errors:b,deliveryZones:R,zoneData:L,setZoneData:S,zoneProcessing:U,zoneErrors:$,submitZone:W,handleDeleteZone:X,toggleZoneActive:Y,openCreateZoneModal:Q,openEditZoneModal:V,showZoneModal:H,setShowZoneModal:l,editingZone:m}),a==="payment"&&o.jsx(ae,{paymentMethods:C}),a==="notifications"&&o.jsx(ne,{notificationSettings:v,setNotificationSettings:A,setData:r}),a==="system"&&o.jsx(le,{data:c,setData:r}),a!=="payment"&&o.jsx("div",{className:"mt-8 flex justify-end",children:o.jsx("button",{type:"submit",disabled:y,className:"px-8 py-3 bg-[#ff3d03] text-white rounded-xl font-bold shadow-lg shadow-[#ff3d03]/20 hover:bg-[#e63700] transition-all disabled:opacity-50",children:y?"Salvando...":"Salvar Alterações"})})]})})]})})})]})}export{vt as default};
