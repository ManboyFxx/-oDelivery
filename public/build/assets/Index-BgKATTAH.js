import{r as i,j as e,H as k,d as f}from"./app-BeiTK8O7.js";import{A as D}from"./AuthenticatedLayout-BtNzUuQ3.js";import{L as C}from"./loader-circle-m-BePsOh.js";import{U as I}from"./upload-NYmxIbEI.js";import{S}from"./search-a38Vqx5c.js";import{I as B}from"./image-BG7Ub9h9.js";import{C as F}from"./check-2lv-AJTh.js";import{C as U}from"./copy-lWBA-HTU.js";import{T as L}from"./trash-2--0rQBpLT.js";import"./monitor-BDRP01qu.js";import"./shopping-bag-hl0p71xX.js";import"./package-CEUpl4-U.js";import"./layout-dashboard-CSg-5LrW.js";import"./credit-card-CIOk5m4Q.js";import"./users-CZWQ_-4D.js";import"./trophy-woHj7yoO.js";import"./ticket-DneXDJ_e.js";import"./store-C7665HT-.js";import"./dollar-sign-mA4ymkos.js";import"./key-CQvEDJ22.js";import"./shield-check-B9isBl6q.js";import"./log-out-jkVU1Rox.js";import"./transition-CBp3oMBM.js";import"./use-sync-refs-Bh1C4zpM.js";import"./Modal-2QFZ16oO.js";import"./keyboard-B_lk7WoT.js";import"./portal-Iwu6bisq.js";import"./with-selector-oSkNhEYU.js";import"./hidden-CMxKSJQJ.js";import"./truck-DGriCJtF.js";import"./switch-D1W3lKyY.js";import"./use-resolve-button-type-DRTzruyL.js";import"./menu-CgDjUqwt.js";import"./chevron-down-HJU_jkfX.js";import"./clock-BXCeX13J.js";import"./circle-play-B344MPTV.js";import"./menu-CjUl8ut6.js";import"./sun-Ka4C_pFu.js";import"./bell-BgpWhUXC.js";import"./eye-CbhF-INM.js";import"./arrow-left-BwlAY5OQ.js";import"./usePushNotifications-DUwXs6sv.js";import"./zap-DLpij74m.js";import"./star-CvHf3rTp.js";import"./chevron-right-Byj7wEsR.js";import"./lock-Cduow9Aa.js";function T(r){return r<1024?`${r} B`:r<1024*1024?`${(r/1024).toFixed(1)} KB`:`${(r/(1024*1024)).toFixed(1)} MB`}function Ce({auth:r,media:j}){const[s,p]=i.useState(j),[g,x]=i.useState(!1),[n,b]=i.useState(""),[m,a]=i.useState(!1),[w,u]=i.useState(null),d=async t=>{if(t?.length){x(!0);try{const l=[];for(const o of Array.from(t)){const h=new FormData;h.append("file",o);const N=await f.post("/media",h,{headers:{"Content-Type":"multipart/form-data"}});l.push(N.data)}p(o=>[...l,...o])}finally{x(!1)}}},v=async t=>{confirm("Deletar esta imagem? Produtos que usam ela perderão a imagem.")&&(await f.delete(`/media/${t}`),p(l=>l.filter(o=>o.id!==t)))},y=async t=>{await navigator.clipboard.writeText(t.url),u(t.id),setTimeout(()=>u(null),2e3)},c=s.filter(t=>t.original_name.toLowerCase().includes(n.toLowerCase()));return e.jsxs(D,{user:r.user,children:[e.jsx(k,{title:"Banco de Imagens"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Banco de Imagens"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[s.length," imagem",s.length!==1?"s":""," · Faça upload uma vez e reutilize em qualquer lugar"]})]}),e.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-5 py-2.5 bg-orange-500 hover:bg-orange-600 text-white text-sm font-medium rounded-xl transition-colors shadow-sm",children:[g?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-4 w-4 animate-spin"})," Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"h-4 w-4"})," Upload de Imagem"]}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",multiple:!0,disabled:g,onChange:t=>d(t.target.files)})]})]}),e.jsxs("div",{className:"relative mb-6 max-w-sm",children:[e.jsx(S,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{value:n,onChange:t=>b(t.target.value),placeholder:"Buscar por nome...",className:"w-full pl-9 pr-4 py-2.5 text-sm bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 text-gray-900 dark:text-white"})]}),(s.length===0||m)&&e.jsxs("div",{onDragOver:t=>{t.preventDefault(),a(!0)},onDragLeave:()=>a(!1),onDrop:t=>{t.preventDefault(),a(!1),d(t.dataTransfer.files)},className:`border-2 border-dashed rounded-2xl p-16 text-center mb-8 transition-colors ${m?"border-orange-400 bg-orange-50 dark:bg-orange-900/10":"border-gray-200 dark:border-white/10"}`,children:[e.jsx(B,{className:"h-16 w-16 mx-auto mb-4 text-gray-200 dark:text-gray-700"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:m?"Solte para fazer upload":'Arraste imagens aqui ou clique em "Upload de Imagem"'}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"PNG, JPG, GIF, WebP até 10MB"})]}),c.length>0&&e.jsx("div",{onDragOver:t=>{t.preventDefault(),a(!0)},onDragLeave:()=>a(!1),onDrop:t=>{t.preventDefault(),a(!1),d(t.dataTransfer.files)},className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:c.map(t=>e.jsxs("div",{className:"group relative bg-gray-100 dark:bg-white/5 rounded-xl overflow-hidden aspect-square border border-gray-200 dark:border-white/10 hover:border-orange-400 dark:hover:border-orange-500 transition-all",children:[e.jsx("img",{src:t.url,alt:t.original_name,className:"w-full h-full object-cover",loading:"lazy"}),e.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-between p-2",children:[e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx("button",{onClick:()=>y(t),title:"Copiar URL",className:"p-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-white transition-colors",children:w===t.id?e.jsx(F,{className:"h-3.5 w-3.5"}):e.jsx(U,{className:"h-3.5 w-3.5"})}),e.jsx("button",{onClick:()=>v(t.id),title:"Deletar",className:"p-1.5 bg-red-500/80 hover:bg-red-500 rounded-lg text-white transition-colors",children:e.jsx(L,{className:"h-3.5 w-3.5"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-xs font-medium truncate leading-tight",children:t.original_name}),e.jsx("p",{className:"text-white/60 text-xs",children:T(t.size)})]})]})]},t.id))}),c.length===0&&s.length>0&&e.jsxs("p",{className:"text-center text-gray-400 py-16 text-sm",children:['Nenhuma imagem encontrada para "',n,'"']})]})]})}export{Ce as default};
