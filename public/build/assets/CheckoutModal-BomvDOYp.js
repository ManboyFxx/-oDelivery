import{r as a,j as e,f as qe,d as I,X as B,e as x}from"./app-BeiTK8O7.js";import{M as ze}from"./Modal-2QFZ16oO.js";import{S as Le}from"./sparkles-BF5bjgPf.js";import{G as ee}from"./gift-64ppZ22e.js";import{u as Be}from"./usePushNotifications-DUwXs6sv.js";import Oe from"./AddressForm-BQqwQcyj.js";import{t as O}from"./index-D3vGHX22.js";import{A as Ze}from"./arrow-left-BwlAY5OQ.js";import{C as je}from"./circle-check-big-BNyxzmGn.js";import{M as Z}from"./map-pin-6dfgS09F.js";import{W as Q}from"./wallet-C-Y0B96j.js";import{L as T}from"./loader-circle-m-BePsOh.js";import{T as Ye}from"./ticket-DneXDJ_e.js";import{C as we}from"./credit-card-CIOk5m4Q.js";import{B as Ue}from"./banknote-BnMOvwHO.js";import{C as We}from"./chevron-right-Byj7wEsR.js";import{t as Ge}from"./switch-D1W3lKyY.js";import"./keyboard-B_lk7WoT.js";import"./use-sync-refs-Bh1C4zpM.js";import"./portal-Iwu6bisq.js";import"./with-selector-oSkNhEYU.js";import"./hidden-CMxKSJQJ.js";import"./transition-CBp3oMBM.js";import"./TextInput-B4Hzd_yL.js";import"./InputLabel-DgrbSU8z.js";import"./PrimaryButton-Ce1OIklR.js";import"./SecondaryButton-C6DwDxfj.js";import"./search-a38Vqx5c.js";import"./use-resolve-button-type-DRTzruyL.js";function Xe({points:h,show:y,onComplete:N}){return a.useEffect(()=>{if(y){const o=setTimeout(N,3500);return()=>clearTimeout(o)}},[y,N]),y?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/30 animate-fade-in pointer-events-auto"}),e.jsx("style",{children:`
                @keyframes celebrationBounce {
                    0% {
                        transform: scale(0.5) translateY(20px);
                        opacity: 0;
                    }
                    50% {
                        transform: scale(1.05) rotate(5deg);
                    }
                    100% {
                        transform: scale(1) translateY(0);
                        opacity: 1;
                    }
                }

                @keyframes spin-slowly {
                    0%, 100% { transform: rotate(0deg); }
                    50% { transform: rotate(10deg) scaleY(1.1); }
                }

                @keyframes pulse-glow {
                    0%, 100% { box-shadow: 0 0 20px rgba(255, 61, 3, 0.5); }
                    50% { box-shadow: 0 0 40px rgba(255, 61, 3, 0.8); }
                }

                @keyframes float-up {
                    0% {
                        opacity: 1;
                        transform: translateY(0);
                    }
                    100% {
                        opacity: 0;
                        transform: translateY(-100px);
                    }
                }

                .celebration-card {
                    animation: celebrationBounce 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
                }

                .celebration-icon {
                    animation: spin-slowly 2s ease-in-out infinite;
                }

                .celebration-glow {
                    animation: pulse-glow 1.5s ease-in-out infinite;
                }

                .floating-points {
                    animation: float-up 2s ease-out forwards;
                }
            `}),e.jsx("div",{className:"celebration-card relative z-10",children:e.jsxs("div",{className:"bg-gradient-to-br from-orange-400 via-orange-500 to-pink-500 rounded-3xl p-8 shadow-2xl celebration-glow text-center max-w-sm w-full",children:[e.jsx("div",{className:"absolute inset-0 rounded-3xl overflow-hidden",children:[...Array(6)].map((o,c)=>e.jsx(Le,{className:"absolute h-6 w-6 text-white/40",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animation:`float-up ${2+Math.random()*1}s ease-out forwards`,animationDelay:`${c*.2}s`}},c))}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"celebration-icon mb-4",children:e.jsx(ee,{className:"h-16 w-16 mx-auto text-white drop-shadow-lg"})}),e.jsx("h2",{className:"text-3xl md:text-4xl font-black text-white mb-2 drop-shadow-lg",children:"Parab√©ns!"}),e.jsxs("div",{className:"text-white",children:[e.jsxs("p",{className:"text-5xl font-black mb-2 drop-shadow-lg",children:["+",h]}),e.jsx("p",{className:"text-lg font-bold drop-shadow-lg",children:"pontos!"})]}),e.jsx("p",{className:"text-white/90 text-sm mt-3 drop-shadow-lg",children:"Voc√™ est√° acumulando pr√™mios üéâ"})]})]})}),[...Array(8)].map((o,c)=>e.jsx("div",{className:"absolute floating-points pointer-events-none",style:{left:`calc(50% + ${(c-4)*30}px)`,top:"50%",animationDelay:`${c*.1}s`},children:e.jsxs("span",{className:"text-2xl font-black text-orange-500",children:["+",Math.floor(h/4)]})},c))]}):null}function St({show:h,onClose:y,cart:N,store:o,customer:c,total:ve,addresses:Y,onSuccess:He,activeTable:n}){const[i,S]=a.useState(n?"review":"delivery"),[s,U]=a.useState(n?"table":"delivery"),[g,W]=a.useState(Y),[d,$]=a.useState(""),[P,A]=a.useState(!1),[j,ke]=a.useState("credit_card"),[R,Ne]=a.useState(""),[w,v]=a.useState(!1),[te,p]=a.useState(""),[Ce,re]=a.useState(!1),[_e,Se]=a.useState(0),[V,ae]=a.useState(""),[f,se]=a.useState(null),[oe,q]=a.useState(""),[Pe,ne]=a.useState(!1),[C,Ae]=a.useState(!1),[Ee,ie]=a.useState(0),[de,le]=a.useState(0),[ce,G]=a.useState(!1),[X,Me]=a.useState(""),[b,_]=a.useState(null),[xe,Je]=a.useState(!1),[me,E]=a.useState(null),[ge,M]=a.useState(""),[k,Fe]=a.useState([]),[F,H]=a.useState(""),{success:z}=qe(),{requestPermission:ue}=Be(c);a.useEffect(()=>{W(Y)},[Y]),a.useEffect(()=>{if(h&&g.length>0&&!d){const t=g.find(r=>r.is_default);$(t?t.id:g[0].id)}h&&s==="delivery"&&g.length===0&&!P&&!n&&A(!0),h&&n&&(S("review"),U("table"))},[h,g,s,P,n]),a.useEffect(()=>{const t=o?.settings?.tenant_id;t&&I.get(`/api/delivery-zones?tenant_id=${t}`).then(r=>Fe(r.data)).catch(()=>{})},[o?.settings?.tenant_id]),a.useEffect(()=>{if(s!=="delivery"||!d){_(!0),E(null),M("");return}const t=g.find(l=>l.id===d);if(!t)return;if(H(""),k.length===0){_(!0),E(null),M("");return}const r=t.neighborhood,m=k.find(l=>l.neighborhood.toLowerCase()===r.toLowerCase());m?(_(!0),E(Number(m.delivery_fee)),M("")):(_(!1),E(null),M("N√£o entregamos neste bairro. Selecione um bairro atendido abaixo."))},[d,s,g,k]),s!=="delivery"||F||g.find(r=>r.id===d)?.neighborhood;const he=s==="delivery"&&b!==!1?me!==null?me:o.settings?.delivery_fee||5:0,J=(f&&f.discount_amount||0)+de,D=ve,K=Math.max(0,D+he-J),pe=a.useMemo(()=>!o?.loyalty_enabled||!o?.settings?.points_per_currency?0:Math.ceil(D*o.settings.points_per_currency),[D,o]),u=t=>`R$ ${t.toFixed(2).replace(".",",")}`,De=async()=>{if(i==="delivery"){if(s==="delivery"&&!d){p("Selecione um endere√ßo para entrega.");return}if(s==="delivery"&&F){const t=g.find(r=>r.id===d);if(t)try{v(!0);const r=await I.put(`/customer/addresses/${d}`,{...t,neighborhood:F});W(m=>m.map(l=>l.id===d?r.data.address:l)),H(""),_(!0)}catch(r){console.error("Error updating address neighborhood:",r),O.error("Erro ao atualizar bairro do endere√ßo. Tente novamente."),v(!1);return}finally{v(!1)}}if(s==="delivery"&&b===!1){p("Selecione um bairro atendido para continuar.");return}p(""),S("payment")}else if(i==="payment"){if(j==="cash"&&R&&parseFloat(R.replace(",","."))<K){p("O valor do troco deve ser maior que o total.");return}p(""),S("review")}},fe=()=>{i==="review"?S("payment"):i==="payment"&&S("delivery")},be=async()=>{if(!o.is_open){p("A loja est√° fechada no momento. N√£o √© poss√≠vel concluir o pedido.");return}v(!0),p("");try{const t={tenant_id:o.settings.tenant_id,customer_id:c.id,mode:n?"table":s,table_id:n?n.id:null,address_id:s==="delivery"&&!n?d:null,payment_method:n?null:j,change_for:j==="cash"&&!n?parseFloat(R.replace(",",".")):null,coupon_id:f?.id||null,loyalty_points_used:C?Ee:0,items:N.map(L=>({product_id:L.product.id,quantity:L.quantity,notes:L.notes,complements:L.selectedComplements.map(ye=>({id:ye.optionId||ye.id,quantity:1}))}))},r=await I.post("/customer/checkout",t),l=`/${window.location.pathname.split("/")[1]}/orders/${r.data.order_id}`;r.data.loyalty_points_earned>0?(Se(r.data.loyalty_points_earned),re(!0),setTimeout(()=>{z("Pedido Realizado!","Redirecionando para acompanhamento..."),ue(),window.location.href=l},3500)):(z("Pedido Realizado!","Redirecionando para acompanhamento..."),setTimeout(()=>{ue(),window.location.href=l},1500))}catch(t){console.error(t),t.response?.status===403&&t.response?.data?.requires_identity_verification?(G(!0),O.warning("Confirme sua identidade para continuar.")):p(t.response?.data?.message||"Erro ao processar pedido.")}finally{v(!1)}},Ie=async t=>{t.preventDefault(),v(!0);try{let r=localStorage.getItem("device_fingerprint");r||(r="device-"+Math.random().toString(36).substring(2)+Date.now().toString(36),localStorage.setItem("device_fingerprint",r)),(await I.post("/customer/quick-login",{phone_last_4:X,customer_id:c.id,device_fingerprint:r})).data.success&&(O.success("Identidade confirmada!"),G(!1),be())}catch(r){console.error(r),O.error(r.response?.data?.message||"D√≠gitos incorretos.")}finally{v(!1)}},$e=async()=>{if(V.trim()){ne(!0),q("");try{const t=await I.post("/api/validate-coupon",{code:V,cart_total:D,tenant_id:o.tenant_id||window.location.pathname.split("/")[1]});t.data.valid?(se({...t.data.coupon,discount_amount:t.data.discount}),z("Cupom Aplicado!",t.data.message),ae("")):q(t.data.message||"Cupom inv√°lido")}catch(t){q(t.response?.data?.message||"Erro ao validar cupom")}finally{ne(!1)}}},Re=t=>{W(r=>[...r,t]),$(t.id),A(!1)},Ve=()=>e.jsxs("div",{className:"flex justify-between items-center mb-6 px-2",children:[[{id:"delivery",label:"Entrega",icon:Z},{id:"payment",label:"Pagamento",icon:Q},{id:"review",label:"Confirma√ß√£o",icon:je}].map((t,r)=>{const m=t.id===i,l=i==="payment"&&r===0||i==="review"&&r<=1;return e.jsxs("div",{className:"flex flex-col items-center relative z-10",children:[e.jsx("div",{className:x("w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 border-2",m?"bg-primary border-primary text-white shadow-lg scale-110":l?"bg-green-500 border-green-500 text-white":"bg-white dark:bg-premium-card border-gray-300 dark:border-gray-700 text-gray-400 dark:text-gray-500"),children:e.jsx(t.icon,{className:"w-5 h-5"})}),e.jsx("span",{className:x("text-xs font-semibold mt-2 transition-colors duration-300",m?"text-primary":l?"text-green-600 dark:text-green-400":"text-gray-400 dark:text-gray-500"),children:t.label})]},t.id)}),!n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-[4.5rem] left-10 right-10 h-0.5 bg-gray-200 dark:bg-gray-700 -z-0 transition-colors duration-300"}),e.jsx("div",{className:x("absolute top-[4.5rem] left-10 h-0.5 bg-green-500 transition-all duration-300 -z-0",i==="delivery"?"w-0":i==="payment"?"w-1/2":"w-[calc(100%-5rem)]")})]})]});return e.jsxs(ze,{show:h,onClose:y,maxWidth:"md",children:[e.jsx(Xe,{points:_e,show:Ce,onComplete:()=>re(!1)}),e.jsxs("div",{className:"p-6 min-h-[500px] flex flex-col bg-white dark:bg-premium-dark transition-colors duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i!=="delivery"&&!n?e.jsx("button",{onClick:fe,className:"p-1 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full transition-colors duration-300",children:e.jsx(Ze,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})}):e.jsx("div",{}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white transition-colors duration-300",children:ce?"Confirma√ß√£o de Seguran√ßa":e.jsxs(e.Fragment,{children:[i==="delivery"&&"Entrega ou Retirada",i==="payment"&&"Pagamento",i==="review"&&"Resumo do Pedido"]})}),e.jsx("button",{onClick:y,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-300",children:e.jsx(B,{className:"h-6 w-6"})})]}),ce?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 dark:bg-orange-900/20 rounded-full flex items-center justify-center mb-4 transition-colors duration-300",children:e.jsx(je,{className:"w-8 h-8 text-[#ff3d03]"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 text-center transition-colors duration-300",children:"Protegendo sua conta"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-center text-sm mb-6 transition-colors duration-300",children:["Para continuar, confirme os ",e.jsx("strong",{children:"4 √∫ltimos d√≠gitos"})," do seu telefone."]}),e.jsxs("form",{onSubmit:Ie,className:"w-full max-w-xs space-y-4",children:[e.jsx("input",{type:"text",value:X,onChange:t=>Me(t.target.value.replace(/\D/g,"").slice(0,4)),placeholder:"0000",className:"w-full text-center text-2xl font-bold tracking-widest py-3 border-2 border-gray-200 dark:border-gray-700 dark:bg-white/5 dark:text-white rounded-xl focus:border-primary dark:focus:border-primary focus:ring-0 outline-none transition-all duration-300",autoFocus:!0}),e.jsx("button",{type:"submit",disabled:w||X.length<4,className:"w-full bg-primary hover:bg-primary-600 text-white font-bold py-3 rounded-xl transition-colors disabled:opacity-50",children:w?"Verificando...":"Confirmar"}),e.jsx("button",{type:"button",onClick:()=>G(!1),className:"w-full text-gray-400 dark:text-gray-500 font-medium text-sm hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-300",children:"Cancelar"})]})]}):e.jsxs(e.Fragment,{children:[!P&&!n&&Ve(),e.jsxs("div",{className:"flex-1 overflow-y-auto max-h-[60vh] px-1 py-1",children:[te&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-3 rounded-lg mb-4 text-sm font-medium flex items-center gap-2 transition-colors duration-300",children:[e.jsx(B,{className:"w-4 h-4"})," ",te]}),P?e.jsx(Oe,{onCancel:()=>A(!1),onSuccess:Re,tenantId:o.settings.tenant_id,customerId:c.id,preloadedZones:k,store:o}):e.jsxs(e.Fragment,{children:[i==="delivery"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>U("delivery"),className:x("p-4 rounded-xl border-2 font-bold transition-all flex flex-col items-center gap-2 duration-300",s==="delivery"?"border-[#ff3d03] bg-[#ff3d03]/5 text-[#ff3d03] shadow-md shadow-orange-500/10":"border-gray-200 dark:border-gray-700 dark:bg-white/5 text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600 bg-white"),children:[e.jsx(Z,{className:"w-6 h-6"}),"Entrega"]}),e.jsxs("button",{onClick:()=>U("pickup"),className:x("p-4 rounded-xl border-2 font-bold transition-all flex flex-col items-center gap-2 duration-300",s==="pickup"?"border-[#ff3d03] bg-[#ff3d03]/5 text-[#ff3d03] shadow-md shadow-orange-500/10":"border-gray-200 dark:border-gray-700 dark:bg-white/5 text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600 hover:bg-gray-50 bg-white"),children:[e.jsx("div",{className:"w-6 h-6 relative",children:e.jsx(Q,{className:"absolute w-full h-full"})}),"Retirada"]})]}),s==="delivery"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-premium-dark transition-colors duration-300",children:[e.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-200 transition-colors duration-300",children:"Selecione o Endere√ßo"}),e.jsx("button",{onClick:()=>A(!0),className:"px-3 py-1.5 rounded-lg bg-[#ff3d03]/10 text-[#ff3d03] text-sm font-bold hover:bg-[#ff3d03]/20 transition-colors",children:"+ Novo Endere√ßo"})]}),xe&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 py-1 transition-colors duration-300",children:[e.jsx(T,{className:"w-3 h-3 animate-spin text-primary"})," Validando entrega..."]}),!xe&&b===!1&&ge&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl text-xs font-bold transition-colors duration-300",children:[e.jsx(B,{className:"w-4 h-4"})," ",ge]}),k.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wider",children:"Selecione um bairro atendido:"}),e.jsxs("select",{value:F,onClick:t=>t.stopPropagation(),onChange:t=>{const r=t.target.value;H(r);const m=k.find(l=>l.neighborhood===r);m&&(_(!0),E(Number(m.delivery_fee)),M(""))},className:"w-full text-sm p-3 rounded-xl border-2 border-orange-200 dark:border-orange-800/50 dark:bg-white/5 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all",children:[e.jsx("option",{value:"",children:"Selecione o bairro..."}),k.map(t=>e.jsxs("option",{value:t.neighborhood,children:[t.neighborhood," ‚Äî R$ ",Number(t.delivery_fee).toFixed(2).replace(".",",")]},t.id||t.neighborhood))]}),e.jsx("div",{className:"mt-1 text-[10px] text-gray-500 text-right",children:"* Sele√ß√£o obrigat√≥ria para c√°lculo do frete"})]})]}),g.length===0?e.jsxs("div",{className:"text-center py-6 bg-gray-50 dark:bg-white/5 rounded-xl border-2 border-dashed border-gray-200 dark:border-gray-700 transition-colors duration-300",children:[e.jsx(Z,{className:"w-8 h-8 text-gray-300 dark:text-gray-600 mx-auto mb-2 transition-colors duration-300"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2 transition-colors duration-300",children:"Nenhum endere√ßo cadastrado"}),e.jsx("button",{onClick:()=>A(!0),className:"px-4 py-2 bg-white dark:bg-white/10 border border-gray-300 dark:border-white/10 rounded-lg text-sm font-medium hover:bg-gray-50 dark:hover:bg-white/20 text-gray-900 dark:text-white transition-colors duration-300",children:"Cadastrar Agora"})]}):g.map(t=>{const r=d===t.id;return e.jsxs("div",{onClick:()=>$(t.id),className:x("p-4 rounded-xl border-2 cursor-pointer transition-all flex items-start justify-between group duration-300",r?b===!1?"border-red-400 bg-red-50 dark:bg-red-900/10 ring-1 ring-red-400":"border-[#ff3d03] bg-[#ff3d03]/5 dark:bg-[#ff3d03]/10 ring-1 ring-[#ff3d03]":"border-gray-200 dark:border-gray-700 bg-white dark:bg-white/5 hover:border-orange-200 hover:bg-orange-50/30"),children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:x("mt-1 w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition-all duration-300",r?b===!1?"border-red-500 bg-red-500 text-white shadow-sm shadow-red-500/20":"border-[#ff3d03] bg-[#ff3d03] text-white shadow-sm shadow-orange-500/20":"border-gray-300 dark:border-gray-600 bg-white dark:bg-white/5"),children:r&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-gray-900 dark:text-white transition-colors duration-300",children:[t.street,", ",t.number]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 transition-colors duration-300",children:[t.neighborhood," - ",t.city]}),t.complement&&e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-0.5 transition-colors duration-300",children:t.complement})]})]}),r&&b&&e.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-[10px] font-black px-2 py-0.5 rounded-full animate-in zoom-in-95 duration-300 uppercase tracking-tighter",children:"√Årea Coberta"})]},t.id)})]})]}),i==="payment"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 p-4 rounded-xl border border-gray-100 dark:border-white/5 transition-colors duration-300",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2 text-sm transition-colors duration-300",children:[e.jsx(Ye,{className:"h-4 w-4 text-primary"}),"Cupom de Desconto"]}),f?e.jsxs("div",{className:"bg-white dark:bg-white/5 border border-green-200 dark:border-green-800/50 rounded-lg p-3 flex justify-between items-center shadow-sm transition-colors duration-300",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-green-700 dark:text-green-400 text-sm transition-colors duration-300",children:["‚úì ",f.code]}),e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-500/80 transition-colors duration-300",children:["Desconto de ",f.discount_type==="fixed"?u(f.discount_value):`${f.discount_value}%`]})]}),e.jsx("button",{onClick:()=>se(null),className:"text-gray-400 dark:text-gray-500 hover:text-red-500 dark:hover:text-red-400 transition-colors duration-300",children:e.jsx(B,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:V,onChange:t=>{ae(t.target.value),q("")},placeholder:"C√≥digo do cupom",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-white/5 dark:text-white rounded-lg text-sm focus:ring-primary focus:border-primary transition-colors duration-300"}),e.jsx("button",{onClick:$e,disabled:Pe||!V,className:"bg-gray-900 text-white px-3 py-2 rounded-lg text-sm font-medium hover:bg-gray-800 disabled:opacity-50",children:"Aplicar"})]}),oe&&e.jsx("p",{className:"text-xs text-red-500 mt-2",children:oe})]}),o?.loyalty_enabled&&c?.loyalty_points>0&&e.jsxs("div",{className:x("p-4 rounded-xl border transition-all duration-300",C?"bg-orange-50 dark:bg-[#ff3d03]/10 border-orange-200 dark:border-[#ff3d03]/30":"bg-gray-50 dark:bg-white/5 border-gray-100 dark:border-white/5"),children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2 text-sm transition-colors duration-300",children:[e.jsx(ee,{className:"h-4 w-4 text-orange-500"}),"Abater com Pontos"]}),e.jsx(Ge,{checked:C,onChange:t=>{if(Ae(t),t){const r=c.loyalty_points*(o.settings?.currency_per_point||.1);ie(c.loyalty_points),le(r),z("Pontos Aplicados!",`Desconto de ${u(r)} adicionado.`)}else ie(0),le(0)},className:x("relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none",C?"bg-primary":"bg-gray-200"),children:e.jsx("span",{className:x("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",C?"translate-x-6":"translate-x-1")})})]}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 transition-colors duration-300",children:["Saldo: ",e.jsxs("span",{className:"font-bold",children:[c.loyalty_points," pontos"]})]}),e.jsxs("p",{className:"text-[10px] text-gray-400 dark:text-gray-500 transition-colors duration-300",children:["1 ponto = ",u(o.settings?.currency_per_point||.1)]})]}),C&&e.jsxs("p",{className:"text-sm font-bold text-orange-600",children:["-",u(de)]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-3 transition-colors duration-300",children:"Forma de Pagamento"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{id:"credit_card",label:"Cr√©dito",sub:"Maquininha",icon:we},{id:"debit_card",label:"D√©bito",sub:"Maquininha",icon:we},{id:"pix",label:"PIX",sub:"Na entrega",icon:Q},{id:"cash",label:"Dinheiro",sub:"Esp√©cie",icon:Ue}].map(t=>e.jsxs("div",{onClick:()=>ke(t.id),className:x("p-3 rounded-xl border-2 cursor-pointer transition-all flex flex-col items-center text-center gap-2 hover:shadow-md duration-300",j===t.id?"border-primary bg-orange-50 dark:bg-primary/10 shadow-sm":"border-gray-100 dark:border-gray-700 bg-white dark:bg-white/5 hover:border-gray-200 dark:hover:border-gray-600"),children:[e.jsx(t.icon,{className:x("w-6 h-6 transition-colors duration-300",j===t.id?"text-primary":"text-gray-400 dark:text-gray-500")}),e.jsxs("div",{children:[e.jsx("p",{className:x("font-bold text-sm transition-colors duration-300",j===t.id?"text-primary":"text-gray-700 dark:text-gray-200"),children:t.label}),e.jsx("p",{className:"text-[10px] text-gray-400 dark:text-gray-500 transition-colors duration-300",children:t.sub})]})]},t.id))})]}),j==="cash"&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 duration-200",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 transition-colors duration-300",children:"Troco para quanto?"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500 dark:text-gray-400 transition-colors duration-300",children:"R$"}),e.jsx("input",{type:"text",value:R,onChange:t=>Ne(t.target.value),placeholder:"0,00",className:"w-full pl-9 px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-white/5 dark:text-white rounded-lg focus:ring-[#ff3d03] focus:border-[#ff3d03] transition-colors duration-300"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 transition-colors duration-300",children:["Total do pedido: ",u(K)]})]})]}),i==="review"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-premium-card border border-gray-200 dark:border-white/5 rounded-xl shadow-sm overflow-hidden transition-colors duration-300",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 px-4 py-3 border-b border-gray-100 dark:border-white/5 flex justify-between items-center transition-colors duration-300",children:[e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white transition-colors duration-300",children:"Resumo do Pedido"}),e.jsxs("span",{className:"text-xs font-medium bg-gray-200 dark:bg-white/10 px-2 py-1 rounded-full text-gray-600 dark:text-gray-300 transition-colors duration-300",children:[N.length," itens"]})]}),e.jsx("div",{className:"p-4 space-y-3 max-h-40 overflow-y-auto",children:N.map((t,r)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white transition-colors duration-300",children:[t.quantity,"x"]}),e.jsx("span",{className:"font-bold text-gray-700 dark:text-gray-200 transition-colors duration-300 line-clamp-1",children:t.product.name})]}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium transition-colors duration-300",children:u(t.subtotal)})]}),t.selectedComplements.length>0&&e.jsx("div",{className:"pl-7 space-y-0.5",children:t.selectedComplements.map((m,l)=>e.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 leading-tight",children:["+ ",m.name]},l))}),t.notes&&e.jsx("div",{className:"pl-7",children:e.jsxs("p",{className:"text-[10px] italic text-gray-400 dark:text-gray-500 line-clamp-2",children:["Obs: ",t.notes]})})]},r))})]}),e.jsxs("div",{className:x("flex items-start gap-3 p-3 rounded-xl text-sm transition-colors duration-300",n?"bg-orange-50 dark:bg-orange-900/20 text-orange-800 dark:text-orange-300":"bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300"),children:[e.jsx(Z,{className:"w-5 h-5 shrink-0 mt-0.5"}),e.jsx("div",{children:n?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold",children:"Consumo na Mesa"}),e.jsxs("p",{className:"opacity-90",children:["Mesa ",n.number]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold",children:s==="delivery"?"Entrega em:":"Retirada em Loja"}),s==="delivery"&&d?e.jsxs("p",{className:"opacity-90",children:[g.find(t=>t.id===d)?.street,", ",g.find(t=>t.id===d)?.number]}):e.jsx("p",{className:"opacity-90",children:"Retirar no balc√£o."})]})})]}),pe>0&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/10 dark:to-orange-900/10 rounded-xl border border-yellow-100 dark:border-yellow-900/20 transition-colors duration-300",children:[e.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900/20 p-1.5 rounded-full text-yellow-600 dark:text-yellow-400 transition-colors duration-300",children:e.jsx(ee,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-bold text-yellow-800 dark:text-yellow-400 transition-colors duration-300",children:["Voc√™ ganhar√° ",pe," pontos!"]}),e.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-500/80 transition-colors duration-300",children:"Neste pedido"})]})]}),e.jsxs("div",{className:"space-y-2 pt-2 border-t border-gray-100 dark:border-white/5 transition-colors duration-300",children:[e.jsxs("div",{className:"flex justify-between text-gray-500 dark:text-gray-400 text-sm transition-colors duration-300",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:u(D)})]}),s==="delivery"&&e.jsxs("div",{className:"flex justify-between text-gray-500 dark:text-gray-400 text-sm transition-colors duration-300",children:[e.jsx("span",{children:"Taxa de Entrega"}),e.jsx("span",{children:u(he)})]}),J>0&&e.jsxs("div",{className:"flex justify-between text-green-600 dark:text-green-400 text-sm font-medium transition-colors duration-300",children:[e.jsx("span",{children:"Desconto"}),e.jsxs("span",{children:["- ",u(J)]})]}),e.jsxs("div",{className:"flex justify-between items-end pt-2 mt-2 border-t border-gray-100 dark:border-white/5 transition-colors duration-300",children:[e.jsx("span",{className:"text-gray-900 dark:text-white font-bold transition-colors duration-300",children:"Total Final"}),e.jsx("span",{className:"text-2xl font-black text-primary",children:u(K)})]})]})]})]})]}),!P&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-100 dark:border-white/5 flex gap-3 transition-colors duration-300",children:[i!=="delivery"&&!n?e.jsx("button",{onClick:fe,className:"flex-1 px-4 py-3 bg-gray-100 dark:bg-white/10 text-gray-700 dark:text-gray-300 font-bold rounded-xl hover:bg-gray-200 dark:hover:bg-white/20 transition-colors duration-300",children:"Voltar"}):e.jsx("button",{onClick:y,className:"flex-1 px-4 py-3 bg-gray-100 dark:bg-white/10 text-gray-700 dark:text-gray-300 font-bold rounded-xl hover:bg-gray-200 dark:hover:bg-white/20 transition-colors duration-300",children:"Cancelar"}),i==="review"?e.jsx("button",{onClick:be,disabled:w,className:"flex-[2] bg-[#ff3d03] hover:bg-[#e63700] text-white font-bold py-3 px-4 rounded-xl transition-colors flex items-center justify-center gap-2 shadow-lg shadow-orange-200 disabled:opacity-70",children:w?e.jsx(T,{className:"animate-spin"}):"Confirmar Pedido"}):e.jsx("button",{onClick:De,disabled:w||s==="delivery"&&!d||s==="delivery"&&b===!1,className:x("flex-[2] px-4 py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 shadow-lg shadow-orange-200",w||s==="delivery"&&!d||s==="delivery"&&b===!1?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed shadow-none text-gray-500":"bg-[#ff3d03] hover:bg-[#e63700] hover:shadow-orange-500/40 text-white"),children:w?e.jsx(T,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:["Continuar ",e.jsx(We,{className:"w-5 h-5"})]})})]})]})]})]})}export{St as default};
