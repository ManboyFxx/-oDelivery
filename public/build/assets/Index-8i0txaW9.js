import{j as e,L as c,d as o,t as x,H as v,m as N,G as w,a3 as k,a4 as S,n as _,v as T,_ as E}from"./vendor-react-BRbeZxQj.js";import{A as L}from"./AuthenticatedLayout-DmT546vf.js";import"./vendor-others-CI9KCNiO.js";import"./vendor-utils-Dp_nMyUE.js";import"./Modal-j3wD4Y2Q.js";import"./app-w_IWnRYJ.js";import"./vendor-animation-BvO_7aKj.js";function C({links:r}){return!r||r.length<=3?null:e.jsx("div",{className:"flex items-center justify-center gap-1",children:r.map((a,l)=>a.url?a.active?e.jsx("span",{className:"px-4 py-2 text-sm font-bold bg-[#ff3d03] text-white rounded-lg",dangerouslySetInnerHTML:{__html:a.label}},l):e.jsx(c,{href:a.url,className:"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg transition-colors",dangerouslySetInnerHTML:{__html:a.label},preserveScroll:!0},l):e.jsx("span",{className:"px-3 py-2 text-sm text-gray-400 cursor-not-allowed",dangerouslySetInnerHTML:{__html:a.label}},l))})}function U({tenants:r,filters:a,plans:l}){const[d,g]=o.useState(a.search||""),[i,h]=o.useState(a.status||"all"),[n,m]=o.useState(a.plan||"all"),[P,u]=o.useState(null);o.useEffect(()=>{const s=setTimeout(()=>{d!==(a.search||"")&&x.get(route("admin.tenants.index"),{search:d,status:i!=="all"?i:void 0,plan:n!=="all"?n:void 0},{preserveState:!0,preserveScroll:!0,replace:!0})},300);return()=>clearTimeout(s)},[d]);const p=(s,t)=>{s==="status"&&h(t),s==="plan"&&m(t),x.get(route("admin.tenants.index"),{search:d,status:s==="status"&&t!=="all"?t:i!=="all"?i:void 0,plan:s==="plan"&&t!=="all"?t:n!=="all"?n:void 0},{preserveState:!0,preserveScroll:!0})},f=(s,t)=>{confirm(`Estender trial por ${t} dias?`)&&x.post(route("admin.tenants.extend-trial",s),{days:t},{onSuccess:()=>u(null)})},b=s=>{const t={free:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",pro:"bg-gradient-to-r from-[#ff3d03] to-[#e63700] text-white",custom:"bg-gradient-to-r from-purple-500 to-purple-700 text-white"};return t[s]||t.free},j=s=>{if(!s.is_trial_active)return null;const t=s.trial_days_remaining,y=t<=3;return e.jsxs("span",{className:`px-2.5 py-1 rounded-lg text-xs font-bold flex items-center gap-1 ${y?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400":"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400"}`,children:[e.jsx(E,{className:"h-3 w-3"}),"Trial: ",t,"d restantes"]})};return e.jsxs(L,{children:[e.jsx(v,{title:"Gerenciar Lojas"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-gray-900 dark:text-white tracking-tight",children:"Gerenciar Lojas"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:[r.meta?.total||0," lojas cadastradas"]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(c,{href:route("admin.tenants.create"),className:"flex items-center gap-2 px-6 py-3 bg-[#ff3d03] hover:bg-[#ff3d03]/90 text-white rounded-xl font-bold text-sm shadow-lg shadow-[#ff3d03]/20 transition-all transform hover:scale-105",children:[e.jsx(N,{className:"h-4 w-4"}),"Nova Loja"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] p-4 rounded-[24px] border border-gray-100 dark:border-white/5 shadow-sm flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 w-full",children:[e.jsx(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, domínio ou email...",value:d,onChange:s=>g(s.target.value),className:"w-full pl-9 pr-4 py-2.5 rounded-xl bg-gray-50 dark:bg-white/5 border-transparent focus:border-[#ff3d03] focus:ring-[#ff3d03] text-sm"})]}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto overflow-x-auto pb-2 md:pb-0",children:[e.jsxs("select",{value:i,onChange:s=>p("status",s.target.value),className:"px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-white/5 border-transparent focus:border-[#ff3d03] focus:ring-[#ff3d03] text-sm font-medium min-w-[140px]",children:[e.jsx("option",{value:"all",children:"Todos Status"}),e.jsx("option",{value:"active",children:"Ativos"}),e.jsx("option",{value:"suspended",children:"Suspensos"}),e.jsx("option",{value:"trial",children:"Em Trial"}),e.jsx("option",{value:"inactive",children:"Inativos"})]}),e.jsxs("select",{value:n,onChange:s=>p("plan",s.target.value),className:"px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-white/5 border-transparent focus:border-[#ff3d03] focus:ring-[#ff3d03] text-sm font-medium min-w-[140px]",children:[e.jsx("option",{value:"all",children:"Todos Planos"}),l&&l.map(s=>e.jsx("option",{value:s.plan,children:s.display_name},s.plan))]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[32px] border border-gray-100 dark:border-white/5 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50/50 dark:bg-white/5 border-b border-gray-100 dark:border-white/5",children:[e.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Loja"}),e.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Plano"}),e.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Uso"}),e.jsx("th",{className:"text-right py-4 px-6 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Ações"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-white/5",children:[r.data.map(s=>e.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-[#ff3d03] to-[#e63700] flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-[#ff3d03]/20",children:s.slug.substring(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx(c,{href:route("admin.tenants.edit",s.id),className:"font-bold text-gray-900 dark:text-white hover:text-[#ff3d03] transition-colors",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mt-0.5",children:[e.jsx("span",{children:s.email}),e.jsx("span",{children:"•"}),e.jsxs("a",{href:`http://${s.slug}.oodelivery.com.br`,target:"_blank",rel:"noreferrer",className:"hover:underline hover:text-[#ff3d03]",children:[s.slug,".oodelivery.com.br"]})]})]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`px-2.5 py-1 rounded-lg text-xs font-bold w-fit ${b(s.plan)}`,children:s.plan.toUpperCase()}),s.is_trial_active&&j(s)]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("span",{className:`px-2.5 py-1 rounded-lg text-xs font-bold flex items-center gap-1.5 w-fit ${s.is_suspended?"bg-red-50 text-red-600 dark:bg-red-500/10 dark:text-red-400":s.is_active?"bg-green-50 text-green-600 dark:bg-green-500/10 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-white/10 dark:text-gray-400"}`,children:[e.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${s.is_suspended?"bg-red-500":s.is_active?"bg-green-500":"bg-gray-500"}`}),s.is_suspended?"Suspenso":s.is_active?"Ativo":"Inativo"]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("span",{className:"text-gray-500 flex items-center gap-1",children:[e.jsx(k,{className:"h-3 w-3"})," Prod."]}),e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:[s.usage.products,e.jsxs("span",{className:"text-gray-400 font-normal",children:[" / ",s.limits.products||"∞"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("span",{className:"text-gray-500 flex items-center gap-1",children:[e.jsx(S,{className:"h-3 w-3"})," Ped."]}),e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:s.usage.orders})]})]})}),e.jsx("td",{className:"py-4 px-6 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.is_trial_active&&e.jsx("button",{onClick:()=>f(s.id,7),className:"px-2 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded text-[10px] font-bold transition-colors",title:"Estender +7 dias",children:"+7d"}),e.jsx(c,{href:route("admin.tenants.edit",s.id),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-white/10 text-gray-400 hover:text-[#ff3d03] transition-colors",title:"Editar",children:e.jsx(_,{className:"h-4 w-4"})})]})})]},s.id)),r.data.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"py-12 text-center text-gray-500",children:[e.jsx(T,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"font-medium",children:"Nenhuma loja encontrada"}),e.jsx("p",{className:"text-xs mt-1",children:"Tente ajustar os filtros de busca"})]})})]})]})}),e.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-white/5",children:e.jsx(C,{links:r.links})})]})]})]})}export{U as default};
