import{r as g,u,j as e,H as P,e as n}from"./app-cmDn-ScS.js";import{A as R}from"./AuthenticatedLayout-B0kZBw41.js";import{I as r}from"./InputLabel-CMFi5QJo.js";import{T as i}from"./TextInput-BF2AA_N-.js";import{P as b}from"./PrimaryButton-DXaL0-Hd.js";import{S as M}from"./SecondaryButton-BsZ2IZSS.js";import{M as T}from"./Modal-Sh_XDp3_.js";import{P as B}from"./PageHeader-CkBiyep5.js";import{P as f}from"./plus-DYYyYX85.js";import{H as y}from"./history-vtQGZq5n.js";import{S as E}from"./settings-CSq_W61N.js";import{A as F}from"./arrow-down-left-cOqRM-TP.js";import{A as j}from"./arrow-up-right-BD8CE4dq.js";import{G as $}from"./gift-Bv3SlKRB.js";import{S as G}from"./save-DX0KVa3w.js";import{t as H}from"./switch-C8DhdbdW.js";import"./shopping-bag-HL2bdqNk.js";import"./package-CcUPpoOH.js";import"./menu-D-TwlwJG.js";import"./use-resolve-button-type-DuTxu8YL.js";import"./keyboard-B1dAZWpV.js";import"./use-sync-refs-BiKwmHZ9.js";import"./portal-C9QA1GZF.js";import"./with-selector-mgSl_Jlt.js";import"./transition-BL9swOSS.js";import"./credit-card-OmDi8ddi.js";import"./trophy-B_koKXyF.js";import"./chart-column-BXKl7CI6.js";import"./ticket-Bfa0MC-p.js";import"./shield-check-C-44Ypc8.js";import"./log-out-DJbLHuUV.js";import"./truck-DvYom0uY.js";import"./chevron-down-DysrQlU5.js";import"./clock-DZoNQGyV.js";import"./search-BkQeIgdy.js";import"./sparkles-CL-wBgm9.js";import"./arrow-right-CuZLCI4b.js";import"./hidden-BIwEDHIj.js";function ke({settings:c,history:m,customers:v}){const[a,p]=g.useState("dashboard"),[w,s]=g.useState(!1),{data:d,setData:x,post:N,processing:k}=u({loyalty_enabled:c?.loyalty_enabled??!1,points_per_currency:c?.points_per_currency??1,currency_per_point:c?.currency_per_point??.1}),_=t=>{t.preventDefault(),N(route("loyalty.settings"))},{data:o,setData:l,post:C,processing:A,reset:S,errors:h}=u({customer_id:"",points:"",type:"add",description:"Ajuste manual"}),D=t=>{t.preventDefault(),C(route("loyalty.adjust"),{onSuccess:()=>{s(!1),S()}})};return e.jsxs(R,{children:[e.jsx(P,{title:"Fidelidade"}),e.jsxs("div",{className:"flex h-full flex-col space-y-8",children:[e.jsx(B,{title:"Programa de Fidelidade",subtitle:"Gerencie pontos, recompensas e configurações.",action:a==="dashboard"?e.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 rounded-2xl bg-[#ff3d03] px-6 py-3 text-sm font-bold text-white shadow-lg shadow-[#ff3d03]/20 hover:bg-[#e63700] hover:scale-105 active:scale-95 transition-all whitespace-nowrap",children:[e.jsx(f,{className:"h-5 w-5"}),"Ajuste Manual"]}):void 0}),e.jsx("div",{className:"flex justify-center md:justify-start",children:e.jsxs("nav",{className:"flex items-center gap-1 bg-white dark:bg-[#1a1b1e] p-1.5 rounded-2xl border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsxs("button",{onClick:()=>p("dashboard"),className:n("px-6 py-2.5 rounded-xl text-sm font-bold transition-all whitespace-nowrap flex items-center gap-2",a==="dashboard"?"bg-[#ff3d03] text-white shadow-md shadow-[#ff3d03]/20":"text-gray-500 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5"),children:[e.jsx(y,{className:"h-4 w-4"}),"Visão Geral"]}),e.jsxs("button",{onClick:()=>p("settings"),className:n("px-6 py-2.5 rounded-xl text-sm font-bold transition-all whitespace-nowrap flex items-center gap-2",a==="settings"?"bg-[#ff3d03] text-white shadow-md shadow-[#ff3d03]/20":"text-gray-500 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5"),children:[e.jsx(E,{className:"h-4 w-4"}),"Configurações"]})]})}),e.jsxs("div",{children:[a==="dashboard"&&e.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[32px] shadow-xl shadow-gray-200/50 dark:shadow-none border border-gray-100 dark:border-white/5 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-white/5 flex justify-between items-center",children:e.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:"Últimas Movimentações"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-[#0f1012] text-gray-500 dark:text-gray-400 uppercase text-xs font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 rounded-tl-[32px]",children:"Cliente"}),e.jsx("th",{className:"px-6 py-4",children:"Tipo"}),e.jsx("th",{className:"px-6 py-4",children:"Pontos"}),e.jsx("th",{className:"px-6 py-4",children:"Descrição"}),e.jsx("th",{className:"px-6 py-4 rounded-tr-[32px]",children:"Data"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-white/5",children:[m.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:t.customer.name}),e.jsx("td",{className:"px-6 py-4",children:t.type==="earn"?e.jsxs("span",{className:"inline-flex items-center gap-1.5 text-green-600 bg-green-50 dark:bg-green-500/10 px-3 py-1 rounded-lg text-xs font-bold border border-green-100 dark:border-green-500/20",children:[e.jsx(F,{className:"h-3 w-3"})," Acúmulo"]}):e.jsxs("span",{className:"inline-flex items-center gap-1.5 text-red-600 bg-red-50 dark:bg-red-500/10 px-3 py-1 rounded-lg text-xs font-bold border border-red-100 dark:border-red-500/20",children:[e.jsx(j,{className:"h-3 w-3"})," Resgate"]})}),e.jsxs("td",{className:n("px-6 py-4 font-black text-lg",t.type==="earn"?"text-green-600":"text-red-500"),children:[t.type==="earn"?"+":"-",t.points]}),e.jsx("td",{className:"px-6 py-4 text-gray-500 dark:text-gray-400",children:t.description}),e.jsxs("td",{className:"px-6 py-4 text-gray-400 dark:text-gray-500 text-xs font-medium",children:[new Date(t.created_at).toLocaleDateString("pt-BR")," às ",new Date(t.created_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]},t.id)),m.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-20 text-center text-gray-500 dark:text-gray-400 flex flex-col items-center justify-center w-full",children:[e.jsx("div",{className:"h-16 w-16 bg-gray-50 dark:bg-white/5 rounded-full flex items-center justify-center mb-4",children:e.jsx(y,{className:"h-8 w-8 text-gray-300"})}),e.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:"Nenhuma movimentação registrada."})]})})]})]})})]})}),a==="settings"&&e.jsx("div",{className:"max-w-4xl space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[e.jsx("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[32px] shadow-xl shadow-gray-200/50 dark:shadow-none border border-gray-100 dark:border-white/5 p-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-orange-50 dark:bg-orange-900/20 flex items-center justify-center text-[#ff3d03]",children:e.jsx($,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Programa de Fidelidade"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ative para permitir que seus clientes acumulem pontos."})]})]}),e.jsx(H,{checked:d.loyalty_enabled,onChange:t=>x("loyalty_enabled",t),className:`${d.loyalty_enabled?"bg-[#ff3d03]":"bg-gray-300 dark:bg-gray-600"} relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none`,children:e.jsx("span",{className:`${d.loyalty_enabled?"translate-x-6":"translate-x-1"} inline-block h-5 w-5 transform rounded-full bg-white transition-transform`})})]})}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1e] rounded-[32px] shadow-xl shadow-gray-200/50 dark:shadow-none border border-gray-100 dark:border-white/5 p-8",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6",children:"Regras de Pontuação"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Pontos por Real Gasto",className:"mb-2"}),e.jsxs("div",{className:"relative group",children:[e.jsx(i,{type:"number",value:d.points_per_currency,onChange:t=>x("points_per_currency",parseFloat(t.target.value)),className:"w-full pr-16 h-14 text-lg font-bold",step:"0.1",min:"0"}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none text-gray-400 font-bold bg-transparent",children:"pts / R$"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2 pl-1",children:["Ex: O cliente ganha ",e.jsx("strong",{className:"text-gray-900 dark:text-white",children:"1 ponto"})," a cada R$ 1,00 gasto."]})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Valor do CashBack (Resgate)",className:"mb-2"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none text-gray-400 font-bold",children:"R$"}),e.jsx(i,{type:"number",value:d.currency_per_point,onChange:t=>x("currency_per_point",parseFloat(t.target.value)),className:"w-full pl-10 pr-16 h-14 text-lg font-bold",step:"0.01",min:"0"}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none text-gray-400 font-bold",children:"/ ponto"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2 pl-1",children:["Ex: Cada ponto vale ",e.jsx("strong",{className:"text-gray-900 dark:text-white",children:"R$ 0,10"})," de desconto."]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(b,{disabled:k,className:"h-12 px-8 rounded-xl bg-[#ff3d03] hover:bg-[#e63700] shadow-lg shadow-[#ff3d03]/20 border-transparent text-base font-bold",children:[e.jsx(G,{className:"h-5 w-5 mr-2"}),"Salvar Configurações"]})})]})})]})]}),e.jsx(T,{show:w,onClose:()=>s(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-black text-gray-900 dark:text-white",children:"Ajuste Manual de Pontos"}),e.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600"})]}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Cliente"}),e.jsxs("select",{value:o.customer_id,onChange:t=>l("customer_id",t.target.value),className:"w-full mt-1 border-gray-200 dark:border-gray-700 bg-white dark:bg-[#0f1012] text-gray-900 dark:text-white focus:border-[#ff3d03] focus:ring-[#ff3d03] rounded-xl h-12 shadow-sm",required:!0,children:[e.jsx("option",{value:"",children:"Selecione um cliente..."}),v.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.loyalty_points," pts atuais)"]},t.id))]})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Tipo de Operação"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-1",children:[e.jsxs("button",{type:"button",onClick:()=>l("type","add"),className:n("flex items-center justify-center gap-2 py-3 px-4 rounded-xl border font-bold transition-all relative overflow-hidden",o.type==="add"?"bg-green-500 text-white border-green-500 shadow-md transform scale-[1.02]":"border-gray-200 text-gray-500 bg-gray-50 hover:bg-gray-100 dark:border-gray-700 dark:bg-white/5 dark:text-gray-400"),children:[e.jsx(f,{className:"h-5 w-5"})," Adicionar"]}),e.jsxs("button",{type:"button",onClick:()=>l("type","remove"),className:n("flex items-center justify-center gap-2 py-3 px-4 rounded-xl border font-bold transition-all relative overflow-hidden",o.type==="remove"?"bg-red-500 text-white border-red-500 shadow-md transform scale-[1.02]":"border-gray-200 text-gray-500 bg-gray-50 hover:bg-gray-100 dark:border-gray-700 dark:bg-white/5 dark:text-gray-400"),children:[e.jsx(j,{className:"h-5 w-5"})," Remover"]})]})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Quantidade de Pontos"}),e.jsx(i,{type:"number",value:o.points,onChange:t=>l("points",t.target.value),className:"w-full mt-1 h-12 font-bold text-lg",min:"1",placeholder:"0",required:!0}),h.points&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.points})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Motivo / Descrição"}),e.jsx(i,{type:"text",value:o.description,onChange:t=>l("description",t.target.value),className:"w-full mt-1 h-12",placeholder:"Ex: Bônus de aniversário",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-gray-100 dark:border-white/5",children:[e.jsx(M,{onClick:()=>s(!1),className:"h-12 px-6 rounded-xl",children:"Cancelar"}),e.jsx(b,{disabled:A,className:"h-12 px-6 rounded-xl bg-[#ff3d03] hover:bg-[#e63700] border-transparent shadow-lg shadow-[#ff3d03]/20",children:"Confirmar Ajuste"})]})]})]})})]})}export{ke as default};
