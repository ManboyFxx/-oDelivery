import{r,j as o,H as lt,d as R}from"./app-B9gtViVy.js";import{u as ct,S as dt,M as mt}from"./useAudio-BHUXML8-.js";import{t as x}from"./index-fvEs2NkQ.js";import ut from"./HeroSection-C2EGY68w.js";import pt from"./CategoryNav-CI5RezvQ.js";import ft from"./ProductGrid-CMb5yQ78.js";import ht from"./CartSidebar-BB8QvKL2.js";import gt from"./StoreInfoModal-C5yI2qHg.js";import xt from"./ProductModal-DMr4jrMQ.js";import wt from"./AuthModal-Br9odKuW.js";import bt from"./CustomerAreaModal-BaEaKeEl.js";import yt from"./CheckoutModal-BkZmniU0.js";import vt from"./MenuNavbar-C2DBpvDo.js";import{S as St}from"./search-CMtzBOH9.js";import"./instagram-Cc2XYFbG.js";import"./message-circle-GwAcZEsB.js";import"./map-pin-D_In3IQT.js";import"./navigation-CinX7pYC.js";import"./ProductCard-Bsx29PAD.js";import"./plus-BLztYt6j.js";import"./shopping-bag-sASrHuCS.js";import"./pen-BkZajcmn.js";import"./trash-2-Amv3kldw.js";import"./minus-eisOemAf.js";import"./chevron-right-CDziRA88.js";import"./clock-DI_Wwxgd.js";import"./star-mrhyeojK.js";import"./share-2-DmjYuBXd.js";import"./AddressForm-BPR31B3T.js";import"./TextInput-C7lJI3Sm.js";import"./InputLabel-Bi7_ICo3.js";import"./PrimaryButton-CMe0yobj.js";import"./SecondaryButton-CBt6MEka.js";import"./loader-circle-CK1MGoyD.js";import"./bell-DHDIdkCt.js";import"./gift-RwiyOCQ8.js";import"./trophy-Ch1k1ZhV.js";import"./log-out-CDSiAepq.js";import"./house-Ba2HotkD.js";import"./check-WocHE8PR.js";import"./history-WBig1Qt7.js";import"./copy-BOjoddwq.js";import"./Modal-BL7H72at.js";import"./keyboard-B1A1vkKm.js";import"./use-sync-refs-BOPwmgUw.js";import"./portal-DG5HsT3O.js";import"./with-selector-30sR8F9s.js";import"./hidden-EorsTIUM.js";import"./transition-YGiZBht7.js";import"./sparkles-BRvFKwR1.js";import"./arrow-left-CJjmVAHq.js";import"./circle-check-big-DqBNuNzr.js";import"./wallet-CY7LzU2c.js";import"./ticket-fUx25vSt.js";import"./credit-card-18wcj3yn.js";import"./banknote-BeOsEHqr.js";import"./switch-C1mVYhWx.js";import"./use-resolve-button-type-ByM8bgjc.js";import"./store-C_D7kVff.js";import"./user-CtolDA2J.js";function V(a,i){a=a.replace(/^#/,"");let l=parseInt(a.substring(0,2),16),c=parseInt(a.substring(2,4),16),m=parseInt(a.substring(4,6),16);l=Math.floor(l*(1+i/100)),c=Math.floor(c*(1+i/100)),m=Math.floor(m*(1+i/100)),l=Math.min(255,Math.max(0,l)),c=Math.min(255,Math.max(0,c)),m=Math.min(255,Math.max(0,m));const I=l.toString(16).padStart(2,"0"),f=c.toString(16).padStart(2,"0"),S=m.toString(16).padStart(2,"0");return`#${I}${f}${S}`}function Oe({store:a,categories:i,slug:l,authCustomer:c,activePromotion:m,availableCoupons:I}){const[f,S]=r.useState("all"),[E,U]=r.useState(""),[d,u]=r.useState([]),[B,O]=r.useState(null),[N,w]=r.useState(!1),[A,L]=r.useState(null),[D,P]=r.useState(null),[C,p]=r.useState(!1),[_,k]=r.useState(!1),[j,b]=r.useState(!1),[y,h]=r.useState(!1);r.useEffect(()=>{if(typeof window<"u"){const e=new URLSearchParams(window.location.search).get("ref");e&&localStorage.setItem("referral_code",e)}},[]);const[s,T]=r.useState(c),[J,H]=r.useState([]),[v,Q]=r.useState(()=>{const t=localStorage.getItem("menu_theme");return t?t==="dark":a.theme_mode==="dark"?!0:a.theme_mode==="light"?!1:window.matchMedia("(prefers-color-scheme: dark)").matches}),G=()=>{Q(t=>{const e=!t;return localStorage.setItem("menu_theme",e?"dark":"light"),e})},Y=async()=>{if(s)try{const t=await R.get("/customer/addresses");H(t.data)}catch(t){console.error("Error loading addresses:",t)}};r.useEffect(()=>{s?Y():H([])},[s]);const{play:F,initializeAudio:$}=ct();r.useEffect(()=>{const t=()=>$();return window.addEventListener("click",t,{once:!0}),window.addEventListener("touchstart",t,{once:!0}),()=>{window.removeEventListener("click",t),window.removeEventListener("touchstart",t)}},[$]),r.useEffect(()=>{const t=localStorage.getItem("cart");if(t)try{u(JSON.parse(t))}catch(e){console.error("Error parsing cart",e)}},[]),r.useEffect(()=>{localStorage.setItem("cart",JSON.stringify(d))},[d]),r.useEffect(()=>{const t=window.document.documentElement;v?t.classList.add("dark"):t.classList.remove("dark")},[v]),r.useEffect(()=>{const t=()=>{};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[i]);const K=t=>{if(S(t),t!=="all"){const e=document.getElementById(t);if(e){const n=e.getBoundingClientRect().top+window.scrollY-120;window.scrollTo({top:n,behavior:"smooth"})}}else window.scrollTo({top:0,behavior:"smooth"})},W=t=>{O(t),P(null),L(null),w(!0)},X=t=>{A!==null?(u(e=>e.map((g,n)=>n===A?t:g)),x.success("Item atualizado com sucesso!")):(u(e=>[...e,t]),x.success("Adicionado ao carrinho!"),F("success")),w(!1)},Z=t=>{const e=d[t];O(e.product),P(e),L(t),w(!0),p(!1)},tt=t=>{u(e=>e.filter((g,n)=>n!==t)),x.info("Item removido do carrinho.")},et=()=>{if(!s){x.info("Para finalizar, indentifique-se primeiro."),b(!0),p(!1);return}M(!0),p(!1)},[q,M]=r.useState(!1),ot=t=>{T(t)},rt=async()=>{try{await R.post("/customer/logout"),T(null),x.info("VocÃª saiu da conta."),h(!1)}catch(t){console.error(t)}},at=d.reduce((t,e)=>t+e.subtotal,0),z=d.reduce((t,e)=>t+e.quantity,0),st=(t,e)=>{e<1||u(g=>g.map((n,nt)=>{if(nt===t){const it=n.subtotal/n.quantity;return{...n,quantity:e,subtotal:it*e}}return n}))};return o.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-premium-dark text-gray-900 dark:text-gray-100 font-sans selection:bg-orange-100 selection:text-orange-900 pb-40 md:pb-40 transition-colors duration-300",children:[o.jsx(lt,{title:a.name,children:o.jsx("style",{children:`
                    :root {
                        --primary-color: ${a.theme_color||"#ff3d03"};
                        --primary-hover: ${V(a.theme_color||"#ff3d03",-10)};
                        --primary-active: ${V(a.theme_color||"#ff3d03",-20)};
                    }
                `})}),o.jsx(ut,{store:a,customer:s,onOpenAuth:()=>b(!0),onOpenProfile:()=>h(!0),onOpenCart:()=>p(!0),onOpenInfo:()=>k(!0),cartCount:z}),o.jsx("header",{className:"sticky top-0 z-40 bg-white/80 dark:bg-premium-dark/80 backdrop-blur-md shadow-sm border-b border-gray-100 dark:border-white/5 transition-colors duration-300",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-4 flex items-center justify-center gap-6",children:[o.jsx("div",{className:"flex-1 max-w-2xl",children:o.jsxs("div",{className:"relative group",children:[o.jsx(St,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-black transition-colors"}),o.jsx("input",{type:"text",placeholder:"O que vamos pedir agora?",value:E,onChange:t=>U(t.target.value),className:"w-full bg-gray-50/50 dark:bg-white/5 border border-transparent rounded-xl py-2.5 pl-11 pr-4 focus:ring-0 focus:border-gray-200 dark:focus:border-white/10 focus:bg-white dark:focus:bg-white/10 transition-all outline-none font-medium text-sm text-gray-900 dark:text-white placeholder:text-gray-950 dark:placeholder:text-gray-400"})]})}),o.jsx("button",{onClick:G,"aria-label":v?"Ativar modo claro":"Ativar modo escuro",className:"h-10 w-10 rounded-xl bg-gray-100 dark:bg-white/10 flex items-center justify-center text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-white/20 active:scale-90 transition-all shrink-0",children:v?o.jsx(dt,{className:"h-4 w-4"}):o.jsx(mt,{className:"h-4 w-4"})})]})}),o.jsx(pt,{categories:i,activeCategory:f,onSelectCategory:K}),o.jsx("main",{children:o.jsx("div",{className:"flex flex-col md:flex-row max-w-7xl mx-auto items-start gap-6",children:o.jsx("div",{className:"flex-1 w-full",children:o.jsx(ft,{categories:i.map(t=>({...t,products:t.products.filter(e=>e.name.toLowerCase().includes(E.toLowerCase())&&(f==="all"||t.id===f))})).filter(t=>t.products.length>0),onAdd:W,viewMode:a.menu_view_mode||"grid"})})})}),o.jsx(ht,{isOpen:C,onClose:()=>p(!1),cart:d,onUpdateQuantity:st,onEdit:Z,onRemove:tt,onCheckout:et}),o.jsx(gt,{isOpen:_,onClose:()=>k(!1),store:a}),N&&o.jsx(xt,{product:B,isOpen:N,onClose:()=>w(!1),onAddToCart:X,initialValues:D}),j&&o.jsx(wt,{isOpen:j,onClose:()=>b(!1),onLogin:ot,slug:l}),y&&o.jsx(bt,{isOpen:y,onClose:()=>h(!1),customer:s,onLogout:rt,store:a}),q&&o.jsx(yt,{show:q,onClose:()=>M(!1),cart:d,customer:s,store:a,total:at,addresses:J,onSuccess:()=>{u([]),M(!1)}}),s&&!C&&!y&&o.jsx("div",{className:"fixed top-4 right-4 z-40 hidden md:block",children:o.jsxs("button",{onClick:()=>h(!0),className:"bg-white px-4 py-2 rounded-full shadow-lg border border-gray-100 flex items-center gap-2 hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-xs uppercase",children:s.name.substring(0,2)}),o.jsx("span",{className:"font-bold text-gray-700 text-sm",children:s.name.split(" ")[0]})]})}),o.jsx(vt,{customer:s,cartCount:z,onHome:()=>window.scrollTo({top:0,behavior:"smooth"}),onAccount:()=>{s?h(!0):b(!0)},onStore:()=>k(!0),onCart:()=>p(!0),activeTab:C?"cart":y||j?"account":_?"store":"home"})]})}export{Oe as default};
